{
  "type": "object",
  "properties": {
    "wiqlQuery": {
      "type": "string",
      "description": "WIQL query string. Examples: 'SELECT [System.Id] FROM WorkItems WHERE [System.State] = 'Active'' or 'SELECT [System.Id] FROM WorkItems WHERE [System.AreaPath] UNDER 'ProjectName\\AreaName' ORDER BY [System.ChangedDate] DESC'"
    },
    "organization": {
      "type": "string",
      "description": "Azure DevOps organization name"
    },
    "project": {
      "type": "string",
      "description": "Azure DevOps project name"
    },
    "includeFields": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Additional fields to include (e.g., 'System.Description', 'Microsoft.VSTS.Common.Priority')"
    },
    "maxResults": {
      "type": "number",
      "description": "Maximum number of results to return per page (default 200, max 1000). ‚ö†Ô∏è Results are truncated at this limit - use pagination for more."
    },
    "skip": {
      "type": "number",
      "description": "Number of work items to skip for pagination (default 0). Example: skip=200, top=200 gets items 201-400."
    },
    "top": {
      "type": "number",
      "description": "Maximum number of work items to return (alias for maxResults, max 1000). When specified, overrides maxResults."
    },
    "includeSubstantiveChange": {
      "type": "boolean",
      "description": "Include computed fields lastSubstantiveChangeDate and daysInactive for each work item - automatically filters out automated changes. Essential for backlog hygiene workflows."
    },
    "filterBySubstantiveChangeAfter": {
      "type": "string",
      "description": "Filter results to only include work items with lastSubstantiveChangeDate after this date (ISO 8601 format, e.g., '2024-01-01T00:00:00Z'). Auto-enables includeSubstantiveChange. Use for finding recently active items."
    },
    "filterBySubstantiveChangeBefore": {
      "type": "string",
      "description": "Filter results to only include work items with lastSubstantiveChangeDate before this date (ISO 8601 format). Auto-enables includeSubstantiveChange. Use for finding stale items."
    },
    "filterByDaysInactiveMin": {
      "type": "number",
      "description": "Filter results to only include work items with daysInactive >= this value. Auto-enables includeSubstantiveChange. Use for finding stale items (e.g., 180 for items inactive 6+ months)."
    },
    "filterByDaysInactiveMax": {
      "type": "number",
      "description": "Filter results to only include work items with daysInactive <= this value. Auto-enables includeSubstantiveChange. Use for finding recently active items (e.g., 30 for items active in last month)."
    },
    "filterByMissingDescription": {
      "type": "boolean",
      "description": "Filter to only include work items with missing or empty description. Useful for backlog cleanup - finding items that need documentation."
    },
    "filterByMissingAcceptanceCriteria": {
      "type": "boolean",
      "description": "Filter to only include work items with missing or empty acceptance criteria. Useful for finding PBIs/Features that need completion criteria defined."
    },
    "returnQueryHandle": {
      "type": "boolean",
      "description": "üîê DEFAULT TRUE: Return query handle for safe operations. ‚ö†Ô∏è Only set to false if you need raw IDs for immediate user display. For analysis, bulk operations, or any workflow that might reference IDs later, keep this true to prevent hallucination. Handle expires after 1 hour."
    },
    "fetchFullPackages": {
      "type": "boolean",
      "description": "Fetch full context packages for each work item including description, comments, history, relations, children, and parent. ‚ö†Ô∏è WARNING: Increases API calls significantly (1 call per work item + relations/comments). Use for deep analysis of small result sets (<50 items). Automatically includes extended fields, relations, comments, and history."
    },
    "includePaginationDetails": {
      "type": "boolean",
      "description": "Force include pagination details in response even for complete result sets. By default, pagination is only included when totalCount > top (multi-page results). Set to true to always include pagination metadata."
    }
  },
  "required": [
    "wiqlQuery"
  ],
  "$id": "#/components/schemas/wit-get-work-items-by-query-wiql",
  "title": "wit-get-work-items-by-query-wiql",
  "description": "üîê ANTI-HALLUCINATION TOOL: Execute WIQL query and get both work item details AND a query handle for safe operations. ‚ö†Ô∏è CRITICAL: Do not reference work item IDs directly in subsequent operations - use the returned query_handle with bulk operation tools to prevent ID hallucination. Default returns handle + details for analysis workflows. Limit: 200 items (use pagination for more). Can filter results by last substantive change date to find stale or recently active items.",
  "category": "Query Handles",
  "aiPowered": false
}