
> enhanced-ado-mcp-server@2.1.0 pretest
> npm run generate-openapi


> enhanced-ado-mcp-server@2.1.0 generate-openapi
> tsx scripts/generate-openapi.ts

≡ƒÜÇ Generating OpenAPI specification...

≡ƒôü Creating output directory: C:\Users\ameliapayne\ADO-Work-Item-MSP\docs\api
≡ƒô¥ Generating OpenAPI 3.0 specification...
Γ£ô Generated OpenAPI spec: C:\Users\ameliapayne\ADO-Work-Item-MSP\docs\api\openapi.json

≡ƒôª Generating individual JSON schemas...
Γ£ô Generated schema: create-workitem.json
Γ£ô Generated schema: assign-copilot.json
Γ£ô Generated schema: get-context.json
Γ£ô Generated schema: extract-security-links.json
Γ£ô Generated schema: query-wiql.json
Γ£ô Generated schema: query-odata.json
Γ£ô Generated schema: execute-bulk-operations.json
Γ£ô Generated schema: link-workitems.json
Γ£ô Generated schema: undo-bulk.json
Γ£ô Generated schema: undo-forensic.json
Γ£ô Generated schema: export-work-items.json
Γ£ô Generated schema: analyze-workload.json
Γ£ô Generated schema: discover-tools.json
Γ£ô Generated schema: analyze-query-handle.json
Γ£ô Generated schema: analyze-bulk.json
Γ£ô Generated schema: list-handles.json
Γ£ô Generated schema: inspect-handle.json
Γ£ô Generated schema: get-context-bulk.json
Γ£ô Generated schema: get-config.json
Γ£ô Generated schema: get-team-members.json
Γ£ô Generated schema: get-prompts.json
Γ£ô Generated schema: list-agents.json
Γ£ô Generated schema: discover-custom-fields.json
Γ£ô Generated schema: export-field-schema.json
Γ£ô Generated schema: get-pr-diff.json
Γ£ô Generated schema: get-pr-comments.json
Γ£ô Generated schema: add-pr-comment.json
Γ£ô Generated schema index: index.json (27 schemas)

Γ£à OpenAPI generation complete!

Generated files:
  - docs/api/openapi.json (27 endpoints)
  - docs/api/schemas/*.json (27 schemas)

Output directory: C:\Users\ameliapayne\ADO-Work-Item-MSP\docs\api

You can now use these files to:
  - Generate API clients
  - Create API documentation
  - Validate requests/responses
  - Import into tools like Swagger UI, Postman, etc.

> enhanced-ado-mcp-server@2.1.0 test
> jest test/unit/handlers/get-work-item-context-package.handler.test.ts

FAIL test/unit/handlers/get-work-item-context-package.handler.test.ts
  ΓùÅ Test suite failed to run

    test/unit/handlers/get-work-item-context-package.handler.test.ts:97:59 - error TS2345: Argument of type 'Error' is not assignable to parameter of type 'never'.

    97       (mockHttpClient.get as jest.Mock).mockRejectedValue(new Error('Work item not found'));
                                                                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:115:59 - error TS2345: Argument of type 'Error' is not assignable to parameter of type 'never'.

    115       (mockHttpClient.get as jest.Mock).mockRejectedValue(new Error('Invalid work item ID'));
                                                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:132:59 - error TS2345: Argument of type '{ status: number; message: string; }' is not assignable to parameter of type 'never'.

    132       (mockHttpClient.get as jest.Mock).mockRejectedValue({ status: 404, message: 'Not found' });
                                                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:154:59 - error TS2345: Argument of type 'Error' is not assignable to parameter of type 'never'.

    154       (mockHttpClient.get as jest.Mock).mockRejectedValue(timeoutError);
                                                                  ~~~~~~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:173:59 - error TS2345: Argument of type 'Error' is not assignable to parameter of type 'never'.

    173       (mockHttpClient.get as jest.Mock).mockRejectedValue(new Error('ECONNREFUSED'));
                                                                  ~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:192:59 - error TS2345: Argument of type 'Error' is not assignable to parameter of type 'never'.

    192       (mockHttpClient.get as jest.Mock).mockRejectedValue(new Error('ENOTFOUND dev.azure.com'));
                                                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:210:59 - error TS2345: Argument of type '{ status: number; message: string; statusText: string; }' is not assignable to parameter of type 'never'.

    210       (mockHttpClient.get as jest.Mock).mockRejectedValue({
                                                                  ~
    211         status: 500,
        ~~~~~~~~~~~~~~~~~~~~
    ... 
    213         statusText: 'Internal Server Error'
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    214       });
        ~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:232:59 - error TS2345: Argument of type '{ status: number; message: string; statusText: string; }' is not assignable to parameter of type 'never'.

    232       (mockHttpClient.get as jest.Mock).mockRejectedValue({
                                                                  ~
    233         status: 401,
        ~~~~~~~~~~~~~~~~~~~~
    ... 
    235         statusText: 'Unauthorized'
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    236       });
        ~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:255:59 - error TS2345: Argument of type '{ status: number; message: string; statusText: string; }' is not assignable to parameter of type 'never'.

    255       (mockHttpClient.get as jest.Mock).mockRejectedValue({
                                                                  ~
    256         status: 403,
        ~~~~~~~~~~~~~~~~~~~~
    ... 
    258         statusText: 'Forbidden'
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    259       });
        ~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:280:59 - error TS2345: Argument of type '{ data: { id: number; }; status: number; }' is not assignable to parameter of type 'never'.

    280       (mockHttpClient.get as jest.Mock).mockResolvedValue({
                                                                  ~
    281         data: {
        ~~~~~~~~~~~~~~~
    ... 
    285         status: 200
        ~~~~~~~~~~~~~~~~~~~
    286       });
        ~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:296:59 - error TS2345: Argument of type '{ data: null; status: number; }' is not assignable to parameter of type 'never'.

    296       (mockHttpClient.get as jest.Mock).mockResolvedValue({
                                                                  ~
    297         data: null,
        ~~~~~~~~~~~~~~~~~~~
    298         status: 200
        ~~~~~~~~~~~~~~~~~~~
    299       });
        ~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:317:59 - error TS2345: Argument of type 'Error' is not assignable to parameter of type 'never'.

    317       (mockHttpClient.get as jest.Mock).mockRejectedValue(new Error('Unexpected token < in JSON at position 0'));
                                                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:342:32 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.Title': string; 'System.State': string; }; }; status: number; }' is not assignable to parameter of type 'never'.

    342         .mockResolvedValueOnce({
                                       ~
    343           data: {
        ~~~~~~~~~~~~~~~~~
    ... 
    347           status: 200
        ~~~~~~~~~~~~~~~~~~~~~
    348         })
        ~~~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:350:32 - error TS2345: Argument of type 'Error' is not assignable to parameter of type 'never'.

    350         .mockRejectedValueOnce(new Error('Comments API unavailable'));
                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:373:32 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.Title': string; 'System.State': string; }; }; status: number; }' is not assignable to parameter of type 'never'.

    373         .mockResolvedValueOnce({
                                       ~
    374           data: {
        ~~~~~~~~~~~~~~~~~
    ... 
    378           status: 200
        ~~~~~~~~~~~~~~~~~~~~~
    379         })
        ~~~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:380:32 - error TS2345: Argument of type 'Error' is not assignable to parameter of type 'never'.

    380         .mockRejectedValueOnce(new Error('History API timeout'));
                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:402:32 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.Title': string; 'System.WorkItemType': string; }; relations: { rel: string; url: string; }[]; }; status: number; }' is not assignable to parameter of type 'never'.

    402         .mockResolvedValueOnce({
                                       ~
    403           data: {
        ~~~~~~~~~~~~~~~~~
    ... 
    408           status: 200
        ~~~~~~~~~~~~~~~~~~~~~
    409         })
        ~~~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:410:32 - error TS2345: Argument of type 'Error' is not assignable to parameter of type 'never'.

    410         .mockRejectedValueOnce(new Error('Child work item not found'));
                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/handlers/get-work-item-context-package.handler.test.ts:431:59 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.Title': string; }; relations: ({ rel: string; url: string; } | { rel: string; url: null; })[]; }; status: number; }' is not assignable to parameter of type 'never'.

    431       (mockHttpClient.get as jest.Mock).mockResolvedValue({
                                                                  ~
    432         data: {
        ~~~~~~~~~~~~~~~
    ... 
    440         status: 200
        ~~~~~~~~~~~~~~~~~~~
    441       });
        ~~~~~~~

Test Suites: 1 failed, 1 total
Tests:       0 total
Snapshots:   0 total
Time:        4.462 s
Ran all test suites matching /test\\unit\\handlers\\get-work-item-context-package.handler.test.ts/i.
Force exiting Jest: Have you considered using `--detectOpenHandles` to detect async operations that kept running after all tests finished?
