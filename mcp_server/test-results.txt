
> enhanced-ado-mcp-server@1.5.0 test
> jest

  console.error
    [INFO] Bulk state transition: 3 of 3 items to 'Resolved' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:132:53)

  console.error
    [INFO] Generating OData query from description: "Find all active work items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:65:12)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:100:52)

  console.error
    [INFO] Î“Â£Ã  Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:129:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:100:22)

  console.error
    [INFO] Bulk state transition: 1 of 1 items to 'Active' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:177:53)

  console.error
    [INFO] Generating OData query from description: "Find all active work items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:65:12)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:159:52)

  console.error
    [INFO] Bulk state transition: 3 of 3 items to 'Done' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:206:53)

  console.error
    [INFO] Î“Â£Ã  Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:129:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:159:22)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 2 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:184:53)

  console.error
    [INFO] Executing OData query to create query handle (maxResults: 200)...

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:152:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:159:22)

  console.error
    [INFO] Bulk state transition: 3 of 5 items to 'Resolved' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:236:53)

  console.error
    [INFO] Query handle created: qh_d9bec907a093de11b21ff162a123bf55 (1 work items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:264:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:159:22)

  console.error
    [INFO] Selection criteria: [0,2,4]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:163:14)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:236:53)

  console.error
    [INFO] Bulk move to iteration operation: 1 of 1 work items to 'TestProject\InvalidSprint' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:208:53)

  console.error
    [INFO] Generating OData query from description: "Find all active work items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:65:12)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:230:52)

  console.error
    [INFO] Î“Â£Ã  Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:129:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:230:22)

  console.error
    [INFO] Bulk state transition: 1 of 4 items to 'Resolved' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:266:53)

  console.error
    [INFO] Executing OData query to create query handle (maxResults: 200)...

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:152:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:230:22)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 5 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:240:53)

  console.error
    [INFO] Selection criteria: {"states":["Active"],"tags":["critical"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:163:14)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:266:53)

  console.error
    [INFO] Query handle created: qh_096a68c02e0d5552d4636022ff9816d6 (2 work items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:264:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:230:22)

  console.error
    [INFO] Selection criteria: [1,3]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:73:14)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:240:53)

  console.error
    [INFO] Generating OData query from description: "Find non-existent items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:65:12)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:286:52)

  console.error
    [INFO] Bulk state transition: 3 of 3 items to 'Done' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:324:53)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 4 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:270:53)

  console.error
    [INFO] Selection criteria: {"states":["Active"],"tags":["frontend"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:73:14)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:270:53)

  console.error
    [INFO] Bulk state transition: 20 of 20 items to 'Done' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:353:53)

  console.error
    [INFO] Î“Â£Ã  Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:129:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:286:22)

  console.error
    [INFO] Bulk move to iteration operation: 3 of 3 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:298:53)

  console.error
    [INFO] Executing OData query to create query handle (maxResults: 200)...

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:152:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:286:22)

  console.error
    [WARN] OData query returned 0 results - cannot create query handle

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.warn (src/utils/logger.ts:29:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:202:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:286:22)

  console.error
    [INFO] Bulk state transition: 2 of 2 items to 'Resolved' (dry_run: false, validate: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:389:53)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 2 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:326:53)

  console.error
    [INFO] Generating OData query from description: "Find active items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:65:12)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:338:52)

  console.error
    [INFO] Bulk state transition: 2 of 2 items to 'Resolved' (dry_run: false, validate: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:425:53)

  console.error
    [INFO] Î“Â£Ã  Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:129:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:338:22)

  console.error
    [INFO] Bulk move to iteration operation: 15 of 15 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:357:53)

  console.error
    [INFO] Executing OData query to create query handle (maxResults: 200)...

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:152:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:338:22)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 2 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:385:53)

  console.error
    [INFO] Query handle created: qh_86e8fd17b918b7ed6189dab0dd5d1371 (1 work items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:264:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:338:22)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 2 work items to 'TestProject\Sprint 11' (dry_run: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:423:53)

  console.error
    [INFO] Generating OData query from description: "Find active items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:65:12)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:380:52)

  console.error
    [INFO] Move details: {
      "targetIteration": "TestProject\\Sprint 11",
      "totalInHandle": 2,
      "selectedForMove": 2,
      "selectionCriteria": "All items",
      "movedItems": [
        {
          "id": 101,
          "title": "Task 1",
          "type": "Task",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        },
        {
          "id": 102,
          "title": "Task 2",
          "type": "Task",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        }
      ],
      "childrenUpdated": 0
    }

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:244:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:423:22)

  console.error
    [INFO] Î“Â£Ã  Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:129:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:380:22)

  console.error
    [INFO] Executing OData query to create query handle (maxResults: 200)...

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:152:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:380:22)

  console.error
    [INFO] Bulk move to iteration operation: 1 of 1 work items to 'TestProject\Sprint 11' (dry_run: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:459:38)

  console.error
    [INFO] Move details: {
      "targetIteration": "TestProject\\Sprint 11",
      "totalInHandle": 1,
      "selectedForMove": 1,
      "selectionCriteria": "All items",
      "movedItems": [
        {
          "id": 101,
          "title": "Task 1",
          "type": "Task",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        }
      ],
      "childrenUpdated": 0
    }

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:244:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:459:7)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 2 work items to 'TestProject\Sprint 11' (dry_run: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:503:53)

  console.error
    [ERROR] Failed to transition work item 102: Error: API Error
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\bulk-transition-state.test.ts:409:32)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:429:16)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:425:22)

  console.error
    [INFO] Bulk state transition: 1 of 1 items to 'Resolved' (dry_run: false, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:463:38)

  console.error
    [INFO] Generating WIQL query from description: "Find all active work items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:71:12)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:102:51)

  console.error
    [INFO] Bulk state transition: 1 of 1 items to 'Resolved' (dry_run: false, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:502:38)

  console.error
    [INFO] Bulk assign operation: 4 of 5 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:73:57)

  console.error
    [INFO] Î“Â£Ã  Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:140:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:102:22)

  console.error
    [ERROR] Failed to create query handle: Error: Failed to execute OData query: 500 Internal Server Error - Server error
        at handleGenerateODataQuery (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\query\generate-odata-query.handler.ts:195:17)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\test\generate-odata-query-handle.test.ts:380:22)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:301:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:380:22)

  console.error
    [INFO] Selection criteria: {"states":["New","Active"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:73:57)

  console.error
    [INFO] Generating OData query from description: "Find active items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:65:12)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:428:37)

  console.error
    [INFO] Generating WIQL query from description: "Find all active work items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:71:12)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:184:51)

  console.error
    [INFO] Î“Â£Ã  Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:129:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:428:7)

  console.error
    [INFO] Bulk assign operation: 3 of 3 work items to 'team@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:106:57)

  console.error
    [INFO] Bulk state transition: 2 of 2 items to 'Resolved' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:643:53)

  console.error
    [INFO] Executing OData query to create query handle (maxResults: 50)...

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:152:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:428:7)

  console.error
    [INFO] Î“Â£Ã  Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:140:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:184:22)

  console.error
    [INFO] Query handle created: qh_fc3d44693a3d1fbee437a02d794d4dfc (1 work items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:264:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:428:7)

PASS test/unit/bulk-transition-state.test.ts (5.189 s)
  Bulk Transition State Handler
    State transition validation
      Î“ÃªÃœ should validate valid state transitions (241 ms)
      Î“ÃªÃœ should detect invalid state transitions (10 ms)
      Î“ÃªÃœ should allow transitions between common states (7 ms)
    Item selection
      Î“ÃªÃœ should transition only selected items by index (13 ms)
      Î“ÃªÃœ should transition items matching criteria (18 ms)
      Î“ÃªÃœ should return error when no items selected (1 ms)
    Dry run mode
      Î“ÃªÃœ should show preview without making changes (15 ms)
      Î“ÃªÃœ should limit preview items to maxPreviewItems (7 ms)
    Execution mode
      Î“ÃªÃœ should transition work items successfully (13 ms)
      Î“ÃªÃœ should handle partial failures gracefully (73 ms)
    Optional parameters
      Î“ÃªÃœ should include reason when provided (7 ms)
      Î“ÃªÃœ should include comment when provided (9 ms)
    Error handling
      Î“ÃªÃœ should return error for invalid query handle (1 ms)
      Î“ÃªÃœ should return error when Azure CLI not available (2 ms)
      Î“ÃªÃœ should handle schema validation errors (1 ms)
    Edge cases
      Î“ÃªÃœ should handle expired query handles (17 ms)
      Î“ÃªÃœ should handle items already in target state (6 ms)

PASS src/test/generate-odata-query-handle.test.ts (5.221 s)
  Generate OData Query Handler - returnQueryHandle parameter
    when returnQueryHandle is false (opt-out)
      Î“ÃªÃœ should return only the generated query without creating a handle (220 ms)
    when returnQueryHandle is true (default)
      Î“ÃªÃœ should create a query handle by default when returnQueryHandle is not specified (23 ms)
      Î“ÃªÃœ should create a query handle and return work items (22 ms)
      Î“ÃªÃœ should handle query with no results gracefully (33 ms)
      Î“ÃªÃœ should include custom fields when specified (28 ms)
      Î“ÃªÃœ should handle API errors gracefully and fallback to query-only response (67 ms)
    maxResults parameter
      Î“ÃªÃœ should respect maxResults when fetching work items (24 ms)

  console.error
    [INFO] Bulk assign operation: 3 of 5 work items to 'dev@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:138:57)

  console.error
    [INFO] Selection criteria: [0,2,4]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:138:57)

  console.error
    [INFO] Executing query to create handle with maxResults=200

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:163:16)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:184:22)

  console.error
    [INFO] Query handle created: qh_0761ae73e22884d0fac9a6e5b86c727b (2 work items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:219:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:184:22)

  console.error
    [ERROR] Failed to move work item 102: Error: API Error
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\bulk-move-iteration.test.ts:482:32)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:212:16)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:503:22)

  console.error
    [INFO] Move details: {
      "targetIteration": "TestProject\\Sprint 11",
      "totalInHandle": 2,
      "selectedForMove": 2,
      "selectionCriteria": "All items",
      "movedItems": [
        {
          "id": 101,
          "title": "Task 1",
          "type": "Task",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        }
      ],
      "childrenUpdated": 0
    }

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:244:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:503:22)

  console.error
    [INFO] Bulk move to iteration operation: 4 of 4 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:168:58)

  console.error
    [WARN] 1 of 2 moves failed

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.warn (src/utils/logger.ts:29:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:262:14)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:503:22)

  console.error
    [INFO] Bulk assign operation: 2 of 3 work items to 'user@example.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:171:57)

  console.error
    [INFO] Generating WIQL query from description: "Find non-existent items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:71:12)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:244:51)

  console.error
    [INFO] Bulk move to iteration operation: 1 of 1 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:534:53)

  console.error
    [INFO] Bulk move to iteration operation: 4 of 4 work items to 'TestProject\Sprint 11' (dry_run: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:180:57)

  console.error
    [INFO] Î“Â£Ã  Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:140:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:244:22)

  console.error
    [INFO] Selection criteria: {"states":["Active"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:171:57)

  console.error
    [INFO] Bulk move to iteration operation: 1 of 1 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:560:53)

  console.error
    [INFO] Executing query to create handle with maxResults=200

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:163:16)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:244:22)

  console.error
    [INFO] Move details: {
      "targetIteration": "TestProject\\Sprint 11",
      "totalInHandle": 4,
      "selectedForMove": 4,
      "selectionCriteria": "All items",
      "movedItems": [
        {
          "id": 101,
          "title": "Feature 1",
          "type": "Feature",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        },
        {
          "id": 102,
          "title": "Bug 1",
          "type": "Bug",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        },
        {
          "id": 103,
          "title": "Task 1",
          "type": "Task",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        },
        {
          "id": 104,
          "title": "Task 2",
          "type": "Task",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        }
      ],
      "childrenUpdated": 0
    }

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:244:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:180:26)

  console.error
    [INFO] Bulk assign operation: 3 of 3 work items to 'new@example.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:202:57)

  console.error
    [WARN] Query returned 0 results, skipping handle creation

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.warn (src/utils/logger.ts:29:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:270:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:244:22)

  console.error
    [INFO] Bulk state transition: 4 of 4 items to 'Active' (dry_run: false, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:200:63)

  console.error
    [INFO] Generating WIQL query from description: "Find active items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:71:12)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:309:51)

  console.error
    [INFO] Bulk assign operation: 0 of 3 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:238:57)

  console.error
    [INFO] Selection criteria: {"states":["NonExistent"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:238:57)

  console.error
    [INFO] Î“Â£Ã  Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:140:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:309:22)

  console.error
    [INFO] Executing query to create handle with maxResults=200

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:163:16)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:309:22)

  console.error
    [INFO] Bulk assign operation: 0 of 2 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:270:57)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 1 target(s) using many-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:257:61)

  console.error
    [INFO] Query handle created: qh_a7df6c923c27781c6f57073e800085ad (1 work items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:219:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:309:22)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 2 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:690:53)

  console.error
    [INFO] Selection criteria: [5,10]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:270:57)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 1 target(s) using many-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:271:61)

PASS test/unit/bulk-move-iteration.test.ts (5.222 s)
  Bulk Move to Iteration Handler
    Iteration path validation
      Î“ÃªÃœ should validate iteration path exists (208 ms)
      Î“ÃªÃœ should return error for invalid iteration path (15 ms)
    Item selection
      Î“ÃªÃœ should move only selected items by index (18 ms)
      Î“ÃªÃœ should move items matching criteria (15 ms)
      Î“ÃªÃœ should move all items when selector is "all" (8 ms)
    Dry run mode
      Î“ÃªÃœ should show preview without making changes (19 ms)
      Î“ÃªÃœ should limit preview to maxPreviewItems (7 ms)
      Î“ÃªÃœ should show current iteration path in preview (6 ms)
    Execution mode
      Î“ÃªÃœ should move work items successfully (15 ms)
      Î“ÃªÃœ should include comment when provided (19 ms)
      Î“ÃªÃœ should handle partial failures (72 ms)
    Child items handling
      Î“ÃªÃœ should support updating child items (6 ms)
      Î“ÃªÃœ should default to not updating child items (5 ms)
    Error handling
      Î“ÃªÃœ should return error for invalid query handle (1 ms)
      Î“ÃªÃœ should return error when Azure CLI not available (1 ms)
      Î“ÃªÃœ should handle schema validation errors (2 ms)
      Î“ÃªÃœ should return error when no items selected (1 ms)
    Edge cases
      Î“ÃªÃœ should handle expired query handles (15 ms)
      Î“ÃªÃœ should handle empty workItemContext gracefully (10 ms)

  console.error
    [INFO] Generating WIQL query from description: "Find active items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:71:12)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:356:51)

  console.error
    [INFO] Î“Â£Ã  Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:140:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:356:22)

  console.error
    [INFO] Bulk state transition: 2 of 5 items to 'Done' (dry_run: false, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:315:63)

  console.error
    [INFO] Executing query to create handle with maxResults=200

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:163:16)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:356:22)

  console.error
    [INFO] Bulk assign operation: 8 of 8 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:318:57)

  console.error
    [INFO] Selection criteria: {"tags":["frontend"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:163:14)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:315:63)

  console.error
    [INFO] Analyzing 2 work items via query handle (analysis types: effort, assignments, completion)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleAnalyzeByQueryHandle (src/services/handlers/ai-powered/analyze-by-query-handle.handler.ts:181:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:101:54)

  console.error
    [INFO] Bulk assign operation: 3 of 3 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:352:57)

  console.error
    [INFO] Fetching context packages for 5 work items from query handle qh_f1953aa731153747a62e91ff02930b3e

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:335:72)

  console.error
    [INFO] Bulk assign operation: 2 of 2 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:397:57)

  console.error
    [INFO] Analyzing 2 work items via query handle (analysis types: effort)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleAnalyzeByQueryHandle (src/services/handlers/ai-powered/analyze-by-query-handle.handler.ts:181:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:132:54)

  console.error
    [INFO] Bulk assign operation: 2 of 4 work items to 'urgent-team@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:431:57)

  console.error
    [INFO] Analyzing 2 work items via query handle (analysis types: assignments)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleAnalyzeByQueryHandle (src/services/handlers/ai-powered/analyze-by-query-handle.handler.ts:181:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:150:54)

  console.error
    [INFO] Selection criteria: {"states":["Active"],"tags":["urgent"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:431:57)

  console.error
    [INFO] Analyzing 2 work items via query handle (analysis types: risks)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleAnalyzeByQueryHandle (src/services/handlers/ai-powered/analyze-by-query-handle.handler.ts:181:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:169:54)

PASS src/test/bulk-assign-by-query-handle.test.ts (5.271 s)
  Bulk Assign By Query Handle Handler
    Assignment applies to selected items only
      Î“ÃªÃœ should assign only selected items to user (217 ms)
      Î“ÃªÃœ should assign all items when itemSelector is "all" (11 ms)
      Î“ÃªÃœ should assign only items at specified indices (12 ms)
    Clear messaging about assignment scope
      Î“ÃªÃœ should include "selected" in summary when using criteria selector (18 ms)
      Î“ÃªÃœ should show preview of items to be assigned (7 ms)
    Empty selection handling
      Î“ÃªÃœ should handle empty selection gracefully (13 ms)
      Î“ÃªÃœ should handle invalid indices gracefully (13 ms)
    Edge cases
      Î“ÃªÃœ should return error for invalid query handle (7 ms)
      Î“ÃªÃœ should limit preview to 5 items (6 ms)
    Backward Compatibility
      Î“ÃªÃœ should work when itemSelector is not provided (defaults to "all") (10 ms)
      Î“ÃªÃœ should maintain existing error handling (2 ms)
    Dry Run Mode
      Î“ÃªÃœ should indicate dry run in response (7 ms)
    Multiple criteria selection
      Î“ÃªÃœ should support multiple selection criteria (23 ms)

  console.error
    [ERROR] Failed to create query handle: Error: Internal Server Error
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\test\generate-wiql-query-handle.test.ts:354:54)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:294:16)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:356:22)

  console.error
    [INFO] Analyzing 2 work items via query handle (analysis types: effort, velocity, assignments, risks, completion, priorities)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleAnalyzeByQueryHandle (src/services/handlers/ai-powered/analyze-by-query-handle.handler.ts:181:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:187:54)

  console.error
    [INFO] Generating WIQL query from description: "Find active items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:71:12)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:420:51)

  console.error
    [ERROR] Error fetching context package for work item 401: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:108:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:335:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:335:29)

  console.error
    [INFO] Î“Â£Ã  Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:140:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:420:22)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:216:50)

  console.error
    [INFO] Executing query to create handle with maxResults=50

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:163:16)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:420:22)

  console.error
    [ERROR] Error fetching context package for work item 402: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:108:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:335:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:335:29)

  console.error
    [INFO] Query handle created: qh_e0315dbcaeb09f88af0b12f78acbb42d (1 work items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:219:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:420:22)

PASS src/test/generate-wiql-query-handle.test.ts (5.36 s)
  Generate WIQL Query Handler - returnQueryHandle parameter
    when returnQueryHandle is false (default)
      Î“ÃªÃœ should return only the generated query without creating a handle (221 ms)
    when returnQueryHandle is true
      Î“ÃªÃœ should create a query handle and return work items (34 ms)
      Î“ÃªÃœ should handle query with no results gracefully (21 ms)
      Î“ÃªÃœ should include custom fields when specified (28 ms)
      Î“ÃªÃœ should handle API errors gracefully and fallback to query-only response (65 ms)
    maxResults parameter
      Î“ÃªÃœ should respect maxResults when fetching work items (26 ms)

  console.error
    [ERROR] Error fetching context package for work item 403: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:108:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:335:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 2)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:335:29)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:253:50)

  console.error
    [ERROR] Error fetching context package for work item 404: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:108:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:335:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 3)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:335:29)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:263:50)

  console.error
    [ERROR] Error fetching context package for work item 405: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:108:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:335:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 4)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:335:29)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:276:50)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 3 target(s) using many-to-many strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:391:60)

  console.error
    [INFO] Bulk state transition: 1 of 6 items to 'Resolved' (dry_run: false, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:434:61)

  console.error
    [INFO] Selection criteria: {"tags":["critical"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:163:14)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:434:61)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 6 work items to 'TestProject\Technical Debt' (dry_run: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:71:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:454:58)

  console.error
    [INFO] Selection criteria: {"daysInactiveMin":30}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:73:14)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:454:58)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:290:50)

  console.error
    [INFO] Move details: {
      "targetIteration": "TestProject\\Technical Debt",
      "totalInHandle": 6,
      "selectedForMove": 2,
      "selectionCriteria": "{\"daysInactiveMin\":30}",
      "movedItems": [
        {
          "id": 703,
          "title": "Old Task",
          "type": "Task",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Technical Debt"
        },
        {
          "id": 705,
          "title": "Stale Bug",
          "type": "Bug",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Technical Debt"
        }
      ],
      "childrenUpdated": 0
    }

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:244:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:454:27)

  console.error
    [INFO] Fetching context packages for 3 work items from query handle qh_8a7362a7e581f8e992cc961d9ea2fc86

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:474:72)

  console.error
    [ERROR] Error fetching context package for work item 701: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:108:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:474:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:474:29)

  console.error
    [ERROR] Error fetching context package for work item 702: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:108:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:474:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:474:29)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:306:50)

  console.error
    [ERROR] Error fetching context package for work item 706: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:108:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:474:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 2)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:474:29)

  console.error
    [INFO] Bulk state transition: 3 of 3 items to 'Done' (dry_run: false, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:161:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:525:53)

  console.error
    [INFO] Bulk link operation: 3 source(s) â”œÃ¹ 3 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:94:56)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:321:50)

  console.error
    [ERROR] Failed to transition work item 802: Error: API rate limit exceeded
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:493:32)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:429:16)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:525:22)

PASS src/test/handle-based-analysis.test.ts (5.427 s)
  Handle-Based Analysis Tools
    wit-analyze-items
      Î“ÃªÃœ should analyze work items using query handle (190 ms)
      Î“ÃªÃœ should return error for non-existent query handle (4 ms)
      Î“ÃªÃœ should analyze effort correctly (9 ms)
      Î“ÃªÃœ should analyze assignments correctly (10 ms)
      Î“ÃªÃœ should analyze risks correctly (10 ms)
      Î“ÃªÃœ should handle multiple analysis types (7 ms)
    wit-query-handle-list
      Î“ÃªÃœ should list query handle statistics (26 ms)
      Î“ÃªÃœ should populate handles with correct item count (6 ms)
      Î“ÃªÃœ should provide warnings when no handles exist (5 ms)
      Î“ÃªÃœ should warn about high number of handles (6 ms)
      Î“ÃªÃœ should handle expired handles (25 ms)
      Î“ÃªÃœ should exclude expired handles from handles array by default (18 ms)
      Î“ÃªÃœ should include expired handles when requested (32 ms)

PASS test/integration/bulk-operations-integration.test.ts (5.426 s)
  Bulk Operations Integration Tests
    Scenario 1: Sprint Planning - Move and Transition
      Î“ÃªÃœ should move items to new sprint then transition to active (279 ms)
    Scenario 2: Feature Decomposition - Create Hierarchy
      Î“ÃªÃœ should link tasks to features using query handles (23 ms)
    Scenario 3: Sprint Cleanup - Bulk Transition and Context
      Î“ÃªÃœ should transition completed items and retrieve context (103 ms)
    Scenario 4: Dependency Chain - Link Related Items
      Î“ÃªÃœ should create dependency links between tasks (9 ms)
    Scenario 5: Selective Operations with Criteria
      Î“ÃªÃœ should perform selective operations based on multiple criteria (43 ms)
    Scenario 6: Error Recovery and Partial Success
      Î“ÃªÃœ should handle partial failures gracefully (31 ms)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 3 target(s) using one-to-many strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:134:56)

  console.error
    [INFO] Bulk link operation: 3 source(s) â”œÃ¹ 1 target(s) using many-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:173:56)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 2 target(s) using many-to-many strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:212:56)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:243:56)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:269:56)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:295:56)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:321:56)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 2 target(s) using many-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:352:56)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 2 target(s) using one-to-many strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:382:56)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 2 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:409:56)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 2 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:443:56)

  console.error
    [INFO] Bulk link operation: 10 source(s) â”œÃ¹ 10 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:471:56)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 2 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:510:56)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 2 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:548:56)

  console.error
    [ERROR] Failed to create link 102 -> 202: Error: Link creation failed
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\bulk-link-work-items.test.ts:528:32)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:541:16)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:548:22)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:591:56)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:621:56)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:649:56)

  console.error
    [INFO] Bulk link operation: 3 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:812:56)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:835:56)

PASS test/unit/bulk-link-work-items.test.ts (5.62 s)
  Bulk Link Work Items Handler
    Link strategies
      Î“ÃªÃœ should create one-to-one links (229 ms)
      Î“ÃªÃœ should create one-to-many links (9 ms)
      Î“ÃªÃœ should create many-to-one links (16 ms)
      Î“ÃªÃœ should create many-to-many links (6 ms)
    Link types
      Î“ÃªÃœ should support Parent link type (7 ms)
      Î“ÃªÃœ should support Child link type (10 ms)
      Î“ÃªÃœ should support Related link type (7 ms)
      Î“ÃªÃœ should support dependency link types (6 ms)
    Item selection
      Î“ÃªÃœ should support source item selector (8 ms)
      Î“ÃªÃœ should support target item selector (10 ms)
      Î“ÃªÃœ should support index-based selectors (6 ms)
    Dry run mode
      Î“ÃªÃœ should show preview without creating links (8 ms)
      Î“ÃªÃœ should limit preview to maxPreviewItems (6 ms)
    Execution mode
      Î“ÃªÃœ should create links successfully (8 ms)
      Î“ÃªÃœ should handle partial failures (64 ms)
      Î“ÃªÃœ should skip existing links when skipExisting=true (6 ms)
    Link validation
      Î“ÃªÃœ should validate hierarchical link types (7 ms)
      Î“ÃªÃœ should allow valid hierarchical relationships (5 ms)
    Error handling
      Î“ÃªÃœ should return error for invalid source query handle (8 ms)
      Î“ÃªÃœ should return error for invalid target query handle (1 ms)
      Î“ÃªÃœ should return error when Azure CLI not available (2 ms)
      Î“ÃªÃœ should handle invalid link type (2 ms)
      Î“ÃªÃœ should return error when no source items selected (2 ms)
      Î“ÃªÃœ should return error when no target items selected (2 ms)
    Edge cases
      Î“ÃªÃœ should handle mismatched counts in one-to-one strategy (7 ms)
      Î“ÃªÃœ should handle self-referencing links (10 ms)

  console.error
    [INFO] Bulk comment operation: 5 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:72:58)

  console.error
    [INFO] Bulk comment operation: 3 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:104:58)

  console.error
    [INFO] Bulk comment operation: 3 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:136:58)

  console.error
    [INFO] Bulk comment operation: 1 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:169:58)

  console.error
    [INFO] Bulk comment operation: 3 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:203:58)

PASS src/test/html-field-stripping.test.ts
  HTML Field Stripping Parameters
    Tool configuration
      Î“ÃªÃœ should register wit-get-work-item-context-package tool (1 ms)
      Î“ÃªÃœ should have includeHtmlFields in input schema (1 ms)
      Î“ÃªÃœ should have description mentioning context package

  console.error
    [INFO] Bulk comment operation: 3 of 4 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:235:58)

  console.error
    [INFO] Bulk comment operation: 2 of 2 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:280:58)

  console.error
    [INFO] Bulk comment operation: 2 of 2 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:307:58)

  console.error
    [INFO] Bulk comment operation: 2 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:341:58)

  console.error
    [INFO] Bulk comment operation: 3 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:376:58)

  console.error
    [INFO] Bulk comment operation: 0 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:436:58)

  console.error
    [INFO] Bulk comment operation: 5 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:469:58)

PASS src/test/bulk-comment-by-query-handle.test.ts
  Bulk Comment By Query Handle Handler
    itemSelector: "all" (default behavior)
      Î“ÃªÃœ should comment on all items when itemSelector is "all" (21 ms)
      Î“ÃªÃœ should default to "all" when itemSelector not provided (4 ms)
    itemSelector: [indices] (index array)
      Î“ÃªÃœ should comment on selected indices only (6 ms)
      Î“ÃªÃœ should handle single index selection (8 ms)
    itemSelector: {criteria} (criteria object)
      Î“ÃªÃœ should comment on items matching state criteria (13 ms)
      Î“ÃªÃœ should comment on items matching multiple states (9 ms)
    Template variable substitution
      Î“ÃªÃœ should substitute template variables with selected items context (6 ms)
      Î“ÃªÃœ should warn when template variables are present but no context available (6 ms)
    Comment is only added to selected items
      Î“ÃªÃœ should only affect selected items, not all items in handle (5 ms)
    Backward Compatibility
      Î“ÃªÃœ should work when itemSelector is not provided (defaults to "all") (4 ms)
      Î“ÃªÃœ should maintain existing error handling
    Error Handling
      Î“ÃªÃœ should return error for non-existent query handle
      Î“ÃªÃœ should handle empty selection gracefully (6 ms)
    Preview Items
      Î“ÃªÃœ should show preview of first 3 selected items (6 ms)

  console.error
    [INFO] Bulk assign operation: 20 of 20 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:79:57)

  console.error
    [INFO] Bulk description enhancement: processing 2 of 2 selected work items (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkEnhanceDescriptions (src/services/handlers/ai-powered/bulk-enhance-descriptions.handler.ts:166:12)
      at Object.<anonymous> (src/test/bulk-enhance-descriptions-minimization.test.ts:113:57)

  console.error
    [INFO] Selected 15 of 15 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:117:57)

  console.error
    [INFO] Bulk description enhancement: processing 1 of 1 selected work items (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkEnhanceDescriptions (src/services/handlers/ai-powered/bulk-enhance-descriptions.handler.ts:166:12)
      at Object.<anonymous> (src/test/bulk-enhance-descriptions-minimization.test.ts:147:57)

  console.error
    [INFO] Bulk remove operation: 15 of 15 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:117:57)

  console.error
    [INFO] Bulk description enhancement: processing 1 of 1 selected work items (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkEnhanceDescriptions (src/services/handlers/ai-powered/bulk-enhance-descriptions.handler.ts:166:12)
      at Object.<anonymous> (src/test/bulk-enhance-descriptions-minimization.test.ts:182:57)

  console.error
    [INFO] Bulk description enhancement: processing 1 of 1 selected work items (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkEnhanceDescriptions (src/services/handlers/ai-powered/bulk-enhance-descriptions.handler.ts:166:12)
      at Object.<anonymous> (src/test/bulk-enhance-descriptions-minimization.test.ts:213:57)

  console.error
    [INFO] Bulk update operation: 12 of 12 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:155:57)

  console.error
    [INFO] Selected 12 of 12 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:155:57)

  console.error
    [INFO] Bulk description enhancement: processing 1 of 1 selected work items (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkEnhanceDescriptions (src/services/handlers/ai-powered/bulk-enhance-descriptions.handler.ts:166:12)
      at Object.<anonymous> (src/test/bulk-enhance-descriptions-minimization.test.ts:263:57)

  console.error
    [INFO] Bulk description enhancement: processing 2 of 2 selected work items (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkEnhanceDescriptions (src/services/handlers/ai-powered/bulk-enhance-descriptions.handler.ts:166:12)
      at Object.<anonymous> (src/test/bulk-enhance-descriptions-minimization.test.ts:298:57)

  console.error
    [INFO] Bulk comment operation: 10 of 10 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:193:58)

PASS src/test/bulk-enhance-descriptions-minimization.test.ts
  Bulk Enhance Descriptions - Parameter Minimization
    includeTitles parameter
      Î“ÃªÃœ should omit titles by default (includeTitles: false) (15 ms)
      Î“ÃªÃœ should include titles when includeTitles: true (9 ms)
    includeConfidence parameter
      Î“ÃªÃœ should omit confidence by default (includeConfidence: false) (7 ms)
      Î“ÃªÃœ should omit high confidence scores even when includeConfidence: true (14 ms)
      Î“ÃªÃœ should include low confidence scores when includeConfidence: true (9 ms)
    Combined parameter optimization
      Î“ÃªÃœ should support both parameters together (10 ms)
    Schema validation
      Î“ÃªÃœ should have correct default values in schema (1 ms)
      Î“ÃªÃœ should accept explicit true values (1 ms)

  console.error
    [INFO] Bulk assign operation: 20 of 20 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:233:57)

  console.error
    [INFO] Bulk assign operation: 20 of 20 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:272:57)

  console.error
    [INFO] Bulk assign operation: 100 of 100 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:311:57)

  console.error
    [INFO] Bulk assign operation: 20 of 20 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:352:57)

  console.error
    [INFO] Bulk comment operation: 2 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/selection-integration.test.ts:170:65)

  console.error
    [INFO] Selected 3 of 3 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:81:57)

  console.error
    [INFO] Bulk assign operation: 3 of 3 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:390:57)

  console.error
    [INFO] Bulk remove operation: 3 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:81:57)

  console.error
    [INFO] Bulk update operation: 1 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/selection-integration.test.ts:201:63)

  console.error
    [INFO] Bulk assign operation: 5 of 5 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:428:57)

  console.error
    [INFO] Selected 1 of 5 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/selection-integration.test.ts:201:63)

  console.error
    [INFO] Bulk assign operation: 50 of 50 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:468:57)

  console.error
    [INFO] Selection criteria: [0]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/selection-integration.test.ts:201:63)

  console.error
    [INFO] Selected 2 of 4 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:126:57)

  console.error
    [INFO] Selection criteria: {"states":["Active"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:126:57)

  console.error
    [INFO] Bulk assign operation: 4 of 10 work items to 'test-user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/selection-integration.test.ts:238:63)

  console.error
    [INFO] Bulk assign operation: 5 of 10 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:513:57)

  console.error
    [INFO] Bulk remove operation: 2 of 4 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:126:57)

  console.error
    [INFO] Selection criteria: [0,2,4,6]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/selection-integration.test.ts:238:63)

  console.error
    [INFO] Selected 2 of 2 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:160:57)

  console.error
    [INFO] Selection criteria: {"states":["New"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:513:57)

  console.error
    [INFO] Bulk remove operation: 2 of 2 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:160:57)

PASS src/test/bulk-preview-limits.test.ts
  Bulk Operations Preview Limits
    Default preview limit (5 items)
      Î“ÃªÃœ should default to 5 items for bulk-assign (22 ms)
      Î“ÃªÃœ should default to 5 items for bulk-remove (21 ms)
      Î“ÃªÃœ should default to 10 items for bulk-update (22 ms)
      Î“ÃªÃœ should default to 10 items for bulk-comment (19 ms)
    Custom preview limits
      Î“ÃªÃœ should respect custom limit of 1 (5 ms)
      Î“ÃªÃœ should respect custom limit of 10 (5 ms)
      Î“ÃªÃœ should respect custom limit of 50 (6 ms)
    Truncation message handling
      Î“ÃªÃœ should show truncation message when preview is limited (9 ms)
      Î“ÃªÃœ should not show truncation message when preview shows all items (5 ms)
      Î“ÃªÃœ should not show truncation message when limit equals selected count (5 ms)
    Total count always shown
      Î“ÃªÃœ should always show total selected count even when preview is limited (6 ms)
      Î“ÃªÃœ should show correct counts with itemSelector criteria (19 ms)
    Schema validation
      Î“ÃªÃœ should validate maxPreviewItems min value (1) (1 ms)
      Î“ÃªÃœ should validate maxPreviewItems max value (50)
      Î“ÃªÃœ should accept valid maxPreviewItems values (1 ms)

  console.error
    [INFO] Bulk comment operation: 2 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/selection-integration.test.ts:288:65)

  console.error
    [INFO] Selected 10 of 10 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:190:57)

  console.error
    [INFO] Bulk comment operation: 2 of 4 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/selection-integration.test.ts:336:58)

  console.error
    [INFO] Bulk remove operation: 10 of 10 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:190:57)

  console.error
    [INFO] Bulk comment operation: 0 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/selection-integration.test.ts:376:60)

PASS src/test/selection-integration.test.ts
  Selection Integration Tests
    Scenario 1: Full Workflow - Query to Bulk Comment
      Î“ÃªÃœ should complete full workflow: query Î“Ã¥Ã† inspect Î“Ã¥Ã† select Î“Ã¥Ã† bulk comment (25 ms)
    Scenario 2: Single Item Selection (Index-Based)
      Î“ÃªÃœ should select and update a single item by index (16 ms)
    Scenario 3: Multiple Item Selection (Index Array)
      Î“ÃªÃœ should select and assign multiple items by indices (10 ms)
    Scenario 4: Criteria-Based Selection (States + Tags)
      Î“ÃªÃœ should select items matching multiple criteria (13 ms)
    Scenario 5: Selection by Staleness
      Î“ÃªÃœ should select stale items for followup (5 ms)
    Scenario 6: Error Cases
      Error Handling
        Î“ÃªÃœ should handle invalid query handle gracefully
        Î“ÃªÃœ should handle expired query handle (14 ms)
        Î“ÃªÃœ should handle empty selection gracefully (5 ms)
        Î“ÃªÃœ should validate indices are within bounds (1 ms)

  console.error
    [INFO] Selected 3 of 5 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:264:57)

  console.error
    [INFO] Selection criteria: [0,2,4]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:264:57)

  console.error
    [INFO] Bulk remove operation: 3 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:264:57)

  console.error
    [INFO] Selected 0 of 3 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:296:57)

  console.error
    [INFO] Selection criteria: {"states":["NonExistent"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:296:57)

  console.error
    [INFO] Bulk remove operation: 0 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:296:57)

  console.error
    [INFO] Selected 0 of 2 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:326:57)

  console.error
    [INFO] Selection criteria: [5,10]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:326:57)

  console.error
    [INFO] Bulk remove operation: 0 of 2 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:326:57)

  console.error
    [INFO] Bulk update operation: 3 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:79:57)

  console.error
    [INFO] Selected 3 of 3 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:79:57)

  console.error
    [INFO] Selected 3 of 3 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:358:57)

  console.error
    [INFO] Bulk update operation: 2 of 4 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:111:57)

  console.error
    [INFO] Bulk remove operation: 3 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:358:57)

  console.error
    [INFO] Selected 2 of 4 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:111:57)

PASS src/test/bulk-remove-by-query-handle.test.ts
  Bulk Remove By Query Handle Handler
    Enhanced Dry-Run Preview
      Î“ÃªÃœ should include structured selection details in dry-run preview (24 ms)
      Î“ÃªÃœ should show selection criteria in dry-run for criteria-based selection (16 ms)
      Î“ÃªÃœ should show "All items" in criteria for itemSelector="all" (10 ms)
      Î“ÃªÃœ should limit preview items to 5 even with larger selection (12 ms)
    Error Handling
      Î“ÃªÃœ should return error for invalid query handle (2 ms)
      Î“ÃªÃœ should return error for expired query handle (15 ms)
    Index-based Selection
      Î“ÃªÃœ should support index-based selection in dry-run (11 ms)
    Validation and Edge Cases
      Î“ÃªÃœ should handle empty selection gracefully (20 ms)
      Î“ÃªÃœ should handle invalid indices gracefully (12 ms)
    Backward Compatibility
      Î“ÃªÃœ should work when itemSelector is not provided (defaults to "all") (17 ms)
      Î“ÃªÃœ should maintain existing error handling (1 ms)

  console.error
    [INFO] Selection criteria: [0,2]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:111:57)

  console.error
    [INFO] Bulk update operation: 2 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:143:57)

  console.error
    [INFO] Selected 2 of 3 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:143:57)

  console.error
    [INFO] Selection criteria: {"states":["Active"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:143:57)

  console.error
    [INFO] Bulk update operation: 3 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:177:57)

  console.error
    [INFO] Selected 3 of 3 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:177:57)

  console.error
    [INFO] Bulk update operation: 2 of 2 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:209:57)

  console.error
    [INFO] Selected 2 of 2 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:209:57)

  console.error
    [INFO] Bulk update operation: 2 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:240:57)

  console.error
    [INFO] Selected 2 of 5 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:240:57)

  console.error
    [INFO] Selection criteria: [1,3]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:240:57)

  console.error
    [INFO] Bulk update operation: 8 of 8 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:318:57)

  console.error
    [INFO] Selected 8 of 8 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:318:57)

  console.error
    [INFO] Bulk update operation: 3 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:347:57)

  console.error
    [INFO] Selected 3 of 3 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:347:57)

PASS src/test/bulk-update-by-query-handle.test.ts
  Bulk Update By Query Handle Handler
    Item Selection with Enhanced Logging
      Î“ÃªÃœ should log selection information for "all" selector (16 ms)
      Î“ÃªÃœ should log selection criteria for index-based selector (20 ms)
      Î“ÃªÃœ should log selection criteria for criteria-based selector (22 ms)
    Item Validation
      Î“ÃªÃœ should validate selected items have context (12 ms)
    Enhanced Summary Messages
      Î“ÃªÃœ should show field count in dry run summary for "all" selector (20 ms)
      Î“ÃªÃœ should show selected vs total in dry run summary for filtered selector (11 ms)
    Error Handling
      Î“ÃªÃœ should return error for non-existent query handle (1 ms)
      Î“ÃªÃœ should validate schema for updates parameter (1 ms)
    Preview Items
      Î“ÃªÃœ should show preview of first 5 selected items (14 ms)
    Backward Compatibility
      Î“ÃªÃœ should work when itemSelector is not provided (defaults to "all") (12 ms)
      Î“ÃªÃœ should maintain existing error handling (1 ms)

  console.error
    [INFO] Getting info for query handle: qh_8da7dee358ee8c5c0060fbcddd68d8b8 (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:141:49)

  console.error
    [INFO] Getting info for query handle: qh_961b2cdba90b15be5b8633b46e0f294d (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:162:49)

  console.error
    [INFO] Getting info for query handle: qh_4e8f015bfe71dcfe10aef1a020a5612f (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:184:49)

  console.error
    [INFO] Getting info for query handle: qh_986bcc59dc9b79850980f216598f6b5e (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:199:49)

  console.error
    [INFO] Getting info for query handle: qh_8fb58130b8a93ee66a3ddd116675c1b3 (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:215:49)

  console.error
    [INFO] Getting info for query handle: qh_b9569e712d0b460e973147e511209cf6 (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:231:49)

  console.error
    [INFO] Getting info for query handle: qh_d3d7b6cb3580f7f481681745a4d846cc (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:248:49)

  console.error
    [INFO] Getting info for query handle: qh_3a5c41a885a2b71fd0a7f256ed9a7ea4 (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:266:49)

  console.error
    [INFO] Getting info for query handle: qh_01df44bf186991cdfaa8565d98e058a4 (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:282:49)

  console.error
    [INFO] Getting info for query handle: qh_ae507df43da1b5a9d156a7bb19238bc1 (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:298:49)

  console.error
    [INFO] Getting info for query handle: qh_c675877b0a9f2c851ccdc28109042fbd (1 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:346:49)

  console.error
    [INFO] Getting info for query handle: qh_113fb76817f62ecd320e2c4c7935fd49 (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:360:49)

  console.error
    [INFO] Getting info for query handle: qh_1810294a15f6c91fa8b0e961de82f4ff (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:375:49)

PASS src/test/query-handle-info.test.ts
  Query Handle Info Handler
    Basic Mode (detailed=false)
      Î“ÃªÃœ should return basic inspection data by default (17 ms)
      Î“ÃªÃœ should include item preview by default (15 ms)
      Î“ÃªÃœ should include selection hints (7 ms)
      Î“ÃªÃœ should include statistics when includeStats=true (5 ms)
      Î“ÃªÃœ should NOT include validation or selection analysis in basic mode (4 ms)
    Detailed Mode (detailed=true)
      Î“ÃªÃœ should include validation data when detailed=true (6 ms)
      Î“ÃªÃœ should include selection analysis when detailed=true and itemSelector provided (14 ms)
      Î“ÃªÃœ should handle "all" itemSelector (6 ms)
      Î“ÃªÃœ should handle criteria-based itemSelector (6 ms)
      Î“ÃªÃœ should fetch sample items when detailed=true and includeSampleItems=true (5 ms)
    Error Handling
      Î“ÃªÃœ should return error for invalid query handle (1 ms)
      Î“ÃªÃœ should return validation error for missing queryHandle (1 ms)
    Expiration Warnings
      Î“ÃªÃœ should warn when query handle is about to expire (11 ms)
    Metadata
      Î“ÃªÃœ should include correct metadata (10 ms)
      Î“ÃªÃœ should reflect detailed mode in metadata (4 ms)

  console.error
    [INFO] Fetching context packages for 3 work items from query handle qh_24779443d61403f39c77c835b201e845

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:85:65)

  console.error
    [INFO] Fetching context packages for 3 work items from query handle qh_f09f95f72679b0b69d590cd8fe1b5457

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:113:65)

  console.error
    [INFO] Fetching context packages for 2 work items from query handle qh_82b316e009d8d96551244648bc1a7316

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:140:65)

  console.error
    [INFO] Fetching context packages for 5 work items from query handle qh_b75197ff605e733e7253861bce816f84

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:169:65)

PASS src/test/odata-analytics.test.ts
  OData Analytics Handler - includeOdataMetadata parameter
    when includeOdataMetadata is false (default)
      Î“ÃªÃœ should strip @odata.* fields from results and top-level response (10 ms)
      Î“ÃªÃœ should strip @odata.nextLink when present (2 ms)
      Î“ÃªÃœ should filter out null values from results (6 ms)
    when includeOdataMetadata is true
      Î“ÃªÃœ should include @odata.* fields in response (3 ms)
      Î“ÃªÃœ should include @odata.nextLink when present (2 ms)
      Î“ÃªÃœ should NOT filter out null values when metadata is included (2 ms)
    includeMetadata parameter compatibility
      Î“ÃªÃœ should work independently from includeOdataMetadata (1 ms)
      Î“ÃªÃœ should include both types of metadata when both are true (1 ms)
    different query types
      Î“ÃªÃœ should strip metadata for workItemCount query (2 ms)
      Î“ÃªÃœ should strip metadata for velocityMetrics query (2 ms)

  console.error
    [INFO] Fetching context packages for 10 work items from query handle qh_58c15991e60d2d65ea6da4bb7f4814d2

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:201:65)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_b59638186ec8dda892b70463de12e111

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:230:50)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_5bf0c13d1cd0935dbd7bb5db83a873fb

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:258:50)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_b5330ac4050cb2fef3b0630102cc0a05

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:284:50)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_5ad93b4121eefc83162bd969d2bf61a7

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:310:50)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_3311b4b86ab7b266d3f0352fd9303366

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:338:50)

  console.error
    [INFO] Fetching context packages for 3 work items from query handle qh_2e6be8a6fc8540ce6832b7d2285d3d4c

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:437:65)

  console.error
    [WARN] Failed to fetch context package for work item 102: [ 'Failed to fetch item 102' ]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.warn (src/utils/logger.ts:29:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:144:18
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:437:22)

  console.error
    [INFO] Fetching context packages for 2 work items from query handle qh_e31498683efb25284e23025561cf7f9e

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:469:65)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_1656f40c34b2e7fb05ceb2caa0e37fa0

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:494:65)

  console.error
    [INFO] Fetching context packages for 2 work items from query handle qh_3b38f2ba8fbade585d6ca920eb53b62b

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:522:65)

  console.error
    [INFO] Fetching context packages for 2 work items from query handle qh_916395f8c9636ff02e9308e6b359e2b9

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:551:65)

  console.error
    [INFO] Fetching context packages for 2 work items from query handle qh_54eed5b46086d7daaf7abb0edcf47692

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:631:65)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_346b9f8286d43127e932c4cf8ed5c88b

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:661:50)

PASS test/unit/context-packages-by-handle.test.ts
  Get Context Packages By Query Handle Handler
    Basic retrieval
      Î“ÃªÃœ should retrieve context packages for all items (15 ms)
      Î“ÃªÃœ should retrieve context packages for selected indices (8 ms)
      Î“ÃªÃœ should retrieve context packages matching criteria (7 ms)
    Preview limiting
      Î“ÃªÃœ should limit to maxPreviewItems (6 ms)
      Î“ÃªÃœ should use default maxPreviewItems of 10 (15 ms)
    Optional parameters
      Î“ÃªÃœ should support includeHistory parameter (5 ms)
      Î“ÃªÃœ should support includeComments parameter (4 ms)
      Î“ÃªÃœ should support includeRelations parameter (5 ms)
      Î“ÃªÃœ should support includeChildren and includeParent parameters (5 ms)
      Î“ÃªÃœ should support includeExtendedFields parameter (6 ms)
    Error handling
      Î“ÃªÃœ should return error for invalid query handle (1 ms)
      Î“ÃªÃœ should return error when no items selected (1 ms)
      Î“ÃªÃœ should handle schema validation errors (1 ms)
      Î“ÃªÃœ should handle partial failures when fetching packages (12 ms)
    Selection summary
      Î“ÃªÃœ should include index-based selection summary (4 ms)
      Î“ÃªÃœ should include criteria-based selection summary (5 ms)
      Î“ÃªÃœ should include all selection summary (6 ms)
    Next steps guidance
      Î“ÃªÃœ should include helpful next steps (12 ms)
    Edge cases
      Î“ÃªÃœ should handle expired query handles (14 ms)
      Î“ÃªÃœ should handle empty query results (1 ms)
      Î“ÃªÃœ should handle maxPreviewItems larger than selection (7 ms)
    Configuration parameters
      Î“ÃªÃœ should use organization and project from parameters (5 ms)

PASS test/unit/fixtures-and-factories.test.ts
  Test Fixtures and Factories
    Work Item Fixtures
      Î“ÃªÃœ should provide pre-configured work items (2 ms)
      Î“ÃªÃœ should provide test identity (1 ms)
    Work Item Factory
      Î“ÃªÃœ should create work item with defaults (1 ms)
      Î“ÃªÃœ should create work item with overrides (1 ms)
      Î“ÃªÃœ should create specific work item types (1 ms)
      Î“ÃªÃœ should create parent-child relationships (1 ms)
      Î“ÃªÃœ should create multiple work items (2 ms)
      Î“ÃªÃœ should create context map from work items (2 ms)
      Î“ÃªÃœ should create work item context (1 ms)
    Query Fixtures
      Î“ÃªÃœ should provide WIQL query strings
      Î“ÃªÃœ should provide WIQL query results (1 ms)
    Query Factory
      Î“ÃªÃœ should create query handle (1 ms)
      Î“ÃªÃœ should create WIQL result (1 ms)
      Î“ÃªÃœ should create WIQL query string (2 ms)
      Î“ÃªÃœ should create OData query string
    Response Factory
      Î“ÃªÃœ should create success result (1 ms)
      Î“ÃªÃœ should create error result
      Î“ÃªÃœ should create custom tool execution result (1 ms)
      Î“ÃªÃœ should create work items batch (1 ms)
      Î“ÃªÃœ should create bulk operation result (1 ms)

PASS test/unit/config-types.test.ts
  Configuration Type Safety
    CLIArguments interface
      Î“ÃªÃœ should accept valid CLI arguments from yargs (8 ms)
      Î“ÃªÃœ should accept minimal CLI arguments (2 ms)
    updateConfigFromCLI function
      Î“ÃªÃœ should accept CLIArguments without type errors (1 ms)
      Î“ÃªÃœ should properly store CLI arguments for later use (1 ms)
    loadConfiguration function
      Î“ÃªÃœ should return properly typed MCPServerConfig (2 ms)
      Î“ÃªÃœ should apply proper defaults from schema (1 ms)
      Î“ÃªÃœ should handle verbose logging flag (1 ms)
      Î“ÃªÃœ should handle optional CLI parameters (1 ms)
    Type safety guarantees
      Î“ÃªÃœ should not allow assignment of wrong types to CLIArguments
      Î“ÃªÃœ should properly type optional CLI parameters (1 ms)
    No any types in config module
      Î“ÃªÃœ should use proper types throughout configuration system (1 ms)

PASS src/test/validation-errors.test.ts
  Schema Validation Error Messages
    String validation with custom messages
      Î“ÃªÃœ should provide helpful error for empty string with min constraint (7 ms)
      Î“ÃªÃœ should provide helpful error for empty required string (1 ms)
    Number validation with custom messages
      Î“ÃªÃœ should provide helpful error for negative number when positive required (2 ms)
      Î“ÃªÃœ should provide helpful error for non-integer number (1 ms)
      Î“ÃªÃœ should provide helpful error for value exceeding max (1 ms)
      Î“ÃªÃœ should provide helpful error for value below min (2 ms)
      Î“ÃªÃœ should provide helpful error for negative skip value (1 ms)
    Enum validation with custom messages
      Î“ÃªÃœ should provide helpful error for invalid enum value with errorMap (2 ms)
      Î“ÃªÃœ should provide helpful error for invalid scale type (2 ms)
      Î“ÃªÃœ should provide helpful error for invalid format type (2 ms)
    Array validation with custom messages
      Î“ÃªÃœ should provide helpful error for array exceeding max length (2 ms)
      Î“ÃªÃœ should provide helpful error for empty array when min required (1 ms)
    Range constraints with helpful messages
      Î“ÃªÃœ should provide helpful error for sampleSize exceeding limit (1 ms)
      Î“ÃªÃœ should provide helpful error for maxIterations out of range (1 ms)
      Î“ÃªÃœ should provide helpful error for criteria count constraints (1 ms)
    buildValidationErrorResponse formatting
      Î“ÃªÃœ should format Zod errors with field paths and helpful tips (2 ms)
      Î“ÃªÃœ should handle single validation error (4 ms)
      Î“ÃªÃœ should include received value when available (2 ms)
      Î“ÃªÃœ should handle non-Zod errors gracefully
      Î“ÃªÃœ should format multiple field errors clearly (1 ms)

PASS src/test/find-tool-minimization.test.ts
  Tool Discovery Token Minimization
    Schema Definition
      Î“ÃªÃœ should have includeExamples parameter with default false (1 ms)
      Î“ÃªÃœ should accept includeExamples: true
      Î“ÃªÃœ should accept includeExamples: false explicitly (1 ms)
      Î“ÃªÃœ should have token savings mentioned in description (1 ms)
    Response Format with includeExamples
      Î“ÃªÃœ should demonstrate response without exampleUsage when includeExamples is false (1 ms)
      Î“ÃªÃœ should demonstrate response with exampleUsage when includeExamples is true
    Token Savings Estimation
      Î“ÃªÃœ should demonstrate significant token savings per tool (1 ms)
      Î“ÃªÃœ should show cumulative savings with multiple tools (1 ms)
    Schema Validation
      Î“ÃªÃœ should maintain all required fields in schema (2 ms)
      Î“ÃªÃœ should reject invalid values (63 ms)
    Default Values
      Î“ÃªÃœ should apply correct defaults (1 ms)
    Integration with Tool Config
      Î“ÃªÃœ should be consistent with toolDiscoverySchema export (4 ms)

PASS src/test/select-items-from-query-handle.test.ts
  Select Items From Query Handle Handler
    with "all" selector
      Î“ÃªÃœ should select all items in query handle (3 ms)
      Î“ÃªÃœ should return message for all items selected (1 ms)
    with index array selector
      Î“ÃªÃœ should select items by specific indices (2 ms)
      Î“ÃªÃœ should handle partial index matches (1 ms)
    with criteria selector
      Î“ÃªÃœ should select items by state criteria (2 ms)
      Î“ÃªÃœ should select items by tags criteria (1 ms)
      Î“ÃªÃœ should select items by daysInactive criteria (1 ms)
      Î“ÃªÃœ should combine multiple criteria with AND logic (4 ms)
    empty selection results
      Î“ÃªÃœ should warn when no items match criteria (3 ms)
    error handling
      Î“ÃªÃœ should return error for invalid query handle (1 ms)
      Î“ÃªÃœ should return error for expired query handle (1 ms)
      Î“ÃªÃœ should validate schema and return error for invalid arguments (1 ms)
    preview functionality
      Î“ÃªÃœ should limit preview to specified count (2 ms)
      Î“ÃªÃœ should default preview to 10 items (1 ms)
      Î“ÃªÃœ should cap preview at 50 items (1 ms)
      Î“ÃªÃœ should include item details in preview (2 ms)
    metadata
      Î“ÃªÃœ should include relevant metadata in response (1 ms)

PASS src/test/query-handle-selection.test.ts
  Query Handle Selection Integration Tests
    Index-based Selection
      Î“ÃªÃœ should select items by zero-based indices (2 ms)
      Î“ÃªÃœ should handle out-of-bounds indices gracefully (1 ms)
      Î“ÃªÃœ should handle empty index array
      Î“ÃªÃœ should return null for invalid handle (1 ms)
      Î“ÃªÃœ should filter out negative indices (1 ms)
      Î“ÃªÃœ should handle duplicate indices
      Î“ÃªÃœ should handle selection from empty query result
    Criteria-based Selection
      Î“ÃªÃœ should filter by state
      Î“ÃªÃœ should filter by tags (1 ms)
      Î“ÃªÃœ should filter by title keywords (1 ms)
      Î“ÃªÃœ should filter by staleness (daysInactive) (1 ms)
      Î“ÃªÃœ should combine multiple criteria with AND logic (1 ms)
      Î“ÃªÃœ should return null for invalid handle
      Î“ÃªÃœ should return empty array when criteria matches no items
      Î“ÃªÃœ should filter by multiple states (1 ms)
      Î“ÃªÃœ should filter by multiple tags
      Î“ÃªÃœ should filter by daysInactiveMin only
      Î“ÃªÃœ should filter by daysInactiveMax only (1 ms)
      Î“ÃªÃœ should return all items when empty criteria is provided (1 ms)
      Î“ÃªÃœ should handle special characters in title search
      Î“ÃªÃœ should handle tags with spaces and special characters (1 ms)
      Î“ÃªÃœ should handle case-insensitive title search (1 ms)
      Î“ÃªÃœ should handle case-insensitive tag search
    Unified Item Selector Resolution
      Î“ÃªÃœ should handle "all" selector (2 ms)
      Î“ÃªÃœ should handle index array selector
      Î“ÃªÃœ should handle criteria object selector (1 ms)
      Î“ÃªÃœ should return null for invalid handle (1 ms)
      Î“ÃªÃœ should handle invalid selector type gracefully
    Edge Cases and Expiration
      Î“ÃªÃœ should return null for expired handles
      Î“ÃªÃœ should handle selection with missing itemContext gracefully (5 ms)
    Performance Tests
      Î“ÃªÃœ should handle selection from large itemContext (1000+ items) (4 ms)
      Î“ÃªÃœ should handle complex criteria with many conditions on large dataset (4 ms)
      Î“ÃªÃœ should handle index array with many indices (2 ms)
      Î“ÃªÃœ should efficiently filter large datasets with criteria (6 ms)

PASS src/test/detect-patterns-format.test.ts
  Detect Patterns - Format Options
    Î“ÃªÃœ should use categorized format by default (8 ms)
    Î“ÃªÃœ should support summary format with counts only (3 ms)
    Î“ÃªÃœ should support flat format with single array (3 ms)
    Î“ÃªÃœ should include format in metadata (3 ms)
    Î“ÃªÃœ should detect placeholder patterns (2 ms)
    Î“ÃªÃœ should detect duplicates (1 ms)
    Î“ÃªÃœ should detect unassigned committed items (2 ms)
    Î“ÃªÃœ should reduce context size with summary format (1 ms)
    Î“ÃªÃœ should have same match counts across all formats (1 ms)

  console.error
    [INFO] Validating query handle: qh_cb5d5869b3c8b6c2a1493e18c4581cc7 (2 items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleValidateQueryHandle (src/services/handlers/query-handles/validate-query-handle.handler.ts:62:12)
      at Object.<anonymous> (src/test/validate-query-handle.test.ts:75:51)

PASS src/test/context-tools-registration.test.ts
  Context Tools Registration
    Î“ÃªÃœ should register single context package tool (1 ms)
    Î“ÃªÃœ should register batch context package tool

PASS src/test/inspect-query-handle.test.ts
  Inspect Query Handle Handler
    Enhanced Preview Functionality
      Î“ÃªÃœ should return indexed preview with array indices (5 ms)
      Î“ÃªÃœ should include tags when present (2 ms)
    Selection Hints
      Î“ÃªÃœ should provide selection hints (2 ms)
    Available Selection Criteria
      Î“ÃªÃœ should show available selection criteria with counts (2 ms)
      Î“ÃªÃœ should show correct item counts for states (1 ms)
      Î“ÃªÃœ should show correct item counts for types (1 ms)
    Selection Statistics
      Î“ÃªÃœ should include selection statistics (1 ms)
      Î“ÃªÃœ should have accurate state statistics (1 ms)
      Î“ÃªÃœ should have accurate type statistics (1 ms)
      Î“ÃªÃœ should have accurate tag statistics (1 ms)
    Contextual Examples
      Î“ÃªÃœ should provide contextual selection examples when includeExamples is true (2 ms)
      Î“ÃªÃœ should omit contextual selection examples when includeExamples is false (default) (1 ms)
      Î“ÃªÃœ should omit contextual selection examples by default (1 ms)
      Î“ÃªÃœ should include stale items example when applicable and includeExamples is true (1 ms)
    Edge Cases
      Î“ÃªÃœ should handle expired query handles (2 ms)
      Î“ÃªÃœ should handle missing itemContext gracefully
      Î“ÃªÃœ should work when includePreview is false (2 ms)
      Î“ÃªÃœ should handle items without tags
    Backward Compatibility
      Î“ÃªÃœ should maintain legacy preview format
      Î“ÃªÃœ should maintain legacy selection_info format (1 ms)
      Î“ÃªÃœ should include selection_examples in legacy format when includeExamples is true (1 ms)

  console.error
    [INFO] Validating query handle: qh_d48341f695314e2c2d407cccf87b5f1a (1 items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleValidateQueryHandle (src/services/handlers/query-handles/validate-query-handle.handler.ts:62:12)
      at Object.<anonymous> (src/test/validate-query-handle.test.ts:124:51)

  console.error
    [INFO] Validating query handle: qh_1ab531783ceac049bbc7ce9c0d38ce45 (3 items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleValidateQueryHandle (src/services/handlers/query-handles/validate-query-handle.handler.ts:62:12)
      at Object.<anonymous> (src/test/validate-query-handle.test.ts:137:51)

  console.error
    [INFO] Validating query handle: qh_93ef5236d2cd596543466dbd255bbc6f (8 items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleValidateQueryHandle (src/services/handlers/query-handles/validate-query-handle.handler.ts:62:12)
      at Object.<anonymous> (src/test/validate-query-handle.test.ts:154:51)

PASS src/test/validate-query-handle.test.ts
  Validate Query Handle Handler
    Î“ÃªÃœ should validate an existing query handle (14 ms)
    Î“ÃªÃœ should return error for non-existent query handle (2 ms)
    Î“ÃªÃœ should return error for expired query handle (19 ms)
    Î“ÃªÃœ should include metadata when present (5 ms)
    Î“ÃªÃœ should include sample items when requested (4 ms)
    Î“ÃªÃœ should limit sample items to 5 (23 ms)

PASS src/test/work-item-repository.test.ts
  WorkItemRepository
    getById
      Î“ÃªÃœ should fetch a work item by ID without fields (4 ms)
      Î“ÃªÃœ should fetch a work item by ID with specific fields (2 ms)
    getBatch
      Î“ÃªÃœ should fetch multiple work items by IDs (1 ms)
      Î“ÃªÃœ should handle empty batch response
    create
      Î“ÃªÃœ should create a work item with provided fields (5 ms)
      Î“ÃªÃœ should URL-encode work item type with spaces (1 ms)
    update
      Î“ÃªÃœ should update a work item with provided fields (1 ms)
    delete
      Î“ÃªÃœ should soft delete a work item
      Î“ÃªÃœ should hard delete a work item
    linkToParent
      Î“ÃªÃœ should create parent link relation (1 ms)
    linkToBranch
      Î“ÃªÃœ should create branch artifact link (1 ms)
    getRevisions
      Î“ÃªÃœ should fetch work item revisions (1 ms)
    executeWiql
      Î“ÃªÃœ should execute a WIQL query (1 ms)
    getRepository
      Î“ÃªÃœ should fetch repository by exact match (1 ms)
      Î“ÃªÃœ should search for repository by name if exact match fails (1 ms)
      Î“ÃªÃœ should throw error if repository not found (30 ms)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/list-query-handles-pagination.test.ts:139:50)

  console.error
    [INFO] Listing query handles (top: 25, skip: 25, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/list-query-handles-pagination.test.ts:164:50)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/list-query-handles-pagination.test.ts:187:50)

  console.error
    [INFO] Listing query handles (top: 20, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/list-query-handles-pagination.test.ts:209:50)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/list-query-handles-pagination.test.ts:229:50)

PASS src/test/list-query-handles-pagination.test.ts
  List Query Handles Pagination
    Service Level Pagination
      Î“ÃªÃœ should return paginated handles with default top=50 and skip=0 (9 ms)
      Î“ÃªÃœ should return second page with skip=50 (4 ms)
      Î“ÃªÃœ should handle partial last page (3 ms)
      Î“ÃªÃœ should handle skip beyond total (2 ms)
      Î“ÃªÃœ should respect custom top parameter (4 ms)
      Î“ÃªÃœ should handle empty result set (1 ms)
    Handler Level Pagination
      Î“ÃªÃœ should return paginated response with default parameters (17 ms)
      Î“ÃªÃœ should accept custom top and skip parameters (9 ms)
      Î“ÃªÃœ should include pagination in metadata (10 ms)
      Î“ÃªÃœ should add warning when more results available (9 ms)
      Î“ÃªÃœ should not add pagination warning when all results returned (5 ms)
    Schema Validation
      Î“ÃªÃœ should validate top parameter within range (1 ms)
      Î“ÃªÃœ should reject top parameter above max (1 ms)
      Î“ÃªÃœ should reject top parameter below min (4 ms)
      Î“ÃªÃœ should reject negative skip parameter (1 ms)
      Î“ÃªÃœ should apply default values when not provided (1 ms)

PASS src/test/bulk-enhance-descriptions-format.test.ts
  Bulk Enhance Descriptions - Response Format
    Schema Validation
      Î“ÃªÃœ should accept returnFormat parameter with valid values (3 ms)
      Î“ÃªÃœ should reject invalid returnFormat values
      Î“ÃªÃœ should allow returnFormat to be optional
      Î“ÃªÃœ should parse with all parameters including returnFormat (1 ms)
    Default Format Logic
      Î“ÃªÃœ should use summary format by default for dry-run (1 ms)
      Î“ÃªÃœ should use preview format by default for execute mode (1 ms)
    Format Combinations
      Î“ÃªÃœ should allow explicit summary format with dry-run (1 ms)
      Î“ÃªÃœ should allow full format with dry-run (1 ms)
      Î“ÃªÃœ should allow summary format with execute mode (1 ms)
      Î“ÃªÃœ should allow preview format with execute mode (1 ms)
    Response Structure Validation
      Î“ÃªÃœ summary format should omit results array
      Î“ÃªÃœ preview format should include previews without full text (11 ms)
      Î“ÃªÃœ full format should include complete details (2 ms)
    Token Reduction Expectations
      Î“ÃªÃœ summary format should provide significant token reduction
      Î“ÃªÃœ preview format should provide moderate token reduction

PASS src/test/history-stripping.test.ts
  History Stripping Parameters
    Schema Defaults
      Î“ÃªÃœ should default includeHistory to false (2 ms)
      Î“ÃªÃœ should default maxHistoryRevisions to 5 (1 ms)
      Î“ÃªÃœ should allow overriding includeHistory to true (1 ms)
      Î“ÃªÃœ should allow custom maxHistoryRevisions value (1 ms)
    Parameter Behavior
      Î“ÃªÃœ should accept maxHistoryRevisions parameter without error (1 ms)
      Î“ÃªÃœ should not accept historyCount parameter (old name)
    Context Window Optimization
      Î“ÃªÃœ should describe history as disabled by default to save context (1 ms)
      Î“ÃªÃœ should describe maxHistoryRevisions sorting behavior
    Integration with other parameters
      Î“ÃªÃœ should work correctly with all parameters (1 ms)
    Backward Compatibility Considerations
      Î“ÃªÃœ should handle explicit includeHistory: false (1 ms)
      Î“ÃªÃœ should handle explicit includeHistory: true with defaults (1 ms)

PASS src/test/error-categorization.test.ts
  Error Categorization System
    ErrorCategory enum
      Î“ÃªÃœ should define all required categories (2 ms)
    ErrorCode constants
      Î“ÃªÃœ should define validation error codes (1 ms)
      Î“ÃªÃœ should define authentication error codes
      Î“ÃªÃœ should define network error codes
      Î“ÃªÃœ should define not found error codes (1 ms)
      Î“ÃªÃœ should define rate limit error codes
      Î“ÃªÃœ should define permission error codes (1 ms)
    createErrorMetadata
      Î“ÃªÃœ should create basic error metadata (1 ms)
      Î“ÃªÃœ should include error code when provided (1 ms)
      Î“ÃªÃœ should include context when provided
      Î“ÃªÃœ should mark network errors as retryable (1 ms)
      Î“ÃªÃœ should mark rate limit errors as retryable
      Î“ÃªÃœ should mark validation errors as non-retryable (1 ms)
    categorizeError
      Î“ÃªÃœ should categorize authentication errors (1 ms)
      Î“ÃªÃœ should categorize not found errors
      Î“ÃªÃœ should categorize permission errors (1 ms)
      Î“ÃªÃœ should categorize network errors (6 ms)
      Î“ÃªÃœ should categorize rate limit errors (1 ms)
      Î“ÃªÃœ should categorize validation errors (1 ms)
      Î“ÃªÃœ should default to unknown for uncategorized errors
      Î“ÃªÃœ should handle Error objects
    buildErrorResponse with categorization
      Î“ÃªÃœ should include error category in metadata
      Î“ÃªÃœ should include error code in metadata when provided (1 ms)
      Î“ÃªÃœ should auto-categorize when category not provided (2 ms)
      Î“ÃªÃœ should maintain backwards compatibility with existing metadata (1 ms)
      Î“ÃªÃœ should preserve error message in errors array
    buildValidationErrorResponse with categorization
      Î“ÃªÃœ should categorize as validation error (1 ms)
      Î“ÃªÃœ should maintain validation error formatting (1 ms)
    buildAzureCliErrorResponse with categorization
      Î“ÃªÃœ should categorize CLI not available as business logic error
      Î“ÃªÃœ should categorize not logged in as authentication error (1 ms)
    Helper functions
      buildAuthenticationError
        Î“ÃªÃœ should create authentication error response (2 ms)
      buildNetworkError
        Î“ÃªÃœ should create network error response (1 ms)
      buildNotFoundError
        Î“ÃªÃœ should create not found error for work item (1 ms)
        Î“ÃªÃœ should create not found error for project (5 ms)
        Î“ÃªÃœ should create not found error for query handle (1 ms)
        Î“ÃªÃœ should use generic not found code for unknown resource types
      buildBusinessLogicError
        Î“ÃªÃœ should create business logic error response (1 ms)
      buildRateLimitError
        Î“ÃªÃœ should create rate limit error with default message (1 ms)
        Î“ÃªÃœ should create rate limit error with custom message (1 ms)
      buildPermissionError
        Î“ÃªÃœ should create permission error response (2 ms)
    Backwards compatibility
      Î“ÃªÃœ should work with existing code that does not provide category (1 ms)
      Î“ÃªÃœ should preserve existing metadata fields
    Integration with ToolExecutionResult
      Î“ÃªÃœ should create valid ToolExecutionResult structure (1 ms)
      Î“ÃªÃœ should maintain consistency across different error types (5 ms)

PASS test/unit/openapi-generation.test.ts
  OpenAPI Generation
    OpenAPI Specification
      Î“ÃªÃœ should have OpenAPI 3.0.0 format (1 ms)
      Î“ÃªÃœ should have info section with title and version (1 ms)
      Î“ÃªÃœ should have contact information (1 ms)
      Î“ÃªÃœ should have MIT license
      Î“ÃªÃœ should have servers defined (1 ms)
      Î“ÃªÃœ should have tags for categorization (2 ms)
      Î“ÃªÃœ should have paths for tools
      Î“ÃªÃœ should have properly formatted tool paths (12 ms)
      Î“ÃªÃœ should have POST operations for all tools (21 ms)
      Î“ÃªÃœ should have request body schemas (16 ms)
      Î“ÃªÃœ should have response schemas (15 ms)
      Î“ÃªÃœ should mark AI-powered tools correctly (1 ms)
    Individual Schemas
      Î“ÃªÃœ should have schema index (1 ms)
      Î“ÃªÃœ should have generation metadata
      Î“ÃªÃœ should have schema files for all tools (1 ms)
    Schema Consistency
      Î“ÃªÃœ should have matching number of paths and schemas (1 ms)
      Î“ÃªÃœ should have consistent tool names (3 ms)

PASS src/test/sprint-planner-optional-fields.test.ts
  Sprint Planner Optional Fields
    buildResultFromJSON
      Î“ÃªÃœ should omit confidenceLevel when set to "Unknown" (2 ms)
      Î“ÃªÃœ should include confidenceLevel when set to valid value (1 ms)
      Î“ÃªÃœ should omit balanceMetrics when all scores are 0 (1 ms)
      Î“ÃªÃœ should omit balanceMetrics when all assessments are "Not available"
      Î“ÃªÃœ should include balanceMetrics when at least one score is non-zero (1 ms)
      Î“ÃªÃœ should omit alternativePlans when array is empty (1 ms)
      Î“ÃªÃœ should include alternativePlans when valid plans exist (2 ms)
      Î“ÃªÃœ should omit alternativePlans when plans are invalid
      Î“ÃªÃœ should omit sprintRisks when all arrays are empty
      Î“ÃªÃœ should include sprintRisks when at least one array has content (2 ms)
      Î“ÃªÃœ should omit dependencies when array is empty
      Î“ÃªÃœ should include dependencies when they exist (1 ms)
    buildResultFromText (fallback)
      Î“ÃªÃœ should omit confidenceLevel in fallback response (1 ms)
      Î“ÃªÃœ should omit balanceMetrics in fallback response
      Î“ÃªÃœ should omit alternativePlans in fallback response (2 ms)
      Î“ÃªÃœ should include sprintRisks in fallback response (parse error is critical) (1 ms)
      Î“ÃªÃœ should omit dependencies in fallback response (1 ms)
    Token savings estimation
      Î“ÃªÃœ should demonstrate token savings by omitting empty fields (1 ms)

PASS src/test/item-context-enrichment.test.ts
  Item Context Enrichment
    Rich itemContext storage
      Î“ÃªÃœ should store complete itemContext with all required fields (4 ms)
      Î“ÃªÃœ should handle lastChange fallback when substantive change unavailable (1 ms)
      Î“ÃªÃœ should parse tags from semicolon-separated string
      Î“ÃªÃœ should handle empty or missing tags (1 ms)
      Î“ÃªÃœ should maintain zero-based indices correctly (10 ms)
    Selection metadata generation
      Î“ÃªÃœ should generate selectionMetadata with correct structure (1 ms)
      Î“ÃªÃœ should deduplicate tags in criteriaTags (1 ms)
      Î“ÃªÃœ should handle items with no tags in metadata (1 ms)
    Default values for missing data
      Î“ÃªÃœ should use default values when context is missing
      Î“ÃªÃœ should use partial context when only some fields provided

PASS src/test/resource-service.test.ts
  Resource Service
    listResources
      Î“ÃªÃœ should return all available resources (13 ms)
      Î“ÃªÃœ should include WIQL quick reference (1 ms)
      Î“ÃªÃœ should include OData quick reference
      Î“ÃªÃœ should include hierarchy patterns (2 ms)
      Î“ÃªÃœ should include common workflows
      Î“ÃªÃœ should include tool selection guide (1 ms)
    resourceExists
      Î“ÃªÃœ should return true for existing resources
      Î“ÃªÃœ should return false for non-existing resources
    getResourceContent
      Î“ÃªÃœ should throw error for non-existent resource (23 ms)
      Î“ÃªÃœ should return content for WIQL quick reference (3 ms)
      Î“ÃªÃœ should return content for OData quick reference (2 ms)
      Î“ÃªÃœ should return content for hierarchy patterns (2 ms)
      Î“ÃªÃœ should return content for common workflows (2 ms)
      Î“ÃªÃœ should return content for tool selection guide (3 ms)
      Î“ÃªÃœ WIQL reference should contain essential query patterns (4 ms)
      Î“ÃªÃœ OData reference should contain query types (2 ms)
      Î“ÃªÃœ tool selection guide should list all major tools (2 ms)

PASS src/test/query-handle-service.test.ts
  Query Handle Service
    storeQuery
      Î“ÃªÃœ should generate unique handles (3 ms)
      Î“ÃªÃœ should store work item IDs (1 ms)
      Î“ÃªÃœ should store metadata (1 ms)
    getWorkItemIds
      Î“ÃªÃœ should retrieve stored work item IDs (1 ms)
      Î“ÃªÃœ should return null for non-existent handle
      Î“ÃªÃœ should return null for expired handle (28 ms)
    getQueryData
      Î“ÃªÃœ should return full query data (2 ms)
    deleteHandle
      Î“ÃªÃœ should delete handle (5 ms)
      Î“ÃªÃœ should return false for non-existent handle
    getStats
      Î“ÃªÃœ should return accurate statistics (26 ms)
    cleanup
      Î“ÃªÃœ should remove expired handles (28 ms)
    TTL behavior
      Î“ÃªÃœ should use default TTL (1 hour) (1 ms)
      Î“ÃªÃœ should use custom TTL
    clearAll
      Î“ÃªÃœ should remove all handles (1 ms)
    itemSelector functionality
      getItemsByIndices
        Î“ÃªÃœ should return work items by indices (2 ms)
        Î“ÃªÃœ should filter invalid indices (1 ms)
        Î“ÃªÃœ should return empty array for all invalid indices
        Î“ÃªÃœ should return null for invalid handle
      getItemsByCriteria
        Î“ÃªÃœ should filter by states (1 ms)
        Î“ÃªÃœ should filter by daysInactive range (1 ms)
        Î“ÃªÃœ should filter by title contains
        Î“ÃªÃœ should filter by tags (1 ms)
        Î“ÃªÃœ should combine multiple criteria (1 ms)
        Î“ÃªÃœ should return empty array when no items match
        Î“ÃªÃœ should return null for invalid handle (1 ms)
      getSelectableIndices
        Î“ÃªÃœ should return selectable indices (1 ms)
        Î“ÃªÃœ should return null for invalid handle (1 ms)
      getItemContext
        Î“ÃªÃœ should return item context by index (1 ms)
        Î“ÃªÃœ should return item context for different indices
        Î“ÃªÃœ should return null for out-of-bounds index
        Î“ÃªÃœ should return null for negative index
        Î“ÃªÃœ should return null for invalid handle
      resolveItemSelector
        Î“ÃªÃœ should resolve "all" selector
        Î“ÃªÃœ should resolve index array selector (1 ms)
        Î“ÃªÃœ should resolve criteria selector (1 ms)
        Î“ÃªÃœ should return null for invalid handle
      itemContext creation
        Î“ÃªÃœ should create itemContext array from workItemContext (1 ms)
        Î“ÃªÃœ should create selectionMetadata (1 ms)

PASS src/test/resources-integration.test.ts
  Resources Integration
    Î“ÃªÃœ should have resources capability enabled (1 ms)
    Î“ÃªÃœ should expose resource list handler (7 ms)
    Î“ÃªÃœ should expose resource read handler
    Î“ÃªÃœ should have all resource files in place (4 ms)

PASS src/test/query-generator-usage.test.ts
  Query Generator Usage Tracking
    Response Structure
      Î“ÃªÃœ should not have usage field in data object (2 ms)
      Î“ÃªÃœ should accumulate usage across multiple iterations (8 ms)
      Î“ÃªÃœ should handle missing usage gracefully (1 ms)
      Î“ÃªÃœ should maintain proper response structure for WIQL generator (1 ms)
      Î“ÃªÃœ should maintain proper response structure for OData generator (2 ms)
    Token Savings
      Î“ÃªÃœ should save approximately 50-100 tokens by not duplicating usage in data

PASS src/test/validate-hierarchy-fast.test.ts
  Hierarchy Validation Rules
    Parent-Child Type Relationships
      Î“ÃªÃœ should define valid child types for Key Result (1 ms)
      Î“ÃªÃœ should define valid child types for Epic (1 ms)
      Î“ÃªÃœ should define valid child types for Feature
      Î“ÃªÃœ should define valid child types for PBI
      Î“ÃªÃœ should define no children for leaf nodes
    State Progression Levels
      Î“ÃªÃœ should define Initial states as level 1 (1 ms)
      Î“ÃªÃœ should define Active states as level 2 (1 ms)
      Î“ÃªÃœ should define Done states as level 4
    Orphaned Item Detection
      Î“ÃªÃœ should require parent for Feature
      Î“ÃªÃœ should require parent for Product Backlog Item (1 ms)
      Î“ÃªÃœ should not require parent for Key Result
      Î“ÃªÃœ should not require parent for Epic (1 ms)

FAIL test/unit/unified-query-generator.test.ts
  Î“Ã¹Ã… Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     Î“Ã‡Ã³ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     Î“Ã‡Ã³ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     Î“Ã‡Ã³ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     Î“Ã‡Ã³ If you need a custom transformation specify a "transform" option in your config.
     Î“Ã‡Ã³ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\utils\module-dir.mjs:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { dirname } from 'path';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

       5 | // The .mjs extension ensures it's always treated as ES module with import.meta support
       6 | // @ts-ignore - .mjs file exists but TypeScript can't validate it
    >  7 | import { moduleDir } from './module-dir.mjs';
         | ^
       8 |
       9 | let thisFileDir: string;
      10 |

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (src/utils/paths.ts:7:1)
      at Object.<anonymous> (src/utils/prompt-loader.ts:3:1)
      at Object.<anonymous> (src/utils/sampling-client.ts:6:1)
      at Object.<anonymous> (src/services/handlers/query/unified-query-generator.ts:11:1)
      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:9:1)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
Summary of all failing tests
FAIL test/unit/unified-query-generator.test.ts
  Î“Ã¹Ã… Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     Î“Ã‡Ã³ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     Î“Ã‡Ã³ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     Î“Ã‡Ã³ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     Î“Ã‡Ã³ If you need a custom transformation specify a "transform" option in your config.
     Î“Ã‡Ã³ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\utils\module-dir.mjs:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { dirname } from 'path';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

       5 | // The .mjs extension ensures it's always treated as ES module with import.meta support
       6 | // @ts-ignore - .mjs file exists but TypeScript can't validate it
    >  7 | import { moduleDir } from './module-dir.mjs';
         | ^
       8 |
       9 | let thisFileDir: string;
      10 |

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (src/utils/paths.ts:7:1)
      at Object.<anonymous> (src/utils/prompt-loader.ts:3:1)
      at Object.<anonymous> (src/utils/sampling-client.ts:6:1)
      at Object.<anonymous> (src/services/handlers/query/unified-query-generator.ts:11:1)
      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:9:1)


Test Suites: 1 failed, 41 passed, 42 total
Tests:       601 passed, 601 total
Snapshots:   0 total
Time:        11.257 s, estimated 14 s
Ran all test suites.
