
> enhanced-ado-mcp-server@1.5.0 test
> jest

FAIL src/test/select-items-from-query-handle.test.ts
  Select Items From Query Handle Handler
    with "all" selector
      ΓêÜ should select all items in query handle (18 ms)
      ΓêÜ should return message for all items selected (1 ms)
    with index array selector
      ΓêÜ should select items by specific indices (3 ms)
      ΓêÜ should handle partial index matches (1 ms)
    with criteria selector
      ΓêÜ should select items by state criteria (3 ms)
      ΓêÜ should select items by tags criteria (1 ms)
      ΓêÜ should select items by daysInactive criteria (2 ms)
      ΓêÜ should combine multiple criteria with AND logic (3 ms)
    empty selection results
      ΓêÜ should warn when no items match criteria (2 ms)
    error handling
      ΓêÜ should return error for invalid query handle (2 ms)
      ΓêÜ should return error for expired query handle (1 ms)
      ΓêÜ should validate schema and return error for invalid arguments (1 ms)
    preview functionality
      ΓêÜ should limit preview to specified count (6 ms)
      ΓêÜ should default preview to 10 items (1 ms)
      ├ù should cap preview at 50 items (4 ms)
      ΓêÜ should include item details in preview (2 ms)
    metadata
      ├ù should include relevant metadata in response (1 ms)

  ΓùÅ Select Items From Query Handle Handler ΓÇ║ preview functionality ΓÇ║ should cap preview at 50 items

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      356 |       });
      357 |
    > 358 |       expect(result.success).toBe(true);
          |                              ^
      359 |       expect((result.data as any).preview_items).toHaveLength(50);
      360 |     });
      361 |

      at Object.<anonymous> (src/test/select-items-from-query-handle.test.ts:358:30)

  ΓùÅ Select Items From Query Handle Handler ΓÇ║ metadata ΓÇ║ should include relevant metadata in response

    expect(received).toBe(expected) // Object.is equality

    Expected: "qh_fc9b0ab7cd345f4dcdd6485e1b89540e"
    Received: undefined

      412 |       expect(result.success).toBe(true);
      413 |       expect((result.metadata as any).source).toBe('select-items-from-query-handle');
    > 414 |       expect((result.metadata as any).queryHandle).toBe(handle);
          |                                                    ^
      415 |       expect((result.metadata as any).selectedCount).toBe(2);
      416 |       expect((result.metadata as any).totalItems).toBe(3);
      417 |       expect((result.metadata as any).selectionType).toBe('index-based');

      at Object.<anonymous> (src/test/select-items-from-query-handle.test.ts:414:52)

  console.error
    [INFO] Bulk move to iteration operation: 4 of 4 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:167:58)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 2 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:86:53)

  console.error
    [INFO] Bulk move to iteration operation: 4 of 4 work items to 'TestProject\Sprint 11' (dry_run: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:179:57)

  console.error
    [INFO] Move details: {
      "targetIteration": "TestProject\\Sprint 11",
      "totalInHandle": 4,
      "selectedForMove": 4,
      "selectionCriteria": "All items",
      "movedItems": [
        {
          "id": 101,
          "title": "Feature 1",
          "type": "Feature",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        },
        {
          "id": 102,
          "title": "Bug 1",
          "type": "Bug",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        },
        {
          "id": 103,
          "title": "Task 1",
          "type": "Task",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        },
        {
          "id": 104,
          "title": "Task 2",
          "type": "Task",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        }
      ],
      "childrenUpdated": 0
    }

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:233:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:179:26)

  console.error
    [INFO] Bulk move to iteration operation: 1 of 1 work items to 'TestProject\InvalidSprint' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:115:53)

  console.error
    [INFO] Fetching context packages for 3 work items from query handle qh_bd287d45fd4ec59a1807e1de2db32c32

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:84:65)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 5 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:147:53)

  console.error
    [INFO] Selection criteria: [1,3]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:62:14)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:147:53)

  console.error
    [INFO] Bulk link operation: 2 source(s) ├ù 1 target(s) using many-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:256:61)

  console.error
    [INFO] Bulk link operation: 2 source(s) ├ù 1 target(s) using many-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:270:61)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 4 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:176:53)

  console.error
    [INFO] Selection criteria: {"states":["Active"],"tags":["frontend"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:62:14)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:176:53)

  console.error
    [INFO] Bulk state transition: 2 of 5 items to 'Done' (dry_run: false, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:314:63)

  console.error
    [INFO] Selection criteria: {"tags":["frontend"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:152:14)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:314:63)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:84:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:84:22)

  console.error
    [INFO] Bulk move to iteration operation: 3 of 3 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:204:53)

  console.error
    [ERROR] Error fetching context package for work item 102: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:84:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:84:22)

  console.error
    [INFO] Fetching context packages for 5 work items from query handle qh_e81f26da7abbe835c1e37c7be833b438

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:334:72)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 2 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:232:53)

  console.error
    [ERROR] Error fetching context package for work item 103: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:84:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 2)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:84:22)

  console.error
    [INFO] Bulk move to iteration operation: 15 of 15 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:263:53)

  console.error
    [INFO] Bulk update operation: 3 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:79:57)

  console.error
    [ERROR] Error fetching context package for work item 401: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:107:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:334:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:334:29)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 2 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:291:53)

  console.error
    [INFO] Selected 3 of 3 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:79:57)

  console.error
    [INFO] Fetching context packages for 3 work items from query handle qh_770bb105ffb78479c2a6b5b8697c737c

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:112:65)

  console.error
    [ERROR] Error fetching context package for work item 402: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:107:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:334:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:334:29)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 2 work items to 'TestProject\Sprint 11' (dry_run: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:329:53)

  console.error
    [INFO] Move details: {
      "targetIteration": "TestProject\\Sprint 11",
      "totalInHandle": 2,
      "selectedForMove": 2,
      "selectionCriteria": "All items",
      "movedItems": [
        {
          "id": 101,
          "title": "Task 1",
          "type": "Task",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        },
        {
          "id": 102,
          "title": "Task 2",
          "type": "Task",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        }
      ],
      "childrenUpdated": 0
    }

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:233:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:329:22)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:112:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:112:22)

  console.error
    [INFO] Bulk update operation: 2 of 4 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:111:57)

  console.error
    [ERROR] Error fetching context package for work item 403: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:107:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:334:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 2)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:334:29)

  console.error
    [ERROR] Error fetching context package for work item 103: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:112:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:112:22)

  console.error
    [ERROR] Error fetching context package for work item 404: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:107:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:334:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 3)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:334:29)

  console.error
    [ERROR] Error fetching context package for work item 105: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:112:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 2)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:112:22)

  console.error
    [ERROR] Error fetching context package for work item 405: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:107:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:334:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 4)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:334:29)

  console.error
    [INFO] Selected 2 of 4 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:111:57)

  console.error
    [INFO] Bulk move to iteration operation: 1 of 1 work items to 'TestProject\Sprint 11' (dry_run: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:365:38)

FAIL test/unit/unified-query-generator.test.ts
  Unified Query Generator Handler
    AI-powered format selection
      ├ù should choose WIQL format for state-based queries (38 ms)
      ├ù should choose OData format for aggregation queries (2 ms)
      ├ù should include confidence and reasoning in response (2 ms)
    Parameter forwarding
      ├ù should forward all query parameters to delegated handler (1 ms)
    Error handling
      ΓêÜ should return error when Azure CLI not available (2 ms)
      ├ù should return error when sampling not available (3 ms)
      ΓêÜ should handle invalid schema input (1 ms)
      ├ù should handle malformed AI response gracefully (1 ms)
      ΓêÜ should handle AI response without required fields (1 ms)
    AI response parsing
      ├ù should handle different AI response structures (2 ms)
      ├ù should normalize confidence scores (1 ms)
    Default parameters
      ├ù should use default values for optional parameters
    Delegation behavior
      ├ù should propagate successful results from WIQL handler (2 ms)
      ├ù should propagate errors from delegated handlers (2 ms)

  ΓùÅ Unified Query Generator Handler ΓÇ║ AI-powered format selection ΓÇ║ should choose WIQL format for state-based queries

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      105 |       );
      106 |
    > 107 |       expect(result.success).toBe(true);
          |                              ^
      108 |       expect(handleGenerateWiqlQuery).toHaveBeenCalled();
      109 |       expect(result.data).toHaveProperty('format', 'wiql');
      110 |     });

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:107:30)

  ΓùÅ Unified Query Generator Handler ΓÇ║ AI-powered format selection ΓÇ║ should choose OData format for aggregation queries

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      134 |       );
      135 |
    > 136 |       expect(result.success).toBe(true);
          |                              ^
      137 |       expect(handleGenerateODataQuery).toHaveBeenCalled();
      138 |       expect(result.data).toHaveProperty('format', 'odata');
      139 |     });

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:136:30)

  ΓùÅ Unified Query Generator Handler ΓÇ║ AI-powered format selection ΓÇ║ should include confidence and reasoning in response

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      150 |       );
      151 |
    > 152 |       expect(result.success).toBe(true);
          |                              ^
      153 |       expect(result.metadata).toHaveProperty('formatDecision');
      154 |       const formatDecision = result.metadata?.formatDecision as any;
      155 |       expect(formatDecision).toMatchObject({

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:152:30)

  ΓùÅ Unified Query Generator Handler ΓÇ║ Parameter forwarding ΓÇ║ should forward all query parameters to delegated handler

    TypeError: Cannot read properties of undefined (reading '1')

      183 |       );
      184 |
    > 185 |       const callArgs = handleGenerateWiqlQuery.mock.calls[0][1];
          |                                                             ^
      186 |       expect(callArgs).toMatchObject({
      187 |         description: 'Find bugs',
      188 |         organization: 'custom-org',

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:185:61)

  ΓùÅ Unified Query Generator Handler ΓÇ║ Error handling ΓÇ║ should return error when sampling not available

    expect(received).toEqual(expected) // deep equality

    Expected: ArrayContaining [StringContaining "sampling"]
    Received: ["Validation error:
      ΓÇó intent: Required (received: \"undefined\")┬╖
    ≡ƒÆí Tip: Check parameter types and constraints. See tool description for valid values."]

      238 |
      239 |       expect(result.success).toBe(false);
    > 240 |       expect(result.errors).toEqual(
          |                             ^
      241 |         expect.arrayContaining([expect.stringContaining('sampling')])
      242 |       );
      243 |     });

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:240:29)

  ΓùÅ Unified Query Generator Handler ΓÇ║ Error handling ΓÇ║ should handle malformed AI response gracefully

    expect(received).toEqual(expected) // deep equality

    Expected: ArrayContaining [StringContaining "parse"]
    Received: ["Validation error:
      ΓÇó intent: Required (received: \"undefined\")┬╖
    ≡ƒÆí Tip: Check parameter types and constraints. See tool description for valid values."]

      277 |
      278 |       expect(result.success).toBe(false);
    > 279 |       expect(result.errors).toEqual(
          |                             ^
      280 |         expect.arrayContaining([expect.stringContaining('parse')])
      281 |       );
      282 |     });

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:279:29)

  ΓùÅ Unified Query Generator Handler ΓÇ║ AI response parsing ΓÇ║ should handle different AI response structures

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      332 |       );
      333 |
    > 334 |       expect(result.success).toBe(true);
          |                              ^
      335 |       const formatDecision = result.metadata?.formatDecision as any;
      336 |       expect(formatDecision?.reasoning).toHaveLength(3);
      337 |     });

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:334:30)

  ΓùÅ Unified Query Generator Handler ΓÇ║ AI response parsing ΓÇ║ should normalize confidence scores

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      359 |       );
      360 |
    > 361 |       expect(result.success).toBe(true);
          |                              ^
      362 |       // Confidence should be between 0 and 1
      363 |       const formatDecision = result.metadata?.formatDecision as any;
      364 |       if (formatDecision?.confidence) {

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:361:30)

  ΓùÅ Unified Query Generator Handler ΓÇ║ Default parameters ΓÇ║ should use default values for optional parameters

    TypeError: Cannot read properties of undefined (reading '1')

      383 |       );
      384 |
    > 385 |       const callArgs = handleGenerateWiqlQuery.mock.calls[0][1];
          |                                                             ^
      386 |       expect(callArgs.maxIterations).toBe(3);
      387 |       expect(callArgs.includeExamples).toBe(true);
      388 |       expect(callArgs.testQuery).toBe(true);

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:385:61)

  ΓùÅ Unified Query Generator Handler ΓÇ║ Delegation behavior ΓÇ║ should propagate successful results from WIQL handler

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      418 |       );
      419 |
    > 420 |       expect(result.success).toBe(true);
          |                              ^
      421 |       expect(result.data).toMatchObject(expectedResult.data);
      422 |       expect(result.warnings).toContain('Test warning');
      423 |     });

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:420:30)

  ΓùÅ Unified Query Generator Handler ΓÇ║ Delegation behavior ΓÇ║ should propagate errors from delegated handlers

    expect(received).toContain(expected) // indexOf

    Expected value: "Query generation failed"
    Received array: ["Validation error:
      ΓÇó intent: Required (received: \"undefined\")┬╖
    ≡ƒÆí Tip: Check parameter types and constraints. See tool description for valid values."]

      444 |
      445 |       expect(result.success).toBe(false);
    > 446 |       expect(result.errors).toContain('Query generation failed');
          |                             ^
      447 |     });
      448 |   });
      449 | });

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:446:29)

  console.error
    [INFO] Selection criteria: [0,2]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:111:57)

  console.error
    [INFO] Fetching context packages for 2 work items from query handle qh_f22c78ec85cedc85f577c3a622d8ccf6

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:139:65)

  console.error
    [INFO] Bulk link operation: 2 source(s) ├ù 3 target(s) using many-to-many strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:390:60)

  console.error
    [INFO] Move details: {
      "targetIteration": "TestProject\\Sprint 11",
      "totalInHandle": 1,
      "selectedForMove": 1,
      "selectionCriteria": "All items",
      "movedItems": [
        {
          "id": 101,
          "title": "Task 1",
          "type": "Task",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        }
      ],
      "childrenUpdated": 0
    }

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:233:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:365:7)

  console.error
    [INFO] Bulk update operation: 2 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:143:57)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:139:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:139:22)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 2 work items to 'TestProject\Sprint 11' (dry_run: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:409:53)

  console.error
    [INFO] Bulk state transition: 1 of 6 items to 'Resolved' (dry_run: false, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:433:61)

  console.error
    [INFO] Selected 2 of 3 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:143:57)

  console.error
    [INFO] Selection criteria: {"tags":["critical"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:152:14)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:433:61)

  console.error
    [ERROR] Error fetching context package for work item 104: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:139:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:139:22)

  console.error
    [INFO] Selection criteria: {"states":["Active"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:143:57)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 6 work items to 'TestProject\Technical Debt' (dry_run: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:453:58)

  console.error
    [INFO] Selection criteria: {"daysInactiveMin":30}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:62:14)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:453:58)

  console.error
    [INFO] Move details: {
      "targetIteration": "TestProject\\Technical Debt",
      "totalInHandle": 6,
      "selectedForMove": 2,
      "selectionCriteria": "{\"daysInactiveMin\":30}",
      "movedItems": [
        {
          "id": 703,
          "title": "Old Task",
          "type": "Task",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Technical Debt"
        },
        {
          "id": 705,
          "title": "Stale Bug",
          "type": "Bug",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Technical Debt"
        }
      ],
      "childrenUpdated": 0
    }

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:233:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:453:27)

  console.error
    [INFO] Bulk update operation: 3 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:177:57)

  console.error
    [ERROR] Failed to move work item 102: Error: API Error
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\bulk-move-iteration.test.ts:388:32)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:201:16)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:409:22)

  console.error
    [INFO] Fetching context packages for 3 work items from query handle qh_5f85108ffd7fe5477ef68c33e507a011

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:473:72)

  console.error
    [INFO] Move details: {
      "targetIteration": "TestProject\\Sprint 11",
      "totalInHandle": 2,
      "selectedForMove": 2,
      "selectionCriteria": "All items",
      "movedItems": [
        {
          "id": 101,
          "title": "Task 1",
          "type": "Task",
          "previousIteration": "Not set",
          "newIteration": "TestProject\\Sprint 11"
        }
      ],
      "childrenUpdated": 0
    }

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:233:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:409:22)

  console.error
    [INFO] Selected 3 of 3 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:177:57)

  console.error
    [ERROR] Error fetching context package for work item 701: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:107:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:473:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:473:29)

  console.error
    [INFO] Fetching context packages for 10 work items from query handle qh_67b5b5b8eec67ff373123fabd6ed401e

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:168:65)

  console.error
    [WARN] 1 of 2 moves failed

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.warn (src/utils/logger.ts:29:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:251:14)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:409:22)

  console.error
    [ERROR] Error fetching context package for work item 702: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:107:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:473:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:473:29)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:168:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:168:22)

  console.error
    [INFO] Bulk move to iteration operation: 1 of 1 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:440:53)

  console.error
    [ERROR] Error fetching context package for work item 706: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:107:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:473:72)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 2)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:473:29)

  console.error
    [INFO] Bulk update operation: 2 of 2 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:209:57)

  console.error
    [ERROR] Error fetching context package for work item 102: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:168:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:168:22)

  console.error
    [INFO] Bulk move to iteration operation: 1 of 1 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:466:53)

  console.error
    [INFO] Bulk state transition: 3 of 3 items to 'Done' (dry_run: false, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:524:53)

  console.error
    [INFO] Selected 2 of 2 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:209:57)

  console.error
    [ERROR] Error fetching context package for work item 103: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:168:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 2)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:168:22)

  console.error
    [ERROR] Error fetching context package for work item 104: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:168:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 3)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:168:22)

  console.error
    [INFO] Bulk update operation: 2 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:240:57)

  console.error
    [ERROR] Error fetching context package for work item 105: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:168:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 4)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:168:22)

  console.error
    [INFO] Selected 2 of 5 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:240:57)

  console.error
    [INFO] Bulk move to iteration operation: 0 of 2 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:540:53)

  console.error
    [ERROR] Error fetching context package for work item 106: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:168:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 5)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:168:22)

  console.error
    [INFO] Selection criteria: [1,3]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:240:57)

  console.error
    [INFO] Selection criteria: {"states":["Done"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:62:14)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:540:53)

  console.error
    [ERROR] Failed to transition work item 802: Error: API rate limit exceeded
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\integration\bulk-operations-integration.test.ts:492:32)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:379:16)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:524:22)

  console.error
    [ERROR] Error fetching context package for work item 107: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:168:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 6)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:168:22)

  console.error
    [ERROR] Error fetching context package for work item 108: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:168:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 7)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:168:22)

  console.error
    [ERROR] Error fetching context package for work item 109: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:168:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 8)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:168:22)

  console.error
    [INFO] Bulk update operation: 8 of 8 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:317:57)

  console.error
    [ERROR] Error fetching context package for work item 110: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:168:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 9)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:168:22)

  console.error
    [INFO] Selected 8 of 8 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:317:57)

  console.error
    [INFO] Fetching context packages for 10 work items from query handle qh_c9e77f407b712e8110e2262c02301eb7

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:200:65)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:200:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:200:22)

  console.error
    [ERROR] Error fetching context package for work item 102: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:200:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:200:22)

  console.error
    [INFO] Bulk move to iteration operation: 2 of 2 work items to 'TestProject\Sprint 11' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkMoveToIteration (src/services/handlers/bulk-operations/bulk-move-iteration-handler.ts:60:12)
      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:596:53)

  console.error
    [ERROR] Error fetching context package for work item 103: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:200:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 2)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:200:22)

  console.error
    [ERROR] Error fetching context package for work item 104: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:200:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 3)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:200:22)

FAIL test/integration/bulk-operations-integration.test.ts (5.034 s)
  Bulk Operations Integration Tests
    Scenario 1: Sprint Planning - Move and Transition
      ├ù should move items to new sprint then transition to active (203 ms)
    Scenario 2: Feature Decomposition - Create Hierarchy
      ΓêÜ should link tasks to features using query handles (21 ms)
    Scenario 3: Sprint Cleanup - Bulk Transition and Context
      ΓêÜ should transition completed items and retrieve context (57 ms)
    Scenario 4: Dependency Chain - Link Related Items
      ΓêÜ should create dependency links between tasks (6 ms)
    Scenario 5: Selective Operations with Criteria
      ΓêÜ should perform selective operations based on multiple criteria (30 ms)
    Scenario 6: Error Recovery and Partial Success
      ΓêÜ should handle partial failures gracefully (22 ms)

  ΓùÅ Bulk Operations Integration Tests ΓÇ║ Scenario 1: Sprint Planning - Move and Transition ΓÇ║ should move items to new sprint then transition to active

    expect(received).toBeGreaterThan(expected)

    Matcher error: received value must be a number or bigint

    Received has value: undefined

      186 |
      187 |       expect(moveResult.success).toBe(true);
    > 188 |       expect((moveResult.data as any).successful).toBeGreaterThan(0);
          |                                                   ^
      189 |
      190 |       // 4. Transition items to Active
      191 |       const transitionConfig = {

      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:188:51)

  console.error
    [INFO] Bulk update operation: 3 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:346:57)

  console.error
    [ERROR] Error fetching context package for work item 105: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:200:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 4)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:200:22)

  console.error
    [INFO] Selected 3 of 3 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:346:57)

  console.error
    [ERROR] Error fetching context package for work item 106: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:200:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 5)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:200:22)

  console.error
    [ERROR] Error fetching context package for work item 107: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:200:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 6)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:200:22)

  console.error
    [ERROR] Error fetching context package for work item 108: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:200:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 7)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:200:22)

  console.error
    [ERROR] Error fetching context package for work item 109: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:200:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 8)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:200:22)

  console.error
    [ERROR] Error fetching context package for work item 110: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:200:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 9)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:200:22)

  console.error
    [INFO] Bulk assign operation: 20 of 20 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:79:57)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_8405c35f96d04c295b0b8da338acec09

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:229:50)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:229:50)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:229:7)

  console.error
    [INFO] Bulk state transition: 3 of 3 items to 'Resolved' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:104:53)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_1f04abac3b6e299e8d2b670a66f72efd

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:257:50)

  console.error
    [INFO] Selected 15 of 15 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:117:57)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:257:50)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:257:7)

  console.error
    [INFO] Bulk remove operation: 15 of 15 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:117:57)

FAIL src/test/bulk-update-by-query-handle.test.ts (5.064 s)
  Bulk Update By Query Handle Handler
    Item Selection with Enhanced Logging
      ΓêÜ should log selection information for "all" selector (200 ms)
      ΓêÜ should log selection criteria for index-based selector (21 ms)
      ΓêÜ should log selection criteria for criteria-based selector (13 ms)
    Item Validation
      ΓêÜ should validate selected items have context (14 ms)
    Enhanced Summary Messages
      ΓêÜ should show field count in dry run summary for "all" selector (10 ms)
      ΓêÜ should show selected vs total in dry run summary for filtered selector (13 ms)
    Error Handling
      ΓêÜ should return error for non-existent query handle (2 ms)
      ΓêÜ should validate schema for updates parameter (2 ms)
    Preview Items
      ├ù should show preview of first 5 selected items (17 ms)
    Backward Compatibility
      ΓêÜ should work when itemSelector is not provided (defaults to "all") (9 ms)
      ΓêÜ should maintain existing error handling (1 ms)

  ΓùÅ Bulk Update By Query Handle Handler ΓÇ║ Preview Items ΓÇ║ should show preview of first 5 selected items

    expect(received).toHaveLength(expected)

    Expected length: 5
    Received length: 8
    Received array:  [{"index": 0, "state": "New", "title": "Item 1", "type": "Task", "work_item_id": 1}, {"index": 1, "state": "Active", "title": "Item 2", "type": "Task", "work_item_id": 2}, {"index": 2, "state": "New", "title": "Item 3", "type": "Task", "work_item_id": 3}, {"index": 3, "state": "Active", "title": "Item 4", "type": "Task", "work_item_id": 4}, {"index": 4, "state": "New", "title": "Item 5", "type": "Task", "work_item_id": 5}, {"index": 5, "state": "Active", "title": "Item 6", "type": "Task", "work_item_id": 6}, {"index": 6, "state": "New", "title": "Item 7", "type": "Task", "work_item_id": 7}, {"index": 7, "state": "Active", "title": "Item 8", "type": "Task", "work_item_id": 8}]

      318 |
      319 |       expect(result.success).toBe(true);
    > 320 |       expect((result.data as any)?.preview_items).toHaveLength(5); // Only first 5
          |                                                   ^
      321 |       expect((result.data as any)?.selected_items_count).toBe(8); // But all 8 selected
      322 |       expect((result.data as any)?.preview_items[0]).toHaveProperty('work_item_id');
      323 |       expect((result.data as any)?.preview_items[0]).toHaveProperty('title');

      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:320:51)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_edbac33b96f09ef555e815e49249e12d

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:283:50)

  console.error
    [INFO] Bulk update operation: 12 of 12 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:155:57)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:283:50)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:283:7)

  console.error
    [INFO] Selected 12 of 12 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:155:57)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_476db8802d0b120ee71529159ce9ab7a

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:309:50)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:309:50)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:309:7)

  console.error
    [INFO] Bulk comment operation: 10 of 10 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:193:58)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_f6ae962648643e28ec59b863e028accf

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:337:50)

  console.error
    [INFO] Bulk assign operation: 20 of 20 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:233:57)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:337:50)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:337:7)

  console.error
    [INFO] Bulk state transition: 1 of 1 items to 'Active' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:131:53)

  console.error
    [INFO] Bulk assign operation: 20 of 20 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:272:57)

  console.error
    [INFO] Bulk state transition: 3 of 3 items to 'Done' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:160:53)

  console.error
    [INFO] Fetching context packages for 3 work items from query handle qh_87f38b44295e97336d873a67e125ed19

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:436:65)

FAIL test/unit/bulk-move-iteration.test.ts (5.141 s)
  console.error
    [INFO] Bulk assign operation: 100 of 100 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:311:57)

  Bulk Move to Iteration Handler
    Iteration path validation
      ΓêÜ should validate iteration path exists (202 ms)
      ΓêÜ should return error for invalid iteration path (9 ms)
    Item selection
      ├ù should move only selected items by index (18 ms)
      ├ù should move items matching criteria (14 ms)
      ├ù should move all items when selector is "all" (6 ms)
    Dry run mode
      ├ù should show preview without making changes (5 ms)
      ├ù should limit preview to maxPreviewItems (5 ms)
      ├ù should show current iteration path in preview (5 ms)
    Execution mode
      ΓêÜ should move work items successfully (9 ms)
      ΓêÜ should include comment when provided (17 ms)
      ├ù should handle partial failures (24 ms)
    Child items handling
      ΓêÜ should support updating child items (5 ms)
      ΓêÜ should default to not updating child items (6 ms)
    Error handling
      ΓêÜ should return error for invalid query handle (1 ms)
      ΓêÜ should return error when Azure CLI not available (2 ms)
      ΓêÜ should handle schema validation errors (2 ms)
      ├ù should return error when no items selected (9 ms)
    Edge cases
      ΓêÜ should handle expired query handles (18 ms)
      ├ù should handle empty workItemContext gracefully (9 ms)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Item selection ΓÇ║ should move only selected items by index

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      152 |       });
      153 |
    > 154 |       expect(result.success).toBe(true);
          |                              ^
      155 |       expect((result.data as any).selected_items_count).toBe(2);
      156 |       expect((result.data as any).total_items_in_handle).toBe(5);
      157 |     });

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:154:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Item selection ΓÇ║ should move items matching criteria

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      181 |       });
      182 |
    > 183 |       expect(result.success).toBe(true);
          |                              ^
      184 |       expect((result.data as any).selected_items_count).toBe(2); // Tasks 1 and 3
      185 |     });
      186 |

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:183:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Item selection ΓÇ║ should move all items when selector is "all"

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      209 |       });
      210 |
    > 211 |       expect(result.success).toBe(true);
          |                              ^
      212 |       expect((result.data as any).selected_items_count).toBe(3);
      213 |     });
      214 |   });

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:211:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Dry run mode ΓÇ║ should show preview without making changes

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      237 |       });
      238 |
    > 239 |       expect(result.success).toBe(true);
          |                              ^
      240 |       expect((result.data as any).dry_run).toBe(true);
      241 |       expect((result.data as any).preview).toBeDefined();
      242 |       expect((result.data as any).preview).toHaveLength(2);

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:239:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Dry run mode ΓÇ║ should limit preview to maxPreviewItems

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      269 |       });
      270 |
    > 271 |       expect(result.success).toBe(true);
          |                              ^
      272 |       expect((result.data as any).preview).toHaveLength(5);
      273 |       expect((result.data as any).selected_items_count).toBe(15);
      274 |     });

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:271:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Dry run mode ΓÇ║ should show current iteration path in preview

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      296 |       });
      297 |
    > 298 |       expect(result.success).toBe(true);
          |                              ^
      299 |       expect((result.data as any).preview[0].current_iteration).toBe('TestProject\\Sprint 10');
      300 |       expect((result.data as any).preview[1].current_iteration).toBe('TestProject\\Backlog');
      301 |     });

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:298:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Execution mode ΓÇ║ should handle partial failures

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      414 |       });
      415 |
    > 416 |       expect(result.success).toBe(true);
          |                              ^
      417 |       expect((result.data as any).items_succeeded).toBe(1);
      418 |       expect((result.data as any).items_failed).toBe(1);
      419 |       expect(result.warnings).toEqual(

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:416:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Error handling ΓÇ║ should return error when no items selected

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      545 |       });
      546 |
    > 547 |       expect(result.success).toBe(false);
          |                              ^
      548 |       expect(result.errors).toEqual(
      549 |         expect.arrayContaining([expect.stringContaining('No items')])
      550 |       );

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:547:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Edge cases ΓÇ║ should handle empty workItemContext gracefully

    TypeError: Cannot read properties of undefined (reading '0')

      602 |
      603 |       expect(result.success).toBe(true);
    > 604 |       expect((result.data as any).preview[0].current_iteration).toMatch(/Not set|Unknown/);
          |                                          ^
      605 |     });
      606 |   });
      607 | });

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:604:42)

  console.error
    [WARN] Failed to fetch context package for work item 102: [ 'Failed to fetch item 102' ]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.warn (src/utils/logger.ts:29:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:144:18
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:436:22)

  console.error
    [INFO] Bulk assign operation: 20 of 20 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:352:57)

  console.error
    [INFO] Bulk state transition: 3 of 5 items to 'Resolved' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:190:53)

  console.error
    [INFO] Fetching context packages for 2 work items from query handle qh_a66b86d9435a91bde706898f25b55c8d

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:468:65)

  console.error
    [INFO] Selection criteria: [0,2,4]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:152:14)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:190:53)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:468:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:468:22)

  console.error
    [ERROR] Error fetching context package for work item 103: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:468:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:468:22)

  console.error
    [INFO] Bulk assign operation: 3 of 3 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:390:57)

  console.error
    [INFO] Bulk state transition: 1 of 4 items to 'Resolved' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:220:53)

  console.error
    [INFO] Bulk assign operation: 5 of 5 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:428:57)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_9a71eb05651e849bd562d18ebecad08f

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:493:65)

  console.error
    [INFO] Selection criteria: {"states":["Active"],"tags":["critical"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:152:14)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:220:53)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:493:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:493:22)

  console.error
    [INFO] Bulk assign operation: 50 of 50 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:468:57)

  console.error
    [INFO] Bulk state transition: 0 of 2 items to 'Resolved' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:246:53)

  console.error
    [INFO] Fetching context packages for 2 work items from query handle qh_b27b6a942fec3502bae954c16817780a

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:521:65)

  console.error
    [INFO] Bulk assign operation: 5 of 10 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:513:57)

  console.error
    [INFO] Selection criteria: {"states":["Removed"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:152:14)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:246:53)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:521:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:521:22)

  console.error
    [INFO] Selection criteria: {"states":["New"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/bulk-preview-limits.test.ts:513:57)

  console.error
    [ERROR] Error fetching context package for work item 102: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:521:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:521:22)

  console.error
    [INFO] Bulk state transition: 3 of 3 items to 'Done' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:278:53)

  console.error
    [INFO] Fetching context packages for 2 work items from query handle qh_1aba5ede17bf2b1e05d6eafd45a41e23

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:550:65)

PASS src/test/bulk-preview-limits.test.ts (5.116 s)
  Bulk Operations Preview Limits
    Default preview limit (5 items)
      ΓêÜ should default to 5 items for bulk-assign (182 ms)
      ΓêÜ should default to 5 items for bulk-remove (15 ms)
      ΓêÜ should default to 10 items for bulk-update (13 ms)
      ΓêÜ should default to 10 items for bulk-comment (10 ms)
    Custom preview limits
      ΓêÜ should respect custom limit of 1 (6 ms)
      ΓêÜ should respect custom limit of 10 (7 ms)
      ΓêÜ should respect custom limit of 50 (7 ms)
    Truncation message handling
      ΓêÜ should show truncation message when preview is limited (6 ms)
      ΓêÜ should not show truncation message when preview shows all items (10 ms)
      ΓêÜ should not show truncation message when limit equals selected count (5 ms)
    Total count always shown
      ΓêÜ should always show total selected count even when preview is limited (7 ms)
      ΓêÜ should show correct counts with itemSelector criteria (10 ms)
    Schema validation
      ΓêÜ should validate maxPreviewItems min value (1) (1 ms)
      ΓêÜ should validate maxPreviewItems max value (50) (1 ms)
      ΓêÜ should accept valid maxPreviewItems values (1 ms)

  console.error
    [INFO] Bulk state transition: 20 of 20 items to 'Done' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:308:53)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:550:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:550:22)

  console.error
    [ERROR] Error fetching context package for work item 102: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:550:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:550:22)

  console.error
    [INFO] Bulk state transition: 2 of 2 items to 'Resolved' (dry_run: false, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:344:53)

  console.error
    [INFO] Fetching context packages for 2 work items from query handle qh_7b6c0fb60a847bb30307b17a23db63ed

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:630:65)

  console.error
    [ERROR] Failed to fetch work items for validation: TypeError: httpClient.get is not a function
        at handleBulkTransitionState (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\bulk-operations\bulk-transition-handler.ts:166:43)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\bulk-transition-state.test.ts:344:53)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:169:16)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:344:53)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:630:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:630:22)

  console.error
    [ERROR] Error fetching context package for work item 102: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:630:65)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:630:22)

  console.error
    [INFO] Bulk state transition: 2 of 2 items to 'Resolved' (dry_run: false, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:380:53)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_ac1a4da822c4a97b95e9e8dd0f7176c9

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:111:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:660:50)

  console.error
    [ERROR] Error fetching context package for work item 101: TypeError: Cannot destructure property 'workItemId' of 'args' as it is undefined.
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:26:13
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:397:39
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:404:13
        at mockConstructor (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-mock\build\index.js:108:19)
        at C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:116:68
        at Array.map (<anonymous>)
        at handleGetContextPackagesByQueryHandle (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\context\get-context-packages-by-query-handle.handler.ts:114:42)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\context-packages-by-handle.test.ts:660:50)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:152:16
          at async Promise.all (index 0)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:161:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:660:7)

  console.error
    [ERROR] Failed to fetch work items for validation: TypeError: httpClient.get is not a function
        at handleBulkTransitionState (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\bulk-operations\bulk-transition-handler.ts:166:43)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\bulk-transition-state.test.ts:380:53)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:169:16)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:380:53)

  console.error
    [INFO] Bulk state transition: 1 of 1 items to 'Resolved' (dry_run: false, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:417:38)

  console.error
    [ERROR] Failed to fetch work items for validation: TypeError: httpClient.get is not a function
        at handleBulkTransitionState (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\bulk-operations\bulk-transition-handler.ts:166:43)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\bulk-transition-state.test.ts:417:38)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:169:16)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:417:38)

  console.error
    [INFO] Bulk state transition: 1 of 1 items to 'Resolved' (dry_run: false, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:456:38)

  console.error
    [ERROR] Failed to fetch work items for validation: TypeError: httpClient.get is not a function
        at handleBulkTransitionState (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\bulk-operations\bulk-transition-handler.ts:166:43)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\bulk-transition-state.test.ts:456:38)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:169:16)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:456:38)

  console.error
    [INFO] Bulk state transition: 2 of 2 items to 'Resolved' (dry_run: true, validate: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:150:12)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:570:53)

  console.error
    [ERROR] Failed to fetch work items for validation: TypeError: httpClient.get is not a function
        at handleBulkTransitionState (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\bulk-operations\bulk-transition-handler.ts:166:43)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\bulk-transition-state.test.ts:570:53)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleBulkTransitionState (src/services/handlers/bulk-operations/bulk-transition-handler.ts:169:16)
      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:570:53)

FAIL test/unit/context-packages-by-handle.test.ts (5.338 s)
  Get Context Packages By Query Handle Handler
    Basic retrieval
      ├ù should retrieve context packages for all items (254 ms)
      ├ù should retrieve context packages for selected indices (22 ms)
      ├ù should retrieve context packages matching criteria (20 ms)
    Preview limiting
      ├ù should limit to maxPreviewItems (49 ms)
      ├ù should use default maxPreviewItems of 10 (48 ms)
    Optional parameters
      ├ù should support includeHistory parameter (9 ms)
      ├ù should support includeComments parameter (14 ms)
      ├ù should support includeRelations parameter (9 ms)
      ├ù should support includeChildren and includeParent parameters (8 ms)
      ├ù should support includeExtendedFields parameter (12 ms)
    Error handling
      ΓêÜ should return error for invalid query handle (2 ms)
      ΓêÜ should return error when no items selected (2 ms)
      ΓêÜ should handle schema validation errors (2 ms)
      ΓêÜ should handle partial failures when fetching packages (9 ms)
    Selection summary
      ΓêÜ should include index-based selection summary (13 ms)
      ΓêÜ should include criteria-based selection summary (13 ms)
      ΓêÜ should include all selection summary (13 ms)
    Next steps guidance
      ΓêÜ should include helpful next steps (12 ms)
    Edge cases
      ΓêÜ should handle expired query handles (17 ms)
      ΓêÜ should handle empty query results (1 ms)
      ├ù should handle maxPreviewItems larger than selection (10 ms)
    Configuration parameters
      ├ù should use organization and project from parameters (7 ms)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Basic retrieval ΓÇ║ should retrieve context packages for all items

    expect(received).toBe(expected) // Object.is equality

    Expected: 3
    Received: 0

      89 |       expect(result.success).toBe(true);
      90 |       expect((result.data as any).selected_items_count).toBe(3);
    > 91 |       expect((result.data as any).fetched_packages_count).toBe(3);
         |                                                           ^
      92 |       expect((result.data as any).context_packages).toHaveLength(3);
      93 |     });
      94 |

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:91:59)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Basic retrieval ΓÇ║ should retrieve context packages for selected indices

    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 0
    Received array:  []

      117 |       expect(result.success).toBe(true);
      118 |       expect((result.data as any).selected_items_count).toBe(3);
    > 119 |       expect((result.data as any).context_packages).toHaveLength(3);
          |                                                     ^
      120 |     });
      121 |
      122 |     it('should retrieve context packages matching criteria', async () => {

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:119:53)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Basic retrieval ΓÇ║ should retrieve context packages matching criteria

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

      144 |       expect(result.success).toBe(true);
      145 |       expect((result.data as any).selected_items_count).toBe(2); // Bugs 1 and 3
    > 146 |       expect((result.data as any).context_packages).toHaveLength(2);
          |                                                     ^
      147 |     });
      148 |   });
      149 |

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:146:53)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Preview limiting ΓÇ║ should limit to maxPreviewItems

    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: 0

      174 |       expect(result.success).toBe(true);
      175 |       expect((result.data as any).selected_items_count).toBe(20);
    > 176 |       expect((result.data as any).fetched_packages_count).toBe(5);
          |                                                           ^
      177 |       expect((result.data as any).context_packages).toHaveLength(5);
      178 |       expect(result.warnings).toEqual(
      179 |         expect.arrayContaining([expect.stringContaining('limiting to 5')])

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:176:59)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Preview limiting ΓÇ║ should use default maxPreviewItems of 10

    expect(received).toBe(expected) // Object.is equality

    Expected: 10
    Received: 0

      205 |
      206 |       expect(result.success).toBe(true);
    > 207 |       expect((result.data as any).fetched_packages_count).toBe(10);
          |                                                           ^
      208 |       expect((result.data as any).context_packages).toHaveLength(10);
      209 |     });
      210 |   });

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:207:59)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Optional parameters ΓÇ║ should support includeHistory parameter

    TypeError: Cannot read properties of undefined (reading 'includeHistory')

      235 |
      236 |       const callArgs = handleGetWorkItemContextPackage.mock.calls[0][1];
    > 237 |       expect(callArgs.includeHistory).toBe(true);
          |                       ^
      238 |       expect(callArgs.maxHistoryRevisions).toBe(10);
      239 |     });
      240 |

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:237:23)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Optional parameters ΓÇ║ should support includeComments parameter

    TypeError: Cannot read properties of undefined (reading 'includeComments')

      262 |
      263 |       const callArgs = handleGetWorkItemContextPackage.mock.calls[0][1];
    > 264 |       expect(callArgs.includeComments).toBe(false);
          |                       ^
      265 |     });
      266 |
      267 |     it('should support includeRelations parameter', async () => {

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:264:23)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Optional parameters ΓÇ║ should support includeRelations parameter

    TypeError: Cannot read properties of undefined (reading 'includeRelations')

      288 |
      289 |       const callArgs = handleGetWorkItemContextPackage.mock.calls[0][1];
    > 290 |       expect(callArgs.includeRelations).toBe(false);
          |                       ^
      291 |     });
      292 |
      293 |     it('should support includeChildren and includeParent parameters', async () => {

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:290:23)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Optional parameters ΓÇ║ should support includeChildren and includeParent parameters

    TypeError: Cannot read properties of undefined (reading 'includeChildren')

      315 |
      316 |       const callArgs = handleGetWorkItemContextPackage.mock.calls[0][1];
    > 317 |       expect(callArgs.includeChildren).toBe(false);
          |                       ^
      318 |       expect(callArgs.includeParent).toBe(false);
      319 |     });
      320 |

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:317:23)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Optional parameters ΓÇ║ should support includeExtendedFields parameter

    TypeError: Cannot read properties of undefined (reading 'includeExtendedFields')

      342 |
      343 |       const callArgs = handleGetWorkItemContextPackage.mock.calls[0][1];
    > 344 |       expect(callArgs.includeExtendedFields).toBe(true);
          |                       ^
      345 |     });
      346 |   });
      347 |

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:344:23)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Edge cases ΓÇ║ should handle maxPreviewItems larger than selection

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 0

      635 |
      636 |       expect(result.success).toBe(true);
    > 637 |       expect((result.data as any).fetched_packages_count).toBe(2);
          |                                                           ^
      638 |       expect((result.data as any).context_packages).toHaveLength(2);
      639 |       expect(result.warnings).toHaveLength(0); // No warning about limiting
      640 |     });

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:637:59)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Configuration parameters ΓÇ║ should use organization and project from parameters

    TypeError: Cannot read properties of undefined (reading 'organization')

      666 |
      667 |       const callArgs = handleGetWorkItemContextPackage.mock.calls[0][1];
    > 668 |       expect(callArgs.organization).toBe('custom-org');
          |                       ^
      669 |       expect(callArgs.project).toBe('custom-project');
      670 |     });
      671 |   });

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:668:23)

  console.error
    [INFO] Bulk comment operation: 2 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/selection-integration.test.ts:170:65)

FAIL test/unit/bulk-transition-state.test.ts (5.317 s)
  Bulk Transition State Handler
    State transition validation
      ├ù should validate valid state transitions (171 ms)
      ├ù should detect invalid state transitions (11 ms)
      ├ù should allow transitions between common states (7 ms)
    Item selection
      ├ù should transition only selected items by index (12 ms)
      ΓêÜ should transition items matching criteria (16 ms)
      ├ù should return error when no items selected (10 ms)
    Dry run mode
      ├ù should show preview without making changes (5 ms)
      ├ù should limit preview items to maxPreviewItems (5 ms)
    Execution mode
      ├ù should transition work items successfully (34 ms)
      ├ù should handle partial failures gracefully (11 ms)
    Optional parameters
      ├ù should include reason when provided (10 ms)
      ├ù should include comment when provided (9 ms)
    Error handling
      ΓêÜ should return error for invalid query handle (2 ms)
      ΓêÜ should return error when Azure CLI not available (1 ms)
      ΓêÜ should handle schema validation errors (1 ms)
    Edge cases
      ΓêÜ should handle expired query handles (19 ms)
      ├ù should handle items already in target state (10 ms)

  ΓùÅ Bulk Transition State Handler ΓÇ║ State transition validation ΓÇ║ should validate valid state transitions

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      111 |
      112 |       expect(result.success).toBe(true);
    > 113 |       expect((result.data as any).validation_passed).toBe(true);
          |                                                      ^
      114 |       expect((result.data as any).selected_items_count).toBe(3);
      115 |     });
      116 |

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:113:54)

  ΓùÅ Bulk Transition State Handler ΓÇ║ State transition validation ΓÇ║ should detect invalid state transitions

    expect(received).toEqual(expected) // deep equality

    Expected: ArrayContaining [StringContaining "Removed"]
    Received: ["Work item 101: Work item already in target state 'Active'"]

      137 |
      138 |       expect(result.success).toBe(true);
    > 139 |       expect(result.warnings).toEqual(
          |                               ^
      140 |         expect.arrayContaining([expect.stringContaining('Removed')])
      141 |       );
      142 |     });

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:139:31)

  ΓùÅ Bulk Transition State Handler ΓÇ║ State transition validation ΓÇ║ should allow transitions between common states

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      166 |
      167 |       expect(result.success).toBe(true);
    > 168 |       expect((result.data as any).validation_passed).toBe(true);
          |                                                      ^
      169 |     });
      170 |   });
      171 |

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:168:54)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Item selection ΓÇ║ should transition only selected items by index

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: undefined

      198 |       expect((result.data as any).selected_items_count).toBe(3);
      199 |       expect((result.data as any).total_items_in_handle).toBe(5);
    > 200 |       expect((result.data as any).preview).toHaveLength(3);
          |                                            ^
      201 |     });
      202 |
      203 |     it('should transition items matching criteria', async () => {

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:200:44)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Item selection ΓÇ║ should return error when no items selected

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      251 |       });
      252 |
    > 253 |       expect(result.success).toBe(false);
          |                              ^
      254 |       expect(result.errors).toEqual(
      255 |         expect.arrayContaining([expect.stringContaining('No items')])
      256 |       );

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:253:30)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Dry run mode ΓÇ║ should show preview without making changes

    expect(received).toBeDefined()

    Received: undefined

      285 |       expect(result.success).toBe(true);
      286 |       expect((result.data as any).dry_run).toBe(true);
    > 287 |       expect((result.data as any).preview).toBeDefined();
          |                                            ^
      288 |       expect(result.warnings).toContain('Dry run mode - no changes made');
      289 |     });
      290 |

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:287:44)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Dry run mode ΓÇ║ should limit preview items to maxPreviewItems

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: undefined

      315 |
      316 |       expect(result.success).toBe(true);
    > 317 |       expect((result.data as any).preview).toHaveLength(5);
          |                                            ^
      318 |       expect((result.data as any).selected_items_count).toBe(20);
      319 |     });
      320 |   });

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:317:44)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Execution mode ΓÇ║ should transition work items successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      350 |       });
      351 |
    > 352 |       expect(result.success).toBe(true);
          |                              ^
      353 |       expect((result.data as any).items_succeeded).toBe(2);
      354 |       expect((result.data as any).items_failed).toBe(0);
      355 |       expect(mockPatch).toHaveBeenCalledTimes(2);

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:352:30)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Execution mode ΓÇ║ should handle partial failures gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      385 |       });
      386 |
    > 387 |       expect(result.success).toBe(true);
          |                              ^
      388 |       expect((result.data as any).items_succeeded).toBe(1);
      389 |       expect((result.data as any).items_failed).toBe(1);
      390 |       expect(result.warnings).toEqual(

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:387:30)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Optional parameters ΓÇ║ should include reason when provided

    TypeError: Cannot read properties of undefined (reading '1')

      424 |
      425 |       const patchCall = mockPatch.mock.calls[0];
    > 426 |       expect(patchCall[1]).toEqual(
          |                       ^
      427 |         expect.arrayContaining([
      428 |           expect.objectContaining({
      429 |             path: '/fields/System.Reason',

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:426:23)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Optional parameters ΓÇ║ should include comment when provided

    TypeError: Cannot read properties of undefined (reading '1')

      463 |
      464 |       const patchCall = mockPatch.mock.calls[0];
    > 465 |       expect(patchCall[1]).toEqual(
          |                       ^
      466 |         expect.arrayContaining([
      467 |           expect.objectContaining({
      468 |             path: '/fields/System.History',

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:465:23)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Edge cases ΓÇ║ should handle items already in target state

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      575 |       });
      576 |
    > 577 |       expect(result.success).toBe(true);
          |                              ^
      578 |       expect(result.warnings).toEqual(
      579 |         expect.arrayContaining([expect.stringContaining('already in target state')])
      580 |       );

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:577:30)

  console.error
    [INFO] Bulk update operation: 1 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/selection-integration.test.ts:201:63)

  console.error
    [INFO] Selected 1 of 5 items for update

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/selection-integration.test.ts:201:63)

  console.error
    [INFO] Selection criteria: [0]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUpdateByQueryHandle (src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/selection-integration.test.ts:201:63)

  console.error
    [INFO] Bulk assign operation: 4 of 10 work items to 'test-user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/selection-integration.test.ts:238:63)

  console.error
    [INFO] Selection criteria: [0,2,4,6]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/selection-integration.test.ts:238:63)

  console.error
    [INFO] Bulk comment operation: 2 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/selection-integration.test.ts:288:65)

  console.error
    [INFO] Selected 3 of 3 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:81:57)

  console.error
    [INFO] Bulk comment operation: 2 of 4 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/selection-integration.test.ts:336:58)

  console.error
    [INFO] Bulk remove operation: 3 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:81:57)

  console.error
    [INFO] Selected 2 of 4 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:126:57)

  console.error
    [INFO] Selection criteria: {"states":["Active"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:126:57)

  console.error
    [INFO] Bulk remove operation: 2 of 4 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:126:57)

  console.error
    [INFO] Selected 2 of 2 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:160:57)

  console.error
    [INFO] Bulk remove operation: 2 of 2 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:160:57)

  console.error
    [INFO] Bulk comment operation: 0 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/selection-integration.test.ts:376:60)

  console.error
    [INFO] Selected 10 of 10 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:190:57)

  console.error
    [INFO] Bulk remove operation: 10 of 10 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:190:57)

PASS src/test/selection-integration.test.ts
  Selection Integration Tests
    Scenario 1: Full Workflow - Query to Bulk Comment
      ΓêÜ should complete full workflow: query ΓåÆ inspect ΓåÆ select ΓåÆ bulk comment (122 ms)
    Scenario 2: Single Item Selection (Index-Based)
      ΓêÜ should select and update a single item by index (24 ms)
    Scenario 3: Multiple Item Selection (Index Array)
      ΓêÜ should select and assign multiple items by indices (13 ms)
    Scenario 4: Criteria-Based Selection (States + Tags)
      ΓêÜ should select items matching multiple criteria (6 ms)
    Scenario 5: Selection by Staleness
      ΓêÜ should select stale items for followup (6 ms)
    Scenario 6: Error Cases
      Error Handling
        ΓêÜ should handle invalid query handle gracefully (1 ms)
        ΓêÜ should handle expired query handle (20 ms)
        ΓêÜ should handle empty selection gracefully (7 ms)
        ΓêÜ should validate indices are within bounds (1 ms)

  console.error
    [INFO] Selected 3 of 5 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:264:57)

  console.error
    [INFO] Selection criteria: [0,2,4]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:264:57)

  console.error
    [INFO] Bulk remove operation: 3 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:264:57)

  console.error
    [INFO] Selected 0 of 3 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:296:57)

  console.error
    [INFO] Selection criteria: {"states":["NonExistent"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:296:57)

  console.error
    [INFO] Bulk description enhancement: processing 2 of 2 selected work items (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkEnhanceDescriptions (src/services/handlers/ai-powered/bulk-enhance-descriptions.handler.ts:166:12)
      at Object.<anonymous> (src/test/bulk-enhance-descriptions-minimization.test.ts:113:57)

  console.error
    [INFO] Bulk remove operation: 0 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:296:57)

  console.error
    [INFO] Selected 0 of 2 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:326:57)

  console.error
    [INFO] Bulk description enhancement: processing 1 of 1 selected work items (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkEnhanceDescriptions (src/services/handlers/ai-powered/bulk-enhance-descriptions.handler.ts:166:12)
      at Object.<anonymous> (src/test/bulk-enhance-descriptions-minimization.test.ts:147:57)

  console.error
    [INFO] Selection criteria: [5,10]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:52:14)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:326:57)

  console.error
    [INFO] Generating OData query from description: "Find all active work items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:63:12)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:90:52)

  console.error
    [INFO] Bulk description enhancement: processing 1 of 1 selected work items (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkEnhanceDescriptions (src/services/handlers/ai-powered/bulk-enhance-descriptions.handler.ts:166:12)
      at Object.<anonymous> (src/test/bulk-enhance-descriptions-minimization.test.ts:182:57)

  console.error
    [INFO] Bulk remove operation: 0 of 2 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:326:57)

  console.error
    [INFO] Γ£à Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:127:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:90:22)

  console.error
    [INFO] Bulk description enhancement: processing 1 of 1 selected work items (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkEnhanceDescriptions (src/services/handlers/ai-powered/bulk-enhance-descriptions.handler.ts:166:12)
      at Object.<anonymous> (src/test/bulk-enhance-descriptions-minimization.test.ts:213:57)

  console.error
    [INFO] Selected 3 of 3 items for removal

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:50:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:358:57)

  console.error
    [INFO] Generating OData query from description: "Find all active work items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:63:12)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:149:52)

  console.error
    [INFO] Bulk remove operation: 3 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkRemoveByQueryHandle (src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.ts:54:12)
      at Object.<anonymous> (src/test/bulk-remove-by-query-handle.test.ts:358:57)

  console.error
    [INFO] Bulk description enhancement: processing 1 of 1 selected work items (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkEnhanceDescriptions (src/services/handlers/ai-powered/bulk-enhance-descriptions.handler.ts:166:12)
      at Object.<anonymous> (src/test/bulk-enhance-descriptions-minimization.test.ts:263:57)

PASS src/test/bulk-remove-by-query-handle.test.ts
  Bulk Remove By Query Handle Handler
    Enhanced Dry-Run Preview
      ΓêÜ should include structured selection details in dry-run preview (20 ms)
      ΓêÜ should show selection criteria in dry-run for criteria-based selection (12 ms)
      ΓêÜ should show "All items" in criteria for itemSelector="all" (8 ms)
      ΓêÜ should limit preview items to 5 even with larger selection (8 ms)
    Error Handling
      ΓêÜ should return error for invalid query handle (1 ms)
      ΓêÜ should return error for expired query handle (22 ms)
    Index-based Selection
      ΓêÜ should support index-based selection in dry-run (13 ms)
    Validation and Edge Cases
      ΓêÜ should handle empty selection gracefully (12 ms)
      ΓêÜ should handle invalid indices gracefully (11 ms)
    Backward Compatibility
      ΓêÜ should work when itemSelector is not provided (defaults to "all") (7 ms)
      ΓêÜ should maintain existing error handling

  console.error
    [INFO] Γ£à Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:127:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:149:22)

  console.error
    [INFO] Bulk link operation: 3 source(s) ├ù 3 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:93:56)

  console.error
    [INFO] Executing OData query to create query handle (maxResults: 200)...

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:150:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:149:22)

  console.error
    [INFO] Bulk description enhancement: processing 2 of 2 selected work items (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkEnhanceDescriptions (src/services/handlers/ai-powered/bulk-enhance-descriptions.handler.ts:166:12)
      at Object.<anonymous> (src/test/bulk-enhance-descriptions-minimization.test.ts:298:57)

  console.error
    [INFO] Query handle created: qh_2ab630fac1dff1fa85de3fadabf3fc8f (1 work items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:251:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:149:22)

  console.error
    [INFO] Bulk link operation: 1 source(s) ├ù 3 target(s) using one-to-many strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:133:56)

  console.error
    [INFO] Generating OData query from description: "Find all active work items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:63:12)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:220:52)

  console.error
    [INFO] Γ£à Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:127:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:220:22)

PASS src/test/bulk-enhance-descriptions-minimization.test.ts
  Bulk Enhance Descriptions - Parameter Minimization
    includeTitles parameter
      ΓêÜ should omit titles by default (includeTitles: false) (15 ms)
      ΓêÜ should include titles when includeTitles: true (4 ms)
    includeConfidence parameter
      ΓêÜ should omit confidence by default (includeConfidence: false) (4 ms)
      ΓêÜ should omit high confidence scores even when includeConfidence: true (5 ms)
      ΓêÜ should include low confidence scores when includeConfidence: true (6 ms)
    Combined parameter optimization
      ΓêÜ should support both parameters together (7 ms)
    Schema validation
      ΓêÜ should have correct default values in schema (1 ms)
      ΓêÜ should accept explicit true values (6 ms)

  console.error
    [INFO] Executing OData query to create query handle (maxResults: 200)...

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:150:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:220:22)

  console.error
    [INFO] Query handle created: qh_2579ae31b606771d51b1d4904ed78971 (2 work items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:251:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:220:22)

  console.error
    [INFO] Bulk link operation: 3 source(s) ├ù 1 target(s) using many-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:172:56)

  console.error
    [INFO] Bulk link operation: 2 source(s) ├ù 2 target(s) using many-to-many strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:211:56)

  console.error
    [INFO] Generating OData query from description: "Find non-existent items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:63:12)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:276:52)

  console.error
    [INFO] Bulk link operation: 1 source(s) ├ù 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:242:56)

  console.error
    [INFO] Γ£à Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:127:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:276:22)

  console.error
    [INFO] Executing OData query to create query handle (maxResults: 200)...

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:150:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:276:22)

  console.error
    [INFO] Bulk link operation: 1 source(s) ├ù 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:268:56)

  console.error
    [WARN] OData query returned 0 results - cannot create query handle

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.warn (src/utils/logger.ts:29:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:189:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:276:22)

  console.error
    [INFO] Generating WIQL query from description: "Find all active work items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:69:12)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:92:51)

  console.error
    [INFO] Generating OData query from description: "Find active items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:63:12)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:328:52)

  console.error
    [INFO] Γ£à Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:127:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:328:22)

  console.error
    [INFO] Bulk link operation: 1 source(s) ├ù 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:294:56)

  console.error
    [INFO] Γ£à Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:138:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:92:22)

  console.error
    [INFO] Executing OData query to create query handle (maxResults: 200)...

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:150:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:328:22)

  console.error
    [INFO] Query handle created: qh_0a39f8022a9ed240a8968cc0047267c3 (1 work items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:251:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:328:22)

  console.error
    [INFO] Bulk link operation: 1 source(s) ├ù 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:320:56)

  console.error
    [INFO] Generating WIQL query from description: "Find all active work items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:69:12)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:174:51)

  console.error
    [INFO] Generating OData query from description: "Find active items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:63:12)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:370:52)

  console.error
    [INFO] Γ£à Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:138:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:174:22)

  console.error
    [INFO] Γ£à Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:127:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:370:22)

  console.error
    [INFO] Bulk link operation: 2 source(s) ├ù 2 target(s) using many-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:351:56)

  console.error
    [INFO] Executing query to create handle with maxResults=200

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:161:16)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:174:22)

  console.error
    [INFO] Executing OData query to create query handle (maxResults: 200)...

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:150:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:370:22)

  console.error
    [INFO] Query handle created: qh_4eecae337d72728b2181347b3e2665f2 (2 work items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:217:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:174:22)

  console.error
    [INFO] Bulk link operation: 2 source(s) ├ù 2 target(s) using one-to-many strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:381:56)

  console.error
    [INFO] Bulk link operation: 2 source(s) ├ù 2 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:408:56)

  console.error
    [INFO] Generating WIQL query from description: "Find non-existent items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:69:12)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:234:51)

  console.error
    [INFO] Bulk link operation: 2 source(s) ├ù 2 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:442:56)

  console.error
    [INFO] Γ£à Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:138:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:234:22)

  console.error
    [INFO] Executing query to create handle with maxResults=200

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:161:16)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:234:22)

  console.error
    [INFO] Bulk link operation: 10 source(s) ├ù 10 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:470:56)

  console.error
    [WARN] Query returned 0 results, skipping handle creation

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.warn (src/utils/logger.ts:29:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:268:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:234:22)

  console.error
    [INFO] Bulk link operation: 2 source(s) ├ù 2 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:509:56)

  console.error
    [ERROR] Failed to create query handle: Error: Failed to execute OData query: 500 Internal Server Error - Server error
        at handleGenerateODataQuery (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\services\handlers\query\generate-odata-query.handler.ts:182:17)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\test\generate-odata-query-handle.test.ts:370:22)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:288:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:370:22)

  console.error
    [INFO] Generating WIQL query from description: "Find active items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:69:12)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:299:51)

  console.error
    [INFO] Γ£à Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:138:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:299:22)

  console.error
    [INFO] Generating OData query from description: "Find active items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:63:12)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:418:37)

  console.error
    [INFO] Executing query to create handle with maxResults=200

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:161:16)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:299:22)

  console.error
    [INFO] Bulk link operation: 2 source(s) ├ù 2 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:547:56)

  console.error
    [INFO] Query handle created: qh_23168e79ec03d3107af3f9c97054e5b4 (1 work items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:217:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:299:22)

  console.error
    [INFO] Γ£à Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:127:18)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:418:7)

  console.error
    [INFO] Executing OData query to create query handle (maxResults: 50)...

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:150:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:418:7)

  console.error
    [INFO] Generating WIQL query from description: "Find active items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:69:12)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:346:51)

  console.error
    [INFO] Γ£à Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:138:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:346:22)

  console.error
    [INFO] Query handle created: qh_7f7c805001591b401b3cb7b0f104b69a (1 work items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateODataQuery (src/services/handlers/query/generate-odata-query.handler.ts:251:16)
      at Object.<anonymous> (src/test/generate-odata-query-handle.test.ts:418:7)

PASS src/test/generate-odata-query-handle.test.ts
  Generate OData Query Handler - returnQueryHandle parameter
    when returnQueryHandle is false (opt-out)
      ΓêÜ should return only the generated query without creating a handle (18 ms)
    when returnQueryHandle is true (default)
      ΓêÜ should create a query handle by default when returnQueryHandle is not specified (15 ms)
      ΓêÜ should create a query handle and return work items (17 ms)
      ΓêÜ should handle query with no results gracefully (13 ms)
      ΓêÜ should include custom fields when specified (12 ms)
      ΓêÜ should handle API errors gracefully and fallback to query-only response (36 ms)
    maxResults parameter
      ΓêÜ should respect maxResults when fetching work items (17 ms)

  console.error
    [INFO] Executing query to create handle with maxResults=200

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:161:16)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:346:22)

  console.error
    [ERROR] Failed to create link 102 -> 202: Error: Link creation failed
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\test\unit\bulk-link-work-items.test.ts:527:32)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:541:16)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:547:22)

  console.error
    [ERROR] Failed to create query handle: Error: Internal Server Error
        at Object.<anonymous> (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\src\test\generate-wiql-query-handle.test.ts:344:54)
        at Promise.then.completed (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at _runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\ADO-Work-Item-MSP\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:292:16)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:346:22)

  console.error
    [INFO] Bulk link operation: 1 source(s) ├ù 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:590:56)

  console.error
    [INFO] Generating WIQL query from description: "Find active items"

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:69:12)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:410:51)

  console.error
    [INFO] Γ£à Query validated successfully on attempt 1 (1 results)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:138:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:410:22)

  console.error
    [INFO] Bulk link operation: 1 source(s) ├ù 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:620:56)

  console.error
    [INFO] Executing query to create handle with maxResults=50

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:161:16)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:410:22)

  console.error
    [INFO] Query handle created: qh_1f57a1997063e8d76ace322fcc4ec25d (1 work items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGenerateWiqlQuery (src/services/handlers/query/generate-wiql-query.handler.ts:217:18)
      at Object.<anonymous> (src/test/generate-wiql-query-handle.test.ts:410:22)

PASS src/test/generate-wiql-query-handle.test.ts
  Generate WIQL Query Handler - returnQueryHandle parameter
    when returnQueryHandle is false (default)
      ΓêÜ should return only the generated query without creating a handle (19 ms)
    when returnQueryHandle is true
      ΓêÜ should create a query handle and return work items (17 ms)
      ΓêÜ should handle query with no results gracefully (18 ms)
      ΓêÜ should include custom fields when specified (14 ms)
      ΓêÜ should handle API errors gracefully and fallback to query-only response (39 ms)
    maxResults parameter
      ΓêÜ should respect maxResults when fetching work items (12 ms)

  console.error
    [INFO] Bulk link operation: 1 source(s) ├ù 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:648:56)

  console.error
    [INFO] Bulk link operation: 3 source(s) ├ù 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:811:56)

  console.error
    [INFO] Bulk link operation: 1 source(s) ├ù 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:344:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:834:56)

PASS test/unit/bulk-link-work-items.test.ts
  Bulk Link Work Items Handler
    Link strategies
      ΓêÜ should create one-to-one links (146 ms)
      ΓêÜ should create one-to-many links (7 ms)
      ΓêÜ should create many-to-one links (7 ms)
      ΓêÜ should create many-to-many links (6 ms)
    Link types
      ΓêÜ should support Parent link type (5 ms)
      ΓêÜ should support Child link type (4 ms)
      ΓêÜ should support Related link type (9 ms)
      ΓêÜ should support dependency link types (5 ms)
    Item selection
      ΓêÜ should support source item selector (7 ms)
      ΓêÜ should support target item selector (5 ms)
      ΓêÜ should support index-based selectors (6 ms)
    Dry run mode
      ΓêÜ should show preview without creating links (6 ms)
      ΓêÜ should limit preview to maxPreviewItems (6 ms)
    Execution mode
      ΓêÜ should create links successfully (6 ms)
      ΓêÜ should handle partial failures (48 ms)
      ΓêÜ should skip existing links when skipExisting=true (5 ms)
    Link validation
      ΓêÜ should validate hierarchical link types (5 ms)
      ΓêÜ should allow valid hierarchical relationships (10 ms)
    Error handling
      ΓêÜ should return error for invalid source query handle (1 ms)
      ΓêÜ should return error for invalid target query handle (1 ms)
      ΓêÜ should return error when Azure CLI not available (1 ms)
      ΓêÜ should handle invalid link type (1 ms)
      ΓêÜ should return error when no source items selected (1 ms)
      ΓêÜ should return error when no target items selected (1 ms)
    Edge cases
      ΓêÜ should handle mismatched counts in one-to-one strategy (5 ms)
      ΓêÜ should handle self-referencing links (4 ms)

  console.error
    [INFO] Bulk comment operation: 5 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:72:58)

  console.error
    [INFO] Bulk comment operation: 3 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:104:58)

  console.error
    [INFO] Bulk comment operation: 3 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:136:58)

  console.error
    [INFO] Bulk comment operation: 1 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:169:58)

  console.error
    [INFO] Bulk comment operation: 3 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:203:58)

  console.error
    [INFO] Bulk comment operation: 3 of 4 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:235:58)

  console.error
    [INFO] Bulk comment operation: 2 of 2 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:280:58)

  console.error
    [INFO] Bulk comment operation: 2 of 2 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:307:58)

  console.error
    [INFO] Bulk comment operation: 2 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:341:58)

  console.error
    [INFO] Bulk comment operation: 3 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:376:58)

  console.error
    [INFO] Bulk comment operation: 0 of 3 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:436:58)

  console.error
    [INFO] Bulk comment operation: 5 of 5 work items selected (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkCommentByQueryHandle (src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.ts:93:12)
      at Object.<anonymous> (src/test/bulk-comment-by-query-handle.test.ts:469:58)

  console.error
    [INFO] Analyzing 2 work items via query handle (analysis types: effort, assignments, completion)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleAnalyzeByQueryHandle (src/services/handlers/ai-powered/analyze-by-query-handle.handler.ts:181:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:101:54)

PASS src/test/bulk-comment-by-query-handle.test.ts
  Bulk Comment By Query Handle Handler
    itemSelector: "all" (default behavior)
      ΓêÜ should comment on all items when itemSelector is "all" (12 ms)
      ΓêÜ should default to "all" when itemSelector not provided (5 ms)
    itemSelector: [indices] (index array)
      ΓêÜ should comment on selected indices only (6 ms)
      ΓêÜ should handle single index selection (5 ms)
    itemSelector: {criteria} (criteria object)
      ΓêÜ should comment on items matching state criteria (4 ms)
      ΓêÜ should comment on items matching multiple states (8 ms)
    Template variable substitution
      ΓêÜ should substitute template variables with selected items context (4 ms)
      ΓêÜ should warn when template variables are present but no context available (4 ms)
    Comment is only added to selected items
      ΓêÜ should only affect selected items, not all items in handle (5 ms)
    Backward Compatibility
      ΓêÜ should work when itemSelector is not provided (defaults to "all") (3 ms)
      ΓêÜ should maintain existing error handling (1 ms)
    Error Handling
      ΓêÜ should return error for non-existent query handle (1 ms)
      ΓêÜ should handle empty selection gracefully (4 ms)
    Preview Items
      ΓêÜ should show preview of first 3 selected items (4 ms)

  console.error
    [INFO] Analyzing 2 work items via query handle (analysis types: effort)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleAnalyzeByQueryHandle (src/services/handlers/ai-powered/analyze-by-query-handle.handler.ts:181:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:132:54)

  console.error
    [INFO] Analyzing 2 work items via query handle (analysis types: assignments)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleAnalyzeByQueryHandle (src/services/handlers/ai-powered/analyze-by-query-handle.handler.ts:181:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:150:54)

  console.error
    [INFO] Analyzing 2 work items via query handle (analysis types: risks)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleAnalyzeByQueryHandle (src/services/handlers/ai-powered/analyze-by-query-handle.handler.ts:181:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:169:54)

  console.error
    [INFO] Analyzing 2 work items via query handle (analysis types: effort, velocity, assignments, risks, completion, priorities)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleAnalyzeByQueryHandle (src/services/handlers/ai-powered/analyze-by-query-handle.handler.ts:181:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:187:54)

  console.error
    [INFO] Bulk assign operation: 4 of 5 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:73:57)

  console.error
    [INFO] Selection criteria: {"states":["New","Active"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:73:57)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:216:50)

  console.error
    [INFO] Bulk assign operation: 3 of 3 work items to 'team@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:106:57)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:253:50)

  console.error
    [INFO] Bulk assign operation: 3 of 5 work items to 'dev@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:138:57)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:263:50)

  console.error
    [INFO] Selection criteria: [0,2,4]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:138:57)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:276:50)

  console.error
    [INFO] Bulk assign operation: 2 of 3 work items to 'user@example.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:171:57)

  console.error
    [INFO] Selection criteria: {"states":["Active"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:171:57)

  console.error
    [INFO] Bulk assign operation: 3 of 3 work items to 'new@example.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:202:57)

  console.error
    [INFO] Bulk assign operation: 0 of 3 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:238:57)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:290:50)

  console.error
    [INFO] Selection criteria: {"states":["NonExistent"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:238:57)

  console.error
    [INFO] Bulk assign operation: 0 of 2 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:270:57)

  console.error
    [INFO] Selection criteria: [5,10]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:270:57)

  console.error
    [INFO] Bulk assign operation: 8 of 8 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:318:57)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:306:50)

  console.error
    [INFO] Bulk assign operation: 3 of 3 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:352:57)

  console.error
    [INFO] Bulk assign operation: 2 of 2 work items to 'user@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:397:57)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/handle-based-analysis.test.ts:321:50)

PASS src/test/handle-based-analysis.test.ts
  Handle-Based Analysis Tools
    wit-analyze-items
      ΓêÜ should analyze work items using query handle (15 ms)
      ΓêÜ should return error for non-existent query handle (1 ms)
      ΓêÜ should analyze effort correctly (5 ms)
      ΓêÜ should analyze assignments correctly (6 ms)
      ΓêÜ should analyze risks correctly (12 ms)
      ΓêÜ should handle multiple analysis types (5 ms)
    wit-query-handle-list
      ΓêÜ should list query handle statistics (10 ms)
      ΓêÜ should populate handles with correct item count (5 ms)
      ΓêÜ should provide warnings when no handles exist (6 ms)
      ΓêÜ should warn about high number of handles (4 ms)
      ΓêÜ should handle expired handles (20 ms)
      ΓêÜ should exclude expired handles from handles array by default (17 ms)
      ΓêÜ should include expired handles when requested (15 ms)

  console.error
    [INFO] Bulk assign operation: 2 of 4 work items to 'urgent-team@company.com' (dry_run: true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:49:12)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:431:57)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/list-query-handles-pagination.test.ts:139:50)

  console.error
    [INFO] Selection criteria: {"states":["Active"],"tags":["urgent"]}

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkAssignByQueryHandle (src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.ts:51:14)
      at Object.<anonymous> (src/test/bulk-assign-by-query-handle.test.ts:431:57)

PASS src/test/bulk-assign-by-query-handle.test.ts
  Bulk Assign By Query Handle Handler
    Assignment applies to selected items only
      ΓêÜ should assign only selected items to user (14 ms)
      ΓêÜ should assign all items when itemSelector is "all" (9 ms)
      ΓêÜ should assign only items at specified indices (10 ms)
    Clear messaging about assignment scope
      ΓêÜ should include "selected" in summary when using criteria selector (8 ms)
      ΓêÜ should show preview of items to be assigned (6 ms)
    Empty selection handling
      ΓêÜ should handle empty selection gracefully (8 ms)
      ΓêÜ should handle invalid indices gracefully (7 ms)
    Edge cases
      ΓêÜ should return error for invalid query handle (1 ms)
      ΓêÜ should limit preview to 5 items (5 ms)
    Backward Compatibility
      ΓêÜ should work when itemSelector is not provided (defaults to "all") (10 ms)
      ΓêÜ should maintain existing error handling (1 ms)
    Dry Run Mode
      ΓêÜ should indicate dry run in response (4 ms)
    Multiple criteria selection
      ΓêÜ should support multiple selection criteria (7 ms)

PASS src/test/detect-patterns-format.test.ts
  Detect Patterns - Format Options
    ΓêÜ should use categorized format by default (9 ms)
    ΓêÜ should support summary format with counts only (2 ms)
    ΓêÜ should support flat format with single array (3 ms)
    ΓêÜ should include format in metadata (2 ms)
    ΓêÜ should detect placeholder patterns (2 ms)
    ΓêÜ should detect duplicates (1 ms)
    ΓêÜ should detect unassigned committed items (1 ms)
    ΓêÜ should reduce context size with summary format (2 ms)
    ΓêÜ should have same match counts across all formats (2 ms)

  console.error
    [INFO] Listing query handles (top: 25, skip: 25, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/list-query-handles-pagination.test.ts:164:50)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/list-query-handles-pagination.test.ts:187:50)

  console.error
    [INFO] Listing query handles (top: 20, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/list-query-handles-pagination.test.ts:209:50)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (src/test/list-query-handles-pagination.test.ts:229:50)

PASS src/test/list-query-handles-pagination.test.ts
  List Query Handles Pagination
    Service Level Pagination
      ΓêÜ should return paginated handles with default top=50 and skip=0 (5 ms)
      ΓêÜ should return second page with skip=50 (4 ms)
      ΓêÜ should handle partial last page (3 ms)
      ΓêÜ should handle skip beyond total (2 ms)
      ΓêÜ should respect custom top parameter (4 ms)
      ΓêÜ should handle empty result set (1 ms)
    Handler Level Pagination
      ΓêÜ should return paginated response with default parameters (18 ms)
      ΓêÜ should accept custom top and skip parameters (7 ms)
      ΓêÜ should include pagination in metadata (4 ms)
      ΓêÜ should add warning when more results available (7 ms)
      ΓêÜ should not add pagination warning when all results returned (6 ms)
    Schema Validation
      ΓêÜ should validate top parameter within range (1 ms)
      ΓêÜ should reject top parameter above max (1 ms)
      ΓêÜ should reject top parameter below min
      ΓêÜ should reject negative skip parameter
      ΓêÜ should apply default values when not provided (1 ms)

PASS src/test/query-handle-service.test.ts
  Query Handle Service
    storeQuery
      ΓêÜ should generate unique handles (1 ms)
      ΓêÜ should store work item IDs
      ΓêÜ should store metadata (1 ms)
    getWorkItemIds
      ΓêÜ should retrieve stored work item IDs
      ΓêÜ should return null for non-existent handle (1 ms)
      ΓêÜ should return null for expired handle (22 ms)
    getQueryData
      ΓêÜ should return full query data (2 ms)
    deleteHandle
      ΓêÜ should delete handle
      ΓêÜ should return false for non-existent handle
    getStats
      ΓêÜ should return accurate statistics (13 ms)
    cleanup
      ΓêÜ should remove expired handles (16 ms)
    TTL behavior
      ΓêÜ should use default TTL (1 hour) (1 ms)
      ΓêÜ should use custom TTL
    clearAll
      ΓêÜ should remove all handles (1 ms)
    itemSelector functionality
      getItemsByIndices
        ΓêÜ should return work items by indices (1 ms)
        ΓêÜ should filter invalid indices
        ΓêÜ should return empty array for all invalid indices (1 ms)
        ΓêÜ should return null for invalid handle
      getItemsByCriteria
        ΓêÜ should filter by states (1 ms)
        ΓêÜ should filter by daysInactive range
        ΓêÜ should filter by title contains (1 ms)
        ΓêÜ should filter by tags (1 ms)
        ΓêÜ should combine multiple criteria
        ΓêÜ should return empty array when no items match (1 ms)
        ΓêÜ should return null for invalid handle (1 ms)
      getSelectableIndices
        ΓêÜ should return selectable indices (1 ms)
        ΓêÜ should return null for invalid handle
      getItemContext
        ΓêÜ should return item context by index (1 ms)
        ΓêÜ should return item context for different indices (1 ms)
        ΓêÜ should return null for out-of-bounds index
        ΓêÜ should return null for negative index (1 ms)
        ΓêÜ should return null for invalid handle
      resolveItemSelector
        ΓêÜ should resolve "all" selector (1 ms)
        ΓêÜ should resolve index array selector
        ΓêÜ should resolve criteria selector (1 ms)
        ΓêÜ should return null for invalid handle
      itemContext creation
        ΓêÜ should create itemContext array from workItemContext (1 ms)
        ΓêÜ should create selectionMetadata (1 ms)

PASS src/test/odata-analytics.test.ts
  OData Analytics Handler - includeOdataMetadata parameter
    when includeOdataMetadata is false (default)
      ΓêÜ should strip @odata.* fields from results and top-level response (6 ms)
      ΓêÜ should strip @odata.nextLink when present (2 ms)
      ΓêÜ should filter out null values from results (2 ms)
    when includeOdataMetadata is true
      ΓêÜ should include @odata.* fields in response (7 ms)
      ΓêÜ should include @odata.nextLink when present (2 ms)
      ΓêÜ should NOT filter out null values when metadata is included (1 ms)
    includeMetadata parameter compatibility
      ΓêÜ should work independently from includeOdataMetadata (1 ms)
      ΓêÜ should include both types of metadata when both are true (2 ms)
    different query types
      ΓêÜ should strip metadata for workItemCount query (1 ms)
      ΓêÜ should strip metadata for velocityMetrics query (1 ms)

PASS src/test/find-tool-minimization.test.ts
  Tool Discovery Token Minimization
    Schema Definition
      ΓêÜ should have includeExamples parameter with default false (2 ms)
      ΓêÜ should accept includeExamples: true
      ΓêÜ should accept includeExamples: false explicitly (1 ms)
      ΓêÜ should have token savings mentioned in description (1 ms)
    Response Format with includeExamples
      ΓêÜ should demonstrate response without exampleUsage when includeExamples is false (1 ms)
      ΓêÜ should demonstrate response with exampleUsage when includeExamples is true (1 ms)
    Token Savings Estimation
      ΓêÜ should demonstrate significant token savings per tool
      ΓêÜ should show cumulative savings with multiple tools
    Schema Validation
      ΓêÜ should maintain all required fields in schema (1 ms)
      ΓêÜ should reject invalid values (35 ms)
    Default Values
      ΓêÜ should apply correct defaults (1 ms)
    Integration with Tool Config
      ΓêÜ should be consistent with toolDiscoverySchema export (1 ms)

  console.error
    [INFO] Validating query handle: qh_cb89497cea9357154a72e3a081353a06 (2 items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleValidateQueryHandle (src/services/handlers/query-handles/validate-query-handle.handler.ts:62:12)
      at Object.<anonymous> (src/test/validate-query-handle.test.ts:75:51)

  console.error
    [INFO] Validating query handle: qh_b371adca5ebe6bbee062134cab8f836a (1 items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleValidateQueryHandle (src/services/handlers/query-handles/validate-query-handle.handler.ts:62:12)
      at Object.<anonymous> (src/test/validate-query-handle.test.ts:124:51)

  console.error
    [INFO] Validating query handle: qh_0d8b1d9e0747ee9329dce37df72ac9c1 (3 items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleValidateQueryHandle (src/services/handlers/query-handles/validate-query-handle.handler.ts:62:12)
      at Object.<anonymous> (src/test/validate-query-handle.test.ts:137:51)

  console.error
    [INFO] Validating query handle: qh_bef79139417feb2ad5d8c7c37140b1c0 (8 items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleValidateQueryHandle (src/services/handlers/query-handles/validate-query-handle.handler.ts:62:12)
      at Object.<anonymous> (src/test/validate-query-handle.test.ts:154:51)

PASS src/test/validate-query-handle.test.ts
  Validate Query Handle Handler
    ΓêÜ should validate an existing query handle (10 ms)
    ΓêÜ should return error for non-existent query handle (1 ms)
    ΓêÜ should return error for expired query handle (21 ms)
    ΓêÜ should include metadata when present (4 ms)
    ΓêÜ should include sample items when requested (5 ms)
    ΓêÜ should limit sample items to 5 (3 ms)

PASS src/test/context-tools-registration.test.ts
  Context Tools Registration
    ΓêÜ should register single context package tool (1 ms)
    ΓêÜ should register batch context package tool (1 ms)

PASS src/test/bulk-enhance-descriptions-format.test.ts
  Bulk Enhance Descriptions - Response Format
    Schema Validation
      ΓêÜ should accept returnFormat parameter with valid values (3 ms)
      ΓêÜ should reject invalid returnFormat values
      ΓêÜ should allow returnFormat to be optional
      ΓêÜ should parse with all parameters including returnFormat (1 ms)
    Default Format Logic
      ΓêÜ should use summary format by default for dry-run (1 ms)
      ΓêÜ should use preview format by default for execute mode (4 ms)
    Format Combinations
      ΓêÜ should allow explicit summary format with dry-run (1 ms)
      ΓêÜ should allow full format with dry-run (1 ms)
      ΓêÜ should allow summary format with execute mode (1 ms)
      ΓêÜ should allow preview format with execute mode
    Response Structure Validation
      ΓêÜ summary format should omit results array (1 ms)
      ΓêÜ preview format should include previews without full text (1 ms)
      ΓêÜ full format should include complete details (1 ms)
    Token Reduction Expectations
      ΓêÜ summary format should provide significant token reduction
      ΓêÜ preview format should provide moderate token reduction

PASS src/test/history-stripping.test.ts
  History Stripping Parameters
    Schema Defaults
      ΓêÜ should default includeHistory to false (1 ms)
      ΓêÜ should default maxHistoryRevisions to 5
      ΓêÜ should allow overriding includeHistory to true (1 ms)
      ΓêÜ should allow custom maxHistoryRevisions value (5 ms)
    Parameter Behavior
      ΓêÜ should accept maxHistoryRevisions parameter without error (1 ms)
      ΓêÜ should not accept historyCount parameter (old name) (1 ms)
    Context Window Optimization
      ΓêÜ should describe history as disabled by default to save context
      ΓêÜ should describe maxHistoryRevisions sorting behavior (1 ms)
    Integration with other parameters
      ΓêÜ should work correctly with all parameters (1 ms)
    Backward Compatibility Considerations
      ΓêÜ should handle explicit includeHistory: false (1 ms)
      ΓêÜ should handle explicit includeHistory: true with defaults

PASS src/test/query-handle-selection.test.ts
  Query Handle Selection Integration Tests
    Index-based Selection
      ΓêÜ should select items by zero-based indices (2 ms)
      ΓêÜ should handle out-of-bounds indices gracefully (1 ms)
      ΓêÜ should handle empty index array
      ΓêÜ should return null for invalid handle (1 ms)
      ΓêÜ should filter out negative indices
      ΓêÜ should handle duplicate indices
      ΓêÜ should handle selection from empty query result (1 ms)
    Criteria-based Selection
      ΓêÜ should filter by state
      ΓêÜ should filter by tags (1 ms)
      ΓêÜ should filter by title keywords (1 ms)
      ΓêÜ should filter by staleness (daysInactive)
      ΓêÜ should combine multiple criteria with AND logic
      ΓêÜ should return null for invalid handle (1 ms)
      ΓêÜ should return empty array when criteria matches no items
      ΓêÜ should filter by multiple states (1 ms)
      ΓêÜ should filter by multiple tags (1 ms)
      ΓêÜ should filter by daysInactiveMin only
      ΓêÜ should filter by daysInactiveMax only (1 ms)
      ΓêÜ should return all items when empty criteria is provided
      ΓêÜ should handle special characters in title search (1 ms)
      ΓêÜ should handle tags with spaces and special characters
      ΓêÜ should handle case-insensitive title search
      ΓêÜ should handle case-insensitive tag search (1 ms)
    Unified Item Selector Resolution
      ΓêÜ should handle "all" selector (2 ms)
      ΓêÜ should handle index array selector
      ΓêÜ should handle criteria object selector
      ΓêÜ should return null for invalid handle (1 ms)
      ΓêÜ should handle invalid selector type gracefully
    Edge Cases and Expiration
      ΓêÜ should return null for expired handles
      ΓêÜ should handle selection with missing itemContext gracefully (1 ms)
    Performance Tests
      ΓêÜ should handle selection from large itemContext (1000+ items) (4 ms)
      ΓêÜ should handle complex criteria with many conditions on large dataset (4 ms)
      ΓêÜ should handle index array with many indices (1 ms)
      ΓêÜ should efficiently filter large datasets with criteria (3 ms)

PASS src/test/resource-service.test.ts
  Resource Service
    listResources
      ΓêÜ should return all available resources (11 ms)
      ΓêÜ should include WIQL quick reference
      ΓêÜ should include OData quick reference (1 ms)
      ΓêÜ should include hierarchy patterns
      ΓêÜ should include common workflows (1 ms)
      ΓêÜ should include tool selection guide
    resourceExists
      ΓêÜ should return true for existing resources (1 ms)
      ΓêÜ should return false for non-existing resources (1 ms)
    getResourceContent
      ΓêÜ should throw error for non-existent resource (21 ms)
      ΓêÜ should return content for WIQL quick reference (4 ms)
      ΓêÜ should return content for OData quick reference (1 ms)
      ΓêÜ should return content for hierarchy patterns (2 ms)
      ΓêÜ should return content for common workflows (2 ms)
      ΓêÜ should return content for tool selection guide (2 ms)
      ΓêÜ WIQL reference should contain essential query patterns (2 ms)
      ΓêÜ OData reference should contain query types (2 ms)
      ΓêÜ tool selection guide should list all major tools (2 ms)

  console.error
    [INFO] Getting info for query handle: qh_88327e57e4c6968791b21b02e5152993 (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:141:49)

  console.error
    [INFO] Getting info for query handle: qh_27434633a50fec2372f3959950237766 (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:162:49)

  console.error
    [INFO] Getting info for query handle: qh_1c121394a94f6f9a74ba2be444b40a73 (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:184:49)

  console.error
    [INFO] Getting info for query handle: qh_3589fa7680cb1f2daf3d60835e2a1da0 (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:199:49)

  console.error
    [INFO] Getting info for query handle: qh_f156c21c9c375dd94878f08207ef4c50 (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:215:49)

  console.error
    [INFO] Getting info for query handle: qh_4b8c0cc968295e556aaa1df07d2585f3 (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:231:49)

  console.error
    [INFO] Getting info for query handle: qh_48e1bcbf20d22abad0e0d27e053419fa (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:248:49)

  console.error
    [INFO] Getting info for query handle: qh_f8f1ea27c1f21c9e8ea75edcc1392efe (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:266:49)

  console.error
    [INFO] Getting info for query handle: qh_ce5944c251fd672a14a3a2aad50e00e3 (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:282:49)

  console.error
    [INFO] Getting info for query handle: qh_16f5927c6706fae54deb38d892fd3cb7 (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:298:49)

  console.error
    [INFO] Getting info for query handle: qh_241095cc8eac879ee9f21f275b09cfdc (1 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:346:49)

  console.error
    [INFO] Getting info for query handle: qh_b49a85b6e5a3df668e42893c62e49168 (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:360:49)

PASS test/unit/openapi-generation.test.ts
  OpenAPI Generation
    OpenAPI Specification
      ΓêÜ should have OpenAPI 3.0.0 format (1 ms)
      ΓêÜ should have info section with title and version (1 ms)
      ΓêÜ should have contact information (1 ms)
      ΓêÜ should have MIT license
      ΓêÜ should have servers defined (1 ms)
      ΓêÜ should have tags for categorization (1 ms)
      ΓêÜ should have paths for tools (1 ms)
      ΓêÜ should have properly formatted tool paths (5 ms)
      ΓêÜ should have POST operations for all tools (19 ms)
      ΓêÜ should have request body schemas (17 ms)
      ΓêÜ should have response schemas (12 ms)
      ΓêÜ should mark AI-powered tools correctly (1 ms)
    Individual Schemas
      ΓêÜ should have schema index (2 ms)
      ΓêÜ should have generation metadata
      ΓêÜ should have schema files for all tools
    Schema Consistency
      ΓêÜ should have matching number of paths and schemas (1 ms)
      ΓêÜ should have consistent tool names (4 ms)

  console.error
    [INFO] Getting info for query handle: qh_93eb1a68380329e283e262e9d5b3d1be (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:75:12)
      at Object.<anonymous> (src/test/query-handle-info.test.ts:375:49)

PASS src/test/query-handle-info.test.ts
  Query Handle Info Handler
    Basic Mode (detailed=false)
      ΓêÜ should return basic inspection data by default (14 ms)
      ΓêÜ should include item preview by default (5 ms)
      ΓêÜ should include selection hints (4 ms)
      ΓêÜ should include statistics when includeStats=true (6 ms)
      ΓêÜ should NOT include validation or selection analysis in basic mode (4 ms)
    Detailed Mode (detailed=true)
      ΓêÜ should include validation data when detailed=true (4 ms)
      ΓêÜ should include selection analysis when detailed=true and itemSelector provided (5 ms)
      ΓêÜ should handle "all" itemSelector (5 ms)
      ΓêÜ should handle criteria-based itemSelector (4 ms)
      ΓêÜ should fetch sample items when detailed=true and includeSampleItems=true (7 ms)
    Error Handling
      ΓêÜ should return error for invalid query handle (1 ms)
      ΓêÜ should return validation error for missing queryHandle (1 ms)
    Expiration Warnings
      ΓêÜ should warn when query handle is about to expire (4 ms)
    Metadata
      ΓêÜ should include correct metadata (4 ms)
      ΓêÜ should reflect detailed mode in metadata (5 ms)

PASS src/test/validation-errors.test.ts
  Schema Validation Error Messages
    String validation with custom messages
      ΓêÜ should provide helpful error for empty string with min constraint (2 ms)
      ΓêÜ should provide helpful error for empty required string
    Number validation with custom messages
      ΓêÜ should provide helpful error for negative number when positive required (1 ms)
      ΓêÜ should provide helpful error for non-integer number (1 ms)
      ΓêÜ should provide helpful error for value exceeding max (1 ms)
      ΓêÜ should provide helpful error for value below min (1 ms)
      ΓêÜ should provide helpful error for negative skip value (1 ms)
    Enum validation with custom messages
      ΓêÜ should provide helpful error for invalid enum value with errorMap (1 ms)
      ΓêÜ should provide helpful error for invalid scale type (2 ms)
      ΓêÜ should provide helpful error for invalid format type (1 ms)
    Array validation with custom messages
      ΓêÜ should provide helpful error for array exceeding max length (2 ms)
      ΓêÜ should provide helpful error for empty array when min required (1 ms)
    Range constraints with helpful messages
      ΓêÜ should provide helpful error for sampleSize exceeding limit
      ΓêÜ should provide helpful error for maxIterations out of range
      ΓêÜ should provide helpful error for criteria count constraints (5 ms)
    buildValidationErrorResponse formatting
      ΓêÜ should format Zod errors with field paths and helpful tips (2 ms)
      ΓêÜ should handle single validation error (1 ms)
      ΓêÜ should include received value when available (1 ms)
      ΓêÜ should handle non-Zod errors gracefully
      ΓêÜ should format multiple field errors clearly (2 ms)

PASS src/test/html-field-stripping.test.ts
  HTML Field Stripping Parameters
    Tool configuration
      ΓêÜ should register wit-get-work-item-context-package tool (2 ms)
      ΓêÜ should have includeHtmlFields in input schema
      ΓêÜ should have description mentioning context package

PASS src/test/work-item-repository.test.ts
  WorkItemRepository
    getById
      ΓêÜ should fetch a work item by ID without fields (4 ms)
      ΓêÜ should fetch a work item by ID with specific fields (1 ms)
    getBatch
      ΓêÜ should fetch multiple work items by IDs (1 ms)
      ΓêÜ should handle empty batch response (1 ms)
    create
      ΓêÜ should create a work item with provided fields (1 ms)
      ΓêÜ should URL-encode work item type with spaces
    update
      ΓêÜ should update a work item with provided fields (1 ms)
    delete
      ΓêÜ should soft delete a work item (1 ms)
      ΓêÜ should hard delete a work item (5 ms)
    linkToParent
      ΓêÜ should create parent link relation (2 ms)
    linkToBranch
      ΓêÜ should create branch artifact link (1 ms)
    getRevisions
      ΓêÜ should fetch work item revisions (1 ms)
    executeWiql
      ΓêÜ should execute a WIQL query (1 ms)
    getRepository
      ΓêÜ should fetch repository by exact match (1 ms)
      ΓêÜ should search for repository by name if exact match fails (1 ms)
      ΓêÜ should throw error if repository not found (17 ms)

PASS src/test/inspect-query-handle.test.ts
  Inspect Query Handle Handler
    Enhanced Preview Functionality
      ΓêÜ should return indexed preview with array indices (7 ms)
      ΓêÜ should include tags when present (1 ms)
    Selection Hints
      ΓêÜ should provide selection hints (2 ms)
    Available Selection Criteria
      ΓêÜ should show available selection criteria with counts (3 ms)
      ΓêÜ should show correct item counts for states (1 ms)
      ΓêÜ should show correct item counts for types (1 ms)
    Selection Statistics
      ΓêÜ should include selection statistics (1 ms)
      ΓêÜ should have accurate state statistics (1 ms)
      ΓêÜ should have accurate type statistics (1 ms)
      ΓêÜ should have accurate tag statistics (1 ms)
    Contextual Examples
      ΓêÜ should provide contextual selection examples when includeExamples is true (1 ms)
      ΓêÜ should omit contextual selection examples when includeExamples is false (default) (1 ms)
      ΓêÜ should omit contextual selection examples by default (1 ms)
      ΓêÜ should include stale items example when applicable and includeExamples is true (1 ms)
    Edge Cases
      ΓêÜ should handle expired query handles (1 ms)
      ΓêÜ should handle missing itemContext gracefully
      ΓêÜ should work when includePreview is false (1 ms)
      ΓêÜ should handle items without tags (1 ms)
    Backward Compatibility
      ΓêÜ should maintain legacy preview format (1 ms)
      ΓêÜ should maintain legacy selection_info format (1 ms)
      ΓêÜ should include selection_examples in legacy format when includeExamples is true (2 ms)

PASS src/test/sprint-planner-optional-fields.test.ts
  Sprint Planner Optional Fields
    buildResultFromJSON
      ΓêÜ should omit confidenceLevel when set to "Unknown" (2 ms)
      ΓêÜ should include confidenceLevel when set to valid value (1 ms)
      ΓêÜ should omit balanceMetrics when all scores are 0 (1 ms)
      ΓêÜ should omit balanceMetrics when all assessments are "Not available"
      ΓêÜ should include balanceMetrics when at least one score is non-zero (1 ms)
      ΓêÜ should omit alternativePlans when array is empty (1 ms)
      ΓêÜ should include alternativePlans when valid plans exist (1 ms)
      ΓêÜ should omit alternativePlans when plans are invalid
      ΓêÜ should omit sprintRisks when all arrays are empty (1 ms)
      ΓêÜ should include sprintRisks when at least one array has content (1 ms)
      ΓêÜ should omit dependencies when array is empty
      ΓêÜ should include dependencies when they exist (1 ms)
    buildResultFromText (fallback)
      ΓêÜ should omit confidenceLevel in fallback response (1 ms)
      ΓêÜ should omit balanceMetrics in fallback response
      ΓêÜ should omit alternativePlans in fallback response
      ΓêÜ should include sprintRisks in fallback response (parse error is critical) (2 ms)
      ΓêÜ should omit dependencies in fallback response (1 ms)
    Token savings estimation
      ΓêÜ should demonstrate token savings by omitting empty fields (1 ms)

PASS src/test/validate-hierarchy-fast.test.ts
  Hierarchy Validation Rules
    Parent-Child Type Relationships
      ΓêÜ should define valid child types for Key Result (1 ms)
      ΓêÜ should define valid child types for Epic
      ΓêÜ should define valid child types for Feature (1 ms)
      ΓêÜ should define valid child types for PBI
      ΓêÜ should define no children for leaf nodes (1 ms)
    State Progression Levels
      ΓêÜ should define Initial states as level 1 (1 ms)
      ΓêÜ should define Active states as level 2
      ΓêÜ should define Done states as level 4 (1 ms)
    Orphaned Item Detection
      ΓêÜ should require parent for Feature
      ΓêÜ should require parent for Product Backlog Item (1 ms)
      ΓêÜ should not require parent for Key Result
      ΓêÜ should not require parent for Epic (1 ms)

PASS test/unit/config-types.test.ts
  Configuration Type Safety
    CLIArguments interface
      ΓêÜ should accept valid CLI arguments from yargs (2 ms)
      ΓêÜ should accept minimal CLI arguments (5 ms)
    updateConfigFromCLI function
      ΓêÜ should accept CLIArguments without type errors (1 ms)
      ΓêÜ should properly store CLI arguments for later use (1 ms)
    loadConfiguration function
      ΓêÜ should return properly typed MCPServerConfig (2 ms)
      ΓêÜ should apply proper defaults from schema (1 ms)
      ΓêÜ should handle verbose logging flag (1 ms)
      ΓêÜ should handle optional CLI parameters
    Type safety guarantees
      ΓêÜ should not allow assignment of wrong types to CLIArguments (1 ms)
      ΓêÜ should properly type optional CLI parameters
    No any types in config module
      ΓêÜ should use proper types throughout configuration system

PASS src/test/error-categorization.test.ts
  Error Categorization System
    ErrorCategory enum
      ΓêÜ should define all required categories (3 ms)
    ErrorCode constants
      ΓêÜ should define validation error codes (1 ms)
      ΓêÜ should define authentication error codes
      ΓêÜ should define network error codes (1 ms)
      ΓêÜ should define not found error codes (1 ms)
      ΓêÜ should define rate limit error codes
      ΓêÜ should define permission error codes (1 ms)
    createErrorMetadata
      ΓêÜ should create basic error metadata (1 ms)
      ΓêÜ should include error code when provided (1 ms)
      ΓêÜ should include context when provided
      ΓêÜ should mark network errors as retryable (1 ms)
      ΓêÜ should mark rate limit errors as retryable
      ΓêÜ should mark validation errors as non-retryable
    categorizeError
      ΓêÜ should categorize authentication errors
      ΓêÜ should categorize not found errors
      ΓêÜ should categorize permission errors (1 ms)
      ΓêÜ should categorize network errors (1 ms)
      ΓêÜ should categorize rate limit errors (2 ms)
      ΓêÜ should categorize validation errors
      ΓêÜ should default to unknown for uncategorized errors
      ΓêÜ should handle Error objects
    buildErrorResponse with categorization
      ΓêÜ should include error category in metadata
      ΓêÜ should include error code in metadata when provided (1 ms)
      ΓêÜ should auto-categorize when category not provided
      ΓêÜ should maintain backwards compatibility with existing metadata (1 ms)
      ΓêÜ should preserve error message in errors array
    buildValidationErrorResponse with categorization
      ΓêÜ should categorize as validation error (1 ms)
      ΓêÜ should maintain validation error formatting (1 ms)
    buildAzureCliErrorResponse with categorization
      ΓêÜ should categorize CLI not available as business logic error
      ΓêÜ should categorize not logged in as authentication error
    Helper functions
      buildAuthenticationError
        ΓêÜ should create authentication error response (1 ms)
      buildNetworkError
        ΓêÜ should create network error response
      buildNotFoundError
        ΓêÜ should create not found error for work item (1 ms)
        ΓêÜ should create not found error for project
        ΓêÜ should create not found error for query handle (1 ms)
        ΓêÜ should use generic not found code for unknown resource types
      buildBusinessLogicError
        ΓêÜ should create business logic error response (1 ms)
      buildRateLimitError
        ΓêÜ should create rate limit error with default message (1 ms)
        ΓêÜ should create rate limit error with custom message
      buildPermissionError
        ΓêÜ should create permission error response (1 ms)
    Backwards compatibility
      ΓêÜ should work with existing code that does not provide category (1 ms)
      ΓêÜ should preserve existing metadata fields (1 ms)
    Integration with ToolExecutionResult
      ΓêÜ should create valid ToolExecutionResult structure (2 ms)
      ΓêÜ should maintain consistency across different error types (4 ms)

PASS src/test/resources-integration.test.ts
  Resources Integration
    ΓêÜ should have resources capability enabled (1 ms)
    ΓêÜ should expose resource list handler
    ΓêÜ should expose resource read handler (1 ms)
    ΓêÜ should have all resource files in place (3 ms)

PASS src/test/query-generator-usage.test.ts
  Query Generator Usage Tracking
    Response Structure
      ΓêÜ should not have usage field in data object (1 ms)
      ΓêÜ should accumulate usage across multiple iterations (1 ms)
      ΓêÜ should handle missing usage gracefully
      ΓêÜ should maintain proper response structure for WIQL generator (1 ms)
      ΓêÜ should maintain proper response structure for OData generator (1 ms)
    Token Savings
      ΓêÜ should save approximately 50-100 tokens by not duplicating usage in data (1 ms)

PASS src/test/item-context-enrichment.test.ts
  Item Context Enrichment
    Rich itemContext storage
      ΓêÜ should store complete itemContext with all required fields (2 ms)
      ΓêÜ should handle lastChange fallback when substantive change unavailable
      ΓêÜ should parse tags from semicolon-separated string (1 ms)
      ΓêÜ should handle empty or missing tags
      ΓêÜ should maintain zero-based indices correctly (2 ms)
    Selection metadata generation
      ΓêÜ should generate selectionMetadata with correct structure (1 ms)
      ΓêÜ should deduplicate tags in criteriaTags (1 ms)
      ΓêÜ should handle items with no tags in metadata
    Default values for missing data
      ΓêÜ should use default values when context is missing (1 ms)
      ΓêÜ should use partial context when only some fields provided (3 ms)

PASS test/unit/fixtures-and-factories.test.ts
  Test Fixtures and Factories
    Work Item Fixtures
      ΓêÜ should provide pre-configured work items (4 ms)
      ΓêÜ should provide test identity
    Work Item Factory
      ΓêÜ should create work item with defaults (1 ms)
      ΓêÜ should create work item with overrides (1 ms)
      ΓêÜ should create specific work item types (1 ms)
      ΓêÜ should create parent-child relationships (1 ms)
      ΓêÜ should create multiple work items (2 ms)
      ΓêÜ should create context map from work items (2 ms)
      ΓêÜ should create work item context
    Query Fixtures
      ΓêÜ should provide WIQL query strings
      ΓêÜ should provide WIQL query results
    Query Factory
      ΓêÜ should create query handle
      ΓêÜ should create WIQL result (1 ms)
      ΓêÜ should create WIQL query string (1 ms)
      ΓêÜ should create OData query string
    Response Factory
      ΓêÜ should create success result (1 ms)
      ΓêÜ should create error result (1 ms)
      ΓêÜ should create custom tool execution result
      ΓêÜ should create work items batch (1 ms)
      ΓêÜ should create bulk operation result (1 ms)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
Summary of all failing tests
FAIL src/test/select-items-from-query-handle.test.ts
  ΓùÅ Select Items From Query Handle Handler ΓÇ║ preview functionality ΓÇ║ should cap preview at 50 items

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      356 |       });
      357 |
    > 358 |       expect(result.success).toBe(true);
          |                              ^
      359 |       expect((result.data as any).preview_items).toHaveLength(50);
      360 |     });
      361 |

      at Object.<anonymous> (src/test/select-items-from-query-handle.test.ts:358:30)

  ΓùÅ Select Items From Query Handle Handler ΓÇ║ metadata ΓÇ║ should include relevant metadata in response

    expect(received).toBe(expected) // Object.is equality

    Expected: "qh_fc9b0ab7cd345f4dcdd6485e1b89540e"
    Received: undefined

      412 |       expect(result.success).toBe(true);
      413 |       expect((result.metadata as any).source).toBe('select-items-from-query-handle');
    > 414 |       expect((result.metadata as any).queryHandle).toBe(handle);
          |                                                    ^
      415 |       expect((result.metadata as any).selectedCount).toBe(2);
      416 |       expect((result.metadata as any).totalItems).toBe(3);
      417 |       expect((result.metadata as any).selectionType).toBe('index-based');

      at Object.<anonymous> (src/test/select-items-from-query-handle.test.ts:414:52)

FAIL test/unit/unified-query-generator.test.ts
  ΓùÅ Unified Query Generator Handler ΓÇ║ AI-powered format selection ΓÇ║ should choose WIQL format for state-based queries

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      105 |       );
      106 |
    > 107 |       expect(result.success).toBe(true);
          |                              ^
      108 |       expect(handleGenerateWiqlQuery).toHaveBeenCalled();
      109 |       expect(result.data).toHaveProperty('format', 'wiql');
      110 |     });

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:107:30)

  ΓùÅ Unified Query Generator Handler ΓÇ║ AI-powered format selection ΓÇ║ should choose OData format for aggregation queries

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      134 |       );
      135 |
    > 136 |       expect(result.success).toBe(true);
          |                              ^
      137 |       expect(handleGenerateODataQuery).toHaveBeenCalled();
      138 |       expect(result.data).toHaveProperty('format', 'odata');
      139 |     });

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:136:30)

  ΓùÅ Unified Query Generator Handler ΓÇ║ AI-powered format selection ΓÇ║ should include confidence and reasoning in response

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      150 |       );
      151 |
    > 152 |       expect(result.success).toBe(true);
          |                              ^
      153 |       expect(result.metadata).toHaveProperty('formatDecision');
      154 |       const formatDecision = result.metadata?.formatDecision as any;
      155 |       expect(formatDecision).toMatchObject({

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:152:30)

  ΓùÅ Unified Query Generator Handler ΓÇ║ Parameter forwarding ΓÇ║ should forward all query parameters to delegated handler

    TypeError: Cannot read properties of undefined (reading '1')

      183 |       );
      184 |
    > 185 |       const callArgs = handleGenerateWiqlQuery.mock.calls[0][1];
          |                                                             ^
      186 |       expect(callArgs).toMatchObject({
      187 |         description: 'Find bugs',
      188 |         organization: 'custom-org',

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:185:61)

  ΓùÅ Unified Query Generator Handler ΓÇ║ Error handling ΓÇ║ should return error when sampling not available

    expect(received).toEqual(expected) // deep equality

    Expected: ArrayContaining [StringContaining "sampling"]
    Received: ["Validation error:
      ΓÇó intent: Required (received: \"undefined\")┬╖
    ∩┐╜∩┐╜ Tip: Check parameter types and constraints. See tool description for valid values."]

      238 |
      239 |       expect(result.success).toBe(false);
    > 240 |       expect(result.errors).toEqual(
          |                             ^
      241 |         expect.arrayContaining([expect.stringContaining('sampling')])
      242 |       );
      243 |     });

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:240:29)

  ΓùÅ Unified Query Generator Handler ΓÇ║ Error handling ΓÇ║ should handle malformed AI response gracefully

    expect(received).toEqual(expected) // deep equality

    Expected: ArrayContaining [StringContaining "parse"]
    Received: ["Validation error:
      ΓÇó intent: Required (received: \"undefined\")┬╖
    ∩┐╜∩┐╜ Tip: Check parameter types and constraints. See tool description for valid values."]

      277 |
      278 |       expect(result.success).toBe(false);
    > 279 |       expect(result.errors).toEqual(
          |                             ^
      280 |         expect.arrayContaining([expect.stringContaining('parse')])
      281 |       );
      282 |     });

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:279:29)

  ΓùÅ Unified Query Generator Handler ΓÇ║ AI response parsing ΓÇ║ should handle different AI response structures

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      332 |       );
      333 |
    > 334 |       expect(result.success).toBe(true);
          |                              ^
      335 |       const formatDecision = result.metadata?.formatDecision as any;
      336 |       expect(formatDecision?.reasoning).toHaveLength(3);
      337 |     });

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:334:30)

  ΓùÅ Unified Query Generator Handler ΓÇ║ AI response parsing ΓÇ║ should normalize confidence scores

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      359 |       );
      360 |
    > 361 |       expect(result.success).toBe(true);
          |                              ^
      362 |       // Confidence should be between 0 and 1
      363 |       const formatDecision = result.metadata?.formatDecision as any;
      364 |       if (formatDecision?.confidence) {

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:361:30)

  ΓùÅ Unified Query Generator Handler ΓÇ║ Default parameters ΓÇ║ should use default values for optional parameters

    TypeError: Cannot read properties of undefined (reading '1')

      383 |       );
      384 |
    > 385 |       const callArgs = handleGenerateWiqlQuery.mock.calls[0][1];
          |                                                             ^
      386 |       expect(callArgs.maxIterations).toBe(3);
      387 |       expect(callArgs.includeExamples).toBe(true);
      388 |       expect(callArgs.testQuery).toBe(true);

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:385:61)

  ΓùÅ Unified Query Generator Handler ΓÇ║ Delegation behavior ΓÇ║ should propagate successful results from WIQL handler

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      418 |       );
      419 |
    > 420 |       expect(result.success).toBe(true);
          |                              ^
      421 |       expect(result.data).toMatchObject(expectedResult.data);
      422 |       expect(result.warnings).toContain('Test warning');
      423 |     });

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:420:30)

  ΓùÅ Unified Query Generator Handler ΓÇ║ Delegation behavior ΓÇ║ should propagate errors from delegated handlers

    expect(received).toContain(expected) // indexOf

    Expected value: "Query generation failed"
    Received array: ["Validation error:
      ΓÇó intent: Required (received: \"undefined\")┬╖
    ∩┐╜∩┐╜ Tip: Check parameter types and constraints. See tool description for valid values."]

      444 |
      445 |       expect(result.success).toBe(false);
    > 446 |       expect(result.errors).toContain('Query generation failed');
          |                             ^
      447 |     });
      448 |   });
      449 | });

      at Object.<anonymous> (test/unit/unified-query-generator.test.ts:446:29)

FAIL test/integration/bulk-operations-integration.test.ts (5.034 s)
  ΓùÅ Bulk Operations Integration Tests ΓÇ║ Scenario 1: Sprint Planning - Move and Transition ΓÇ║ should move items to new sprint then transition to active

    expect(received).toBeGreaterThan(expected)

    Matcher error: received value must be a number or bigint

    Received has value: undefined

      186 |
      187 |       expect(moveResult.success).toBe(true);
    > 188 |       expect((moveResult.data as any).successful).toBeGreaterThan(0);
          |                                                   ^
      189 |
      190 |       // 4. Transition items to Active
      191 |       const transitionConfig = {

      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:188:51)

FAIL src/test/bulk-update-by-query-handle.test.ts (5.064 s)
  ΓùÅ Bulk Update By Query Handle Handler ΓÇ║ Preview Items ΓÇ║ should show preview of first 5 selected items

    expect(received).toHaveLength(expected)

    Expected length: 5
    Received length: 8
    Received array:  [{"index": 0, "state": "New", "title": "Item 1", "type": "Task", "work_item_id": 1}, {"index": 1, "state": "Active", "title": "Item 2", "type": "Task", "work_item_id": 2}, {"index": 2, "state": "New", "title": "Item 3", "type": "Task", "work_item_id": 3}, {"index": 3, "state": "Active", "title": "Item 4", "type": "Task", "work_item_id": 4}, {"index": 4, "state": "New", "title": "Item 5", "type": "Task", "work_item_id": 5}, {"index": 5, "state": "Active", "title": "Item 6", "type": "Task", "work_item_id": 6}, {"index": 6, "state": "New", "title": "Item 7", "type": "Task", "work_item_id": 7}, {"index": 7, "state": "Active", "title": "Item 8", "type": "Task", "work_item_id": 8}]

      318 |
      319 |       expect(result.success).toBe(true);
    > 320 |       expect((result.data as any)?.preview_items).toHaveLength(5); // Only first 5
          |                                                   ^
      321 |       expect((result.data as any)?.selected_items_count).toBe(8); // But all 8 selected
      322 |       expect((result.data as any)?.preview_items[0]).toHaveProperty('work_item_id');
      323 |       expect((result.data as any)?.preview_items[0]).toHaveProperty('title');

      at Object.<anonymous> (src/test/bulk-update-by-query-handle.test.ts:320:51)

FAIL test/unit/bulk-move-iteration.test.ts (5.141 s)
  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Item selection ΓÇ║ should move only selected items by index

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      152 |       });
      153 |
    > 154 |       expect(result.success).toBe(true);
          |                              ^
      155 |       expect((result.data as any).selected_items_count).toBe(2);
      156 |       expect((result.data as any).total_items_in_handle).toBe(5);
      157 |     });

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:154:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Item selection ΓÇ║ should move items matching criteria

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      181 |       });
      182 |
    > 183 |       expect(result.success).toBe(true);
          |                              ^
      184 |       expect((result.data as any).selected_items_count).toBe(2); // Tasks 1 and 3
      185 |     });
      186 |

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:183:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Item selection ΓÇ║ should move all items when selector is "all"

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      209 |       });
      210 |
    > 211 |       expect(result.success).toBe(true);
          |                              ^
      212 |       expect((result.data as any).selected_items_count).toBe(3);
      213 |     });
      214 |   });

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:211:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Dry run mode ΓÇ║ should show preview without making changes

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      237 |       });
      238 |
    > 239 |       expect(result.success).toBe(true);
          |                              ^
      240 |       expect((result.data as any).dry_run).toBe(true);
      241 |       expect((result.data as any).preview).toBeDefined();
      242 |       expect((result.data as any).preview).toHaveLength(2);

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:239:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Dry run mode ΓÇ║ should limit preview to maxPreviewItems

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      269 |       });
      270 |
    > 271 |       expect(result.success).toBe(true);
          |                              ^
      272 |       expect((result.data as any).preview).toHaveLength(5);
      273 |       expect((result.data as any).selected_items_count).toBe(15);
      274 |     });

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:271:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Dry run mode ΓÇ║ should show current iteration path in preview

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      296 |       });
      297 |
    > 298 |       expect(result.success).toBe(true);
          |                              ^
      299 |       expect((result.data as any).preview[0].current_iteration).toBe('TestProject\\Sprint 10');
      300 |       expect((result.data as any).preview[1].current_iteration).toBe('TestProject\\Backlog');
      301 |     });

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:298:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Execution mode ΓÇ║ should handle partial failures

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      414 |       });
      415 |
    > 416 |       expect(result.success).toBe(true);
          |                              ^
      417 |       expect((result.data as any).items_succeeded).toBe(1);
      418 |       expect((result.data as any).items_failed).toBe(1);
      419 |       expect(result.warnings).toEqual(

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:416:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Error handling ΓÇ║ should return error when no items selected

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      545 |       });
      546 |
    > 547 |       expect(result.success).toBe(false);
          |                              ^
      548 |       expect(result.errors).toEqual(
      549 |         expect.arrayContaining([expect.stringContaining('No items')])
      550 |       );

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:547:30)

  ΓùÅ Bulk Move to Iteration Handler ΓÇ║ Edge cases ΓÇ║ should handle empty workItemContext gracefully

    TypeError: Cannot read properties of undefined (reading '0')

      602 |
      603 |       expect(result.success).toBe(true);
    > 604 |       expect((result.data as any).preview[0].current_iteration).toMatch(/Not set|Unknown/);
          |                                          ^
      605 |     });
      606 |   });
      607 | });

      at Object.<anonymous> (test/unit/bulk-move-iteration.test.ts:604:42)

FAIL test/unit/context-packages-by-handle.test.ts (5.338 s)
  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Basic retrieval ΓÇ║ should retrieve context packages for all items

    expect(received).toBe(expected) // Object.is equality

    Expected: 3
    Received: 0

      89 |       expect(result.success).toBe(true);
      90 |       expect((result.data as any).selected_items_count).toBe(3);
    > 91 |       expect((result.data as any).fetched_packages_count).toBe(3);
         |                                                           ^
      92 |       expect((result.data as any).context_packages).toHaveLength(3);
      93 |     });
      94 |

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:91:59)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Basic retrieval ΓÇ║ should retrieve context packages for selected indices

    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 0
    Received array:  []

      117 |       expect(result.success).toBe(true);
      118 |       expect((result.data as any).selected_items_count).toBe(3);
    > 119 |       expect((result.data as any).context_packages).toHaveLength(3);
          |                                                     ^
      120 |     });
      121 |
      122 |     it('should retrieve context packages matching criteria', async () => {

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:119:53)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Basic retrieval ΓÇ║ should retrieve context packages matching criteria

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

      144 |       expect(result.success).toBe(true);
      145 |       expect((result.data as any).selected_items_count).toBe(2); // Bugs 1 and 3
    > 146 |       expect((result.data as any).context_packages).toHaveLength(2);
          |                                                     ^
      147 |     });
      148 |   });
      149 |

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:146:53)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Preview limiting ΓÇ║ should limit to maxPreviewItems

    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: 0

      174 |       expect(result.success).toBe(true);
      175 |       expect((result.data as any).selected_items_count).toBe(20);
    > 176 |       expect((result.data as any).fetched_packages_count).toBe(5);
          |                                                           ^
      177 |       expect((result.data as any).context_packages).toHaveLength(5);
      178 |       expect(result.warnings).toEqual(
      179 |         expect.arrayContaining([expect.stringContaining('limiting to 5')])

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:176:59)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Preview limiting ΓÇ║ should use default maxPreviewItems of 10

    expect(received).toBe(expected) // Object.is equality

    Expected: 10
    Received: 0

      205 |
      206 |       expect(result.success).toBe(true);
    > 207 |       expect((result.data as any).fetched_packages_count).toBe(10);
          |                                                           ^
      208 |       expect((result.data as any).context_packages).toHaveLength(10);
      209 |     });
      210 |   });

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:207:59)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Optional parameters ΓÇ║ should support includeHistory parameter

    TypeError: Cannot read properties of undefined (reading 'includeHistory')

      235 |
      236 |       const callArgs = handleGetWorkItemContextPackage.mock.calls[0][1];
    > 237 |       expect(callArgs.includeHistory).toBe(true);
          |                       ^
      238 |       expect(callArgs.maxHistoryRevisions).toBe(10);
      239 |     });
      240 |

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:237:23)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Optional parameters ΓÇ║ should support includeComments parameter

    TypeError: Cannot read properties of undefined (reading 'includeComments')

      262 |
      263 |       const callArgs = handleGetWorkItemContextPackage.mock.calls[0][1];
    > 264 |       expect(callArgs.includeComments).toBe(false);
          |                       ^
      265 |     });
      266 |
      267 |     it('should support includeRelations parameter', async () => {

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:264:23)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Optional parameters ΓÇ║ should support includeRelations parameter

    TypeError: Cannot read properties of undefined (reading 'includeRelations')

      288 |
      289 |       const callArgs = handleGetWorkItemContextPackage.mock.calls[0][1];
    > 290 |       expect(callArgs.includeRelations).toBe(false);
          |                       ^
      291 |     });
      292 |
      293 |     it('should support includeChildren and includeParent parameters', async () => {

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:290:23)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Optional parameters ΓÇ║ should support includeChildren and includeParent parameters

    TypeError: Cannot read properties of undefined (reading 'includeChildren')

      315 |
      316 |       const callArgs = handleGetWorkItemContextPackage.mock.calls[0][1];
    > 317 |       expect(callArgs.includeChildren).toBe(false);
          |                       ^
      318 |       expect(callArgs.includeParent).toBe(false);
      319 |     });
      320 |

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:317:23)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Optional parameters ΓÇ║ should support includeExtendedFields parameter

    TypeError: Cannot read properties of undefined (reading 'includeExtendedFields')

      342 |
      343 |       const callArgs = handleGetWorkItemContextPackage.mock.calls[0][1];
    > 344 |       expect(callArgs.includeExtendedFields).toBe(true);
          |                       ^
      345 |     });
      346 |   });
      347 |

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:344:23)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Edge cases ΓÇ║ should handle maxPreviewItems larger than selection

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 0

      635 |
      636 |       expect(result.success).toBe(true);
    > 637 |       expect((result.data as any).fetched_packages_count).toBe(2);
          |                                                           ^
      638 |       expect((result.data as any).context_packages).toHaveLength(2);
      639 |       expect(result.warnings).toHaveLength(0); // No warning about limiting
      640 |     });

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:637:59)

  ΓùÅ Get Context Packages By Query Handle Handler ΓÇ║ Configuration parameters ΓÇ║ should use organization and project from parameters

    TypeError: Cannot read properties of undefined (reading 'organization')

      666 |
      667 |       const callArgs = handleGetWorkItemContextPackage.mock.calls[0][1];
    > 668 |       expect(callArgs.organization).toBe('custom-org');
          |                       ^
      669 |       expect(callArgs.project).toBe('custom-project');
      670 |     });
      671 |   });

      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:668:23)

FAIL test/unit/bulk-transition-state.test.ts (5.317 s)
  ΓùÅ Bulk Transition State Handler ΓÇ║ State transition validation ΓÇ║ should validate valid state transitions

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      111 |
      112 |       expect(result.success).toBe(true);
    > 113 |       expect((result.data as any).validation_passed).toBe(true);
          |                                                      ^
      114 |       expect((result.data as any).selected_items_count).toBe(3);
      115 |     });
      116 |

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:113:54)

  ΓùÅ Bulk Transition State Handler ΓÇ║ State transition validation ΓÇ║ should detect invalid state transitions

    expect(received).toEqual(expected) // deep equality

    Expected: ArrayContaining [StringContaining "Removed"]
    Received: ["Work item 101: Work item already in target state 'Active'"]

      137 |
      138 |       expect(result.success).toBe(true);
    > 139 |       expect(result.warnings).toEqual(
          |                               ^
      140 |         expect.arrayContaining([expect.stringContaining('Removed')])
      141 |       );
      142 |     });

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:139:31)

  ΓùÅ Bulk Transition State Handler ΓÇ║ State transition validation ΓÇ║ should allow transitions between common states

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      166 |
      167 |       expect(result.success).toBe(true);
    > 168 |       expect((result.data as any).validation_passed).toBe(true);
          |                                                      ^
      169 |     });
      170 |   });
      171 |

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:168:54)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Item selection ΓÇ║ should transition only selected items by index

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: undefined

      198 |       expect((result.data as any).selected_items_count).toBe(3);
      199 |       expect((result.data as any).total_items_in_handle).toBe(5);
    > 200 |       expect((result.data as any).preview).toHaveLength(3);
          |                                            ^
      201 |     });
      202 |
      203 |     it('should transition items matching criteria', async () => {

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:200:44)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Item selection ΓÇ║ should return error when no items selected

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      251 |       });
      252 |
    > 253 |       expect(result.success).toBe(false);
          |                              ^
      254 |       expect(result.errors).toEqual(
      255 |         expect.arrayContaining([expect.stringContaining('No items')])
      256 |       );

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:253:30)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Dry run mode ΓÇ║ should show preview without making changes

    expect(received).toBeDefined()

    Received: undefined

      285 |       expect(result.success).toBe(true);
      286 |       expect((result.data as any).dry_run).toBe(true);
    > 287 |       expect((result.data as any).preview).toBeDefined();
          |                                            ^
      288 |       expect(result.warnings).toContain('Dry run mode - no changes made');
      289 |     });
      290 |

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:287:44)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Dry run mode ΓÇ║ should limit preview items to maxPreviewItems

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: undefined

      315 |
      316 |       expect(result.success).toBe(true);
    > 317 |       expect((result.data as any).preview).toHaveLength(5);
          |                                            ^
      318 |       expect((result.data as any).selected_items_count).toBe(20);
      319 |     });
      320 |   });

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:317:44)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Execution mode ΓÇ║ should transition work items successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      350 |       });
      351 |
    > 352 |       expect(result.success).toBe(true);
          |                              ^
      353 |       expect((result.data as any).items_succeeded).toBe(2);
      354 |       expect((result.data as any).items_failed).toBe(0);
      355 |       expect(mockPatch).toHaveBeenCalledTimes(2);

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:352:30)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Execution mode ΓÇ║ should handle partial failures gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      385 |       });
      386 |
    > 387 |       expect(result.success).toBe(true);
          |                              ^
      388 |       expect((result.data as any).items_succeeded).toBe(1);
      389 |       expect((result.data as any).items_failed).toBe(1);
      390 |       expect(result.warnings).toEqual(

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:387:30)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Optional parameters ΓÇ║ should include reason when provided

    TypeError: Cannot read properties of undefined (reading '1')

      424 |
      425 |       const patchCall = mockPatch.mock.calls[0];
    > 426 |       expect(patchCall[1]).toEqual(
          |                       ^
      427 |         expect.arrayContaining([
      428 |           expect.objectContaining({
      429 |             path: '/fields/System.Reason',

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:426:23)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Optional parameters ΓÇ║ should include comment when provided

    TypeError: Cannot read properties of undefined (reading '1')

      463 |
      464 |       const patchCall = mockPatch.mock.calls[0];
    > 465 |       expect(patchCall[1]).toEqual(
          |                       ^
      466 |         expect.arrayContaining([
      467 |           expect.objectContaining({
      468 |             path: '/fields/System.History',

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:465:23)

  ΓùÅ Bulk Transition State Handler ΓÇ║ Edge cases ΓÇ║ should handle items already in target state

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      575 |       });
      576 |
    > 577 |       expect(result.success).toBe(true);
          |                              ^
      578 |       expect(result.warnings).toEqual(
      579 |         expect.arrayContaining([expect.stringContaining('already in target state')])
      580 |       );

      at Object.<anonymous> (test/unit/bulk-transition-state.test.ts:577:30)


Test Suites: 7 failed, 35 passed, 42 total
Tests:       48 failed, 567 passed, 615 total
Snapshots:   0 total
Time:        8.751 s, estimated 12 s
Ran all test suites.
