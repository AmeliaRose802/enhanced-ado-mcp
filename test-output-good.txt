
> enhanced-ado-mcp-server@1.10.1 test
> jest

  console.error
    [INFO] Query Handle Service initialized at 2025-10-30T21:23:38.579Z

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:119:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (test/unit/query-handle-service.test.ts:9:1)

  console.error
    [INFO] Query handle expiration: 30 minutes (max: 120 minutes)

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:120:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (test/unit/query-handle-service.test.ts:9:1)

PASS test/unit/sampling-feature.test.ts (5.88 s)
  Work Item Intelligence Analyzer with AI Sampling
    Î“ÃªÃœ should perform full AI analysis with sampling support (14 ms)
    Î“ÃªÃœ should perform AI readiness analysis (1 ms)
    Î“ÃªÃœ should perform enhancement analysis with minimal input (2 ms)
    Î“ÃªÃœ should fallback gracefully without sampling support (1 ms)
    Î“ÃªÃœ should reject invalid analysis type (21 ms)

  console.error
    [WARN] Query handle 'qh_nonexistent' not found. Server started at 2025-10-30T21:23:38.579Z. Currently tracking 0 active handles. Note: Handles are lost if MCP server restarts.

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.warn (src/utils/logger.ts:29:15)
      at QueryHandleService.getWorkItemIds (src/services/query-handle-service.ts:204:14)
      at Object.<anonymous> (test/unit/query-handle-service.test.ts:108:44)

  console.error
    [WARN] Query handle 'qh_ba1f6a14e273e074bba0f284850106a1' expired. Created at 2025-10-30T21:23:38.753Z, expired at 2025-10-30T21:23:38.754Z, age: 0 minutes

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.warn (src/utils/logger.ts:29:15)
      at QueryHandleService.getWorkItemIds (src/services/query-handle-service.ts:214:14)
      at Timeout._onTimeout (test/unit/query-handle-service.test.ts:119:48)

  console.error
    [WARN] Query handle 'qh_7005dd867238c5e23d641f4be5c1c07e' not found. Server started at 2025-10-30T21:23:38.579Z. Currently tracking 0 active handles. Note: Handles are lost if MCP server restarts.

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.warn (src/utils/logger.ts:29:15)
      at QueryHandleService.getWorkItemIds (src/services/query-handle-service.ts:204:14)
      at Object.<anonymous> (test/unit/query-handle-service.test.ts:152:44)

PASS test/unit/wiql-query.test.ts (5.976 s)
  WIQL Query Tool
    Î“ÃªÃœ should execute basic WIQL query (14 ms)
    Î“ÃªÃœ should handle pagination - first page (1 ms)
    Î“ÃªÃœ should handle pagination - second page (1 ms)
    Î“ÃªÃœ should omit pagination for single-page results (1 ms)
    Î“ÃªÃœ should include pagination when includePaginationDetails=true (1 ms)
    Î“ÃªÃœ should include pagination for multi-page results
    Î“ÃªÃœ should handle errors gracefully

FAIL test/unit/query-handle-service.test.ts (6.04 s)
  Query Handle Service
    storeQuery
      Î“ÃªÃœ should generate unique handles (14 ms)
      Î“ÃªÃœ should store work item IDs (2 ms)
      Î“ÃªÃœ should store metadata (1 ms)
    getWorkItemIds
      Î“ÃªÃœ should retrieve stored work item IDs
      Î“ÃªÃœ should return null for non-existent handle (10 ms)
      Î“ÃªÃœ should return null for expired handle (24 ms)
    getQueryData
      Î“ÃªÃœ should return full query data (1 ms)
    deleteHandle
      Î“ÃªÃœ should delete handle (3 ms)
      Î“ÃªÃœ should return false for non-existent handle (1 ms)
    getStats
      Î“ÃªÃœ should return accurate statistics (21 ms)
    cleanup
      Î“ÃªÃœ should remove expired handles (16 ms)
    TTL behavior
      â”œÃ¹ should use default TTL (1 hour) (2 ms)
      Î“ÃªÃœ should use custom TTL (1 ms)
    clearAll
      Î“ÃªÃœ should remove all handles (1 ms)
    itemSelector functionality
      getItemsByIndices
        Î“ÃªÃœ should return work items by indices (1 ms)
        Î“ÃªÃœ should filter invalid indices (1 ms)
        Î“ÃªÃœ should return empty array for all invalid indices
        Î“ÃªÃœ should return null for invalid handle
      getItemsByCriteria
        Î“ÃªÃœ should filter by states
        Î“ÃªÃœ should filter by daysInactive range (1 ms)
        Î“ÃªÃœ should filter by title contains
        Î“ÃªÃœ should filter by tags (1 ms)
        Î“ÃªÃœ should combine multiple criteria
        Î“ÃªÃœ should return empty array when no items match
        Î“ÃªÃœ should return null for invalid handle
      getSelectableIndices
        Î“ÃªÃœ should return selectable indices
        Î“ÃªÃœ should return null for invalid handle (1 ms)
      getItemContext
        Î“ÃªÃœ should return item context by index
        Î“ÃªÃœ should return item context for different indices (1 ms)
        Î“ÃªÃœ should return null for out-of-bounds index
        Î“ÃªÃœ should return null for negative index
        Î“ÃªÃœ should return null for invalid handle
      resolveItemSelector
        Î“ÃªÃœ should resolve "all" selector
        Î“ÃªÃœ should resolve index array selector (1 ms)
        Î“ÃªÃœ should resolve criteria selector
        Î“ÃªÃœ should return null for invalid handle
      itemContext creation
        Î“ÃªÃœ should create itemContext array from workItemContext (1 ms)
        Î“ÃªÃœ should create selectionMetadata (1 ms)

  Î“Ã¹Ã… Query Handle Service Î“Ã‡â•‘ TTL behavior Î“Ã‡â•‘ should use default TTL (1 hour)

    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 3599900
    Received:    1800000

      207 |       expect(data).not.toBeNull();
      208 |       const ttl = data!.expiresAt.getTime() - data!.createdAt.getTime();
    > 209 |       expect(ttl).toBeGreaterThanOrEqual(60 * 60 * 1000 - 100); // Allow 100ms tolerance
          |                   ^
      210 |       expect(ttl).toBeLessThanOrEqual(60 * 60 * 1000 + 100);
      211 |     });
      212 |

      at Object.<anonymous> (test/unit/query-handle-service.test.ts:209:19)

PASS test/unit/metrics-service.test.ts (6.021 s)
  MetricsService
    Counter Operations
      Î“ÃªÃœ should increment counter by default value of 1 (24 ms)
      Î“ÃªÃœ should increment counter by specified value (1 ms)
      Î“ÃªÃœ should accumulate multiple increments (1 ms)
      Î“ÃªÃœ should handle counters with tags (1 ms)
      Î“ÃªÃœ should return 0 for non-existent counter
    Histogram Operations
      Î“ÃªÃœ should record duration values (1 ms)
      Î“ÃªÃœ should calculate percentiles correctly (1 ms)
      Î“ÃªÃœ should handle single value histogram (1 ms)
      Î“ÃªÃœ should limit histogram size (2 ms)
      Î“ÃªÃœ should return undefined for non-existent histogram
    Gauge Operations
      Î“ÃªÃœ should set and get gauge value (1 ms)
      Î“ÃªÃœ should overwrite previous gauge value
      Î“ÃªÃœ should handle gauges with tags (1 ms)
      Î“ÃªÃœ should return undefined for non-existent gauge
    Snapshot Operations
      Î“ÃªÃœ should return complete metrics snapshot (2 ms)
      Î“ÃªÃœ should include timestamp in snapshot (1 ms)
    Reset Operations
      Î“ÃªÃœ should clear all metrics on reset (1 ms)
    Uptime Tracking
      Î“ÃªÃœ should track uptime in seconds (115 ms)
      Î“ÃªÃœ should reset uptime on reset (110 ms)
    Tag Handling
      Î“ÃªÃœ should sort tags consistently (19 ms)
      Î“ÃªÃœ should handle empty tags object (1 ms)

PASS test/unit/rate-limiter.test.ts (6.175 s)
  RateLimiter
    Basic Throttling
      Î“ÃªÃœ should allow requests within capacity (23 ms)
      Î“ÃªÃœ should throttle when capacity exhausted (114 ms)
      Î“ÃªÃœ should refill tokens over time (204 ms)
    Multiple Keys
      Î“ÃªÃœ should handle separate buckets for different keys (1 ms)
      Î“ÃªÃœ should track stats per key (1 ms)
    Reset Operations
      Î“ÃªÃœ should reset specific key (1 ms)
      Î“ÃªÃœ should reset all keys (1 ms)
    Statistics
      Î“ÃªÃœ should return null for non-existent key
      Î“ÃªÃœ should report remaining tokens (1 ms)

  console.error
    [INFO] Query Handle Service initialized at 2025-10-30T21:23:39.032Z

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:119:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (test/factories/query-factory.ts:9:1)
      at Object.<anonymous> (test/unit/fixtures-and-factories.test.ts:24:1)

  console.error
    [INFO] Query handle expiration: 30 minutes (max: 120 minutes)

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:120:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (test/factories/query-factory.ts:9:1)
      at Object.<anonymous> (test/unit/fixtures-and-factories.test.ts:24:1)

  console.error
    [INFO] Query Handle Service initialized at 2025-10-30T21:23:39.159Z

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:119:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (test/unit/query-handle-selection.test.ts:7:1)

  console.error
    [INFO] Query handle expiration: 30 minutes (max: 120 minutes)

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:120:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (test/unit/query-handle-selection.test.ts:7:1)

PASS test/unit/fixtures-and-factories.test.ts
  Test Fixtures and Factories
    Work Item Fixtures
      Î“ÃªÃœ should provide pre-configured work items (1 ms)
      Î“ÃªÃœ should provide test identity (1 ms)
    Work Item Factory
      Î“ÃªÃœ should create work item with defaults (1 ms)
      Î“ÃªÃœ should create work item with overrides (1 ms)
      Î“ÃªÃœ should create specific work item types (1 ms)
      Î“ÃªÃœ should create parent-child relationships (1 ms)
      Î“ÃªÃœ should create multiple work items (3 ms)
      Î“ÃªÃœ should create context map from work items (1 ms)
      Î“ÃªÃœ should create work item context (1 ms)
    Query Fixtures
      Î“ÃªÃœ should provide WIQL query strings (1 ms)
      Î“ÃªÃœ should provide WIQL query results (1 ms)
    Query Factory
      Î“ÃªÃœ should create query handle (1 ms)
      Î“ÃªÃœ should create WIQL result (1 ms)
      Î“ÃªÃœ should create WIQL query string (1 ms)
      Î“ÃªÃœ should create OData query string (1 ms)
    Response Factory
      Î“ÃªÃœ should create success result
      Î“ÃªÃœ should create error result (1 ms)
      Î“ÃªÃœ should create custom tool execution result (5 ms)
      Î“ÃªÃœ should create work items batch
      Î“ÃªÃœ should create bulk operation result (1 ms)

PASS test/unit/query-handle-selection.test.ts
  Query Handle Selection Integration Tests
    Index-based Selection
      Î“ÃªÃœ should select items by zero-based indices (1 ms)
      Î“ÃªÃœ should handle out-of-bounds indices gracefully
      Î“ÃªÃœ should handle empty index array (1 ms)
      Î“ÃªÃœ should return null for invalid handle
      Î“ÃªÃœ should filter out negative indices (1 ms)
      Î“ÃªÃœ should handle duplicate indices
      Î“ÃªÃœ should handle selection from empty query result (1 ms)
    Criteria-based Selection
      Î“ÃªÃœ should filter by state
      Î“ÃªÃœ should filter by tags (1 ms)
      Î“ÃªÃœ should filter by title keywords
      Î“ÃªÃœ should filter by staleness (daysInactive)
      Î“ÃªÃœ should combine multiple criteria with AND logic (1 ms)
      Î“ÃªÃœ should return null for invalid handle
      Î“ÃªÃœ should return empty array when criteria matches no items (1 ms)
      Î“ÃªÃœ should filter by multiple states (1 ms)
      Î“ÃªÃœ should filter by multiple tags
      Î“ÃªÃœ should filter by daysInactiveMin only (1 ms)
      Î“ÃªÃœ should filter by daysInactiveMax only
      Î“ÃªÃœ should return all items when empty criteria is provided (1 ms)
      Î“ÃªÃœ should handle special characters in title search
      Î“ÃªÃœ should handle tags with spaces and special characters (1 ms)
      Î“ÃªÃœ should handle case-insensitive title search
      Î“ÃªÃœ should handle case-insensitive tag search (1 ms)
    Unified Item Selector Resolution
      Î“ÃªÃœ should handle "all" selector
      Î“ÃªÃœ should handle index array selector (1 ms)
      Î“ÃªÃœ should handle criteria object selector
      Î“ÃªÃœ should return null for invalid handle (1 ms)
      Î“ÃªÃœ should handle invalid selector type gracefully
    Edge Cases and Expiration
      Î“ÃªÃœ should return null for expired handles
      Î“ÃªÃœ should handle selection with missing itemContext gracefully (1 ms)
    Performance Tests
      Î“ÃªÃœ should handle selection from large itemContext (1000+ items) (3 ms)
      Î“ÃªÃœ should handle complex criteria with many conditions on large dataset (3 ms)
      Î“ÃªÃœ should handle index array with many indices (1 ms)
      Î“ÃªÃœ should efficiently filter large datasets with criteria (3 ms)

  console.error
    [INFO] Query Handle Service initialized at 2025-10-30T21:23:39.192Z

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:119:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (test/unit/item-context-enrichment.test.ts:13:1)

  console.error
    [INFO] Query handle expiration: 30 minutes (max: 120 minutes)

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:120:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (test/unit/item-context-enrichment.test.ts:13:1)

PASS test/unit/item-context-enrichment.test.ts
  Item Context Enrichment
    Rich itemContext storage
      Î“ÃªÃœ should store complete itemContext with all required fields (4 ms)
      Î“ÃªÃœ should handle lastChange fallback when substantive change unavailable
      Î“ÃªÃœ should parse tags from semicolon-separated string (1 ms)
      Î“ÃªÃœ should handle empty or missing tags
      Î“ÃªÃœ should maintain zero-based indices correctly (1 ms)
    Selection metadata generation
      Î“ÃªÃœ should generate selectionMetadata with correct structure (1 ms)
      Î“ÃªÃœ should deduplicate tags in criteriaTags (1 ms)
      Î“ÃªÃœ should handle items with no tags in metadata (1 ms)
    Default values for missing data
      Î“ÃªÃœ should use default values when context is missing (1 ms)
      Î“ÃªÃœ should use partial context when only some fields provided

PASS test/unit/create-item-multi-area.test.ts (6.471 s)
  Work Item Creation with Multiple Area Paths
    Single Area Path (Backward Compatible)
      Î“ÃªÃœ should use configured area path as default (18 ms)
      Î“ÃªÃœ should allow creating work items without explicit area path (2 ms)
    Multiple Area Paths Configured
      Î“ÃªÃœ should require explicit area path when multiple configured (2 ms)
      Î“ÃªÃœ should validate area path is in configured list (1 ms)
      Î“ÃªÃœ should accept area path from configured list (2 ms)
      Î“ÃªÃœ should provide helpful error message listing valid area paths (1 ms)
    Area Path Validation Logic
      Î“ÃªÃœ should use first area path as fallback when none specified (single path) (1 ms)
      Î“ÃªÃœ should warn when using default with multiple paths (1 ms)
      Î“ÃªÃœ should validate format of provided area path
    Integration with Parent Work Items
      Î“ÃªÃœ should inherit parent area path when not specified (1 ms)
      Î“ÃªÃœ should validate inherited area path against configured paths
      Î“ÃªÃœ should reject inherited area path not in configured list (1 ms)
    Error Messages
      Î“ÃªÃœ should provide clear error when area path required but not provided (1 ms)
      Î“ÃªÃœ should provide clear error when invalid area path provided

PASS test/unit/cache-service.test.ts
  CacheService
    Basic Operations
      Î“ÃªÃœ should store and retrieve values (1 ms)
      Î“ÃªÃœ should return null for non-existent keys (1 ms)
      Î“ÃªÃœ should check if key exists
      Î“ÃªÃœ should delete keys
      Î“ÃªÃœ should clear all entries (1 ms)
    TTL Expiration
      Î“ÃªÃœ should expire entries after TTL (165 ms)
      Î“ÃªÃœ should not expire before TTL (63 ms)
      Î“ÃªÃœ should use default TTL when not specified (1 ms)
    Size Limits
      Î“ÃªÃœ should evict oldest entry when max size reached (1 ms)
      Î“ÃªÃœ should report correct stats (1 ms)
    Data Types
      Î“ÃªÃœ should handle objects (1 ms)
      Î“ÃªÃœ should handle arrays
      Î“ÃªÃœ should handle null values (1 ms)

PASS test/unit/bulk-enhance-descriptions-format.test.ts
  Bulk Enhance Descriptions - Response Format
    Schema Validation
      Î“ÃªÃœ should accept returnFormat parameter with valid values (5 ms)
      Î“ÃªÃœ should reject invalid returnFormat values (1 ms)
      Î“ÃªÃœ should allow returnFormat to be optional (1 ms)
      Î“ÃªÃœ should parse with all parameters including returnFormat (1 ms)
    Default Format Logic
      Î“ÃªÃœ should use summary format by default for dry-run (1 ms)
      Î“ÃªÃœ should use preview format by default for execute mode (1 ms)
    Format Combinations
      Î“ÃªÃœ should allow explicit summary format with dry-run
      Î“ÃªÃœ should allow full format with dry-run (1 ms)
      Î“ÃªÃœ should allow summary format with execute mode (1 ms)
      Î“ÃªÃœ should allow preview format with execute mode (1 ms)
    Response Structure Validation
      Î“ÃªÃœ summary format should omit results array (1 ms)
      Î“ÃªÃœ preview format should include previews without full text (1 ms)
      Î“ÃªÃœ full format should include complete details (1 ms)
    Token Reduction Expectations
      Î“ÃªÃœ summary format should provide significant token reduction
      Î“ÃªÃœ preview format should provide moderate token reduction (1 ms)

PASS test/unit/config-types.test.ts (6.513 s)
  Configuration Type Safety
    CLIArguments interface
      Î“ÃªÃœ should accept valid CLI arguments from yargs (15 ms)
      Î“ÃªÃœ should accept minimal CLI arguments (2 ms)
      Î“ÃªÃœ should accept CLI arguments with area path but no project (1 ms)
    extractProjectFromAreaPath function
      Î“ÃªÃœ should extract project from simple area path (1 ms)
      Î“ÃªÃœ should extract project from multi-level area path
      Î“ÃªÃœ should handle single segment (project only)
      Î“ÃªÃœ should return null for empty string
      Î“ÃªÃœ should return null for null/undefined input
      Î“ÃªÃœ should handle area paths with spaces (1 ms)
      Î“ÃªÃœ should filter empty segments from malformed paths
    updateConfigFromCLI function
      Î“ÃªÃœ should accept CLIArguments without type errors
      Î“ÃªÃœ should properly store CLI arguments for later use (4 ms)
      Î“ÃªÃœ should extract project from area path when project not provided (1 ms)
      Î“ÃªÃœ should throw error if neither project nor area path provided (34 ms)
    loadConfiguration function
      Î“ÃªÃœ should return properly typed MCPServerConfig (2 ms)
      Î“ÃªÃœ should apply proper defaults from schema
      Î“ÃªÃœ should handle verbose logging flag (1 ms)
      Î“ÃªÃœ should handle optional CLI parameters (1 ms)
    Type safety guarantees
      Î“ÃªÃœ should not allow assignment of wrong types to CLIArguments (1 ms)
      Î“ÃªÃœ should properly type optional CLI parameters
    No any types in config module
      Î“ÃªÃœ should use proper types throughout configuration system

PASS test/unit/multi-area-path-support.test.ts (6.54 s)
  Multi-Area Path Support
    CLI Arguments with Multiple Area Paths
      Î“ÃªÃœ should accept multiple area paths via areaPaths array (19 ms)
      Î“ÃªÃœ should normalize single areaPath to areaPaths array (2 ms)
      Î“ÃªÃœ should support backward compatibility with single areaPath (1 ms)
    Project Extraction from Multiple Area Paths
      Î“ÃªÃœ should extract project from multiple area paths (same project) (1 ms)
      Î“ÃªÃœ should error when area paths contain different projects (34 ms)
    Area Path Validation
      Î“ÃªÃœ should reject empty area paths in array (1 ms)
      Î“ÃªÃœ should reject duplicate area paths (1 ms)
      Î“ÃªÃœ should accept valid multiple area paths (1 ms)
    getRequiredConfig with Multiple Area Paths
      Î“ÃªÃœ should return array of area paths in defaultAreaPaths (1 ms)
      Î“ÃªÃœ should normalize single areaPath to defaultAreaPaths array (1 ms)
    Backward Compatibility
      Î“ÃªÃœ should work with existing single area path configurations (1 ms)
      Î“ÃªÃœ should maintain defaultAreaPath for backward compatibility (1 ms)
    Configuration Schema Validation
      Î“ÃªÃœ should validate areaPaths is array of strings
      Î“ÃªÃœ should require organization (1 ms)
      Î“ÃªÃœ should require project or area path (1 ms)

PASS test/unit/resource-service.test.ts
  Resource Service
    listResources
      Î“ÃªÃœ should return all available resources (8 ms)
      Î“ÃªÃœ should include WIQL quick reference (1 ms)
      Î“ÃªÃœ should include OData quick reference (1 ms)
      Î“ÃªÃœ should include hierarchy patterns (1 ms)
      Î“ÃªÃœ should include common workflows
      Î“ÃªÃœ should include tool selection guide
    resourceExists
      Î“ÃªÃœ should return true for existing resources (1 ms)
      Î“ÃªÃœ should return false for non-existing resources (1 ms)
    getResourceContent
      Î“ÃªÃœ should throw error for non-existent resource (29 ms)
      Î“ÃªÃœ should return content for WIQL quick reference (4 ms)
      Î“ÃªÃœ should return content for OData quick reference (2 ms)
      Î“ÃªÃœ should return content for hierarchy patterns (2 ms)
      Î“ÃªÃœ should return content for common workflows (2 ms)
      Î“ÃªÃœ should return content for tool selection guide (2 ms)
      Î“ÃªÃœ WIQL reference should contain essential query patterns (3 ms)
      Î“ÃªÃœ OData reference should contain query types (2 ms)
      Î“ÃªÃœ tool selection guide should list all major tools (2 ms)

PASS test/unit/find-tool-minimization.test.ts
  Tool Discovery Token Minimization
    Schema Definition
      Î“ÃªÃœ should have includeExamples parameter with default false (4 ms)
      Î“ÃªÃœ should accept includeExamples: true (1 ms)
      Î“ÃªÃœ should accept includeExamples: false explicitly (1 ms)
      Î“ÃªÃœ should have token savings mentioned in description
    Response Format with includeExamples
      Î“ÃªÃœ should demonstrate response without exampleUsage when includeExamples is false
      Î“ÃªÃœ should demonstrate response with exampleUsage when includeExamples is true (1 ms)
    Token Savings Estimation
      Î“ÃªÃœ should demonstrate significant token savings per tool (1 ms)
      Î“ÃªÃœ should show cumulative savings with multiple tools (4 ms)
    Schema Validation
      Î“ÃªÃœ should maintain all required fields in schema (3 ms)
      Î“ÃªÃœ should reject invalid values (35 ms)
    Default Values
      Î“ÃªÃœ should apply correct defaults
    Integration with Tool Config
      Î“ÃªÃœ should be consistent with toolDiscoverySchema export (1 ms)

PASS test/unit/markdown-converter.test.ts
  Markdown Converter
    convertMarkdownToHtml
      Î“ÃªÃœ should convert headers (2 ms)
      Î“ÃªÃœ should convert bold text (1 ms)
      Î“ÃªÃœ should convert italic text
      Î“ÃªÃœ should convert lists (1 ms)
      Î“ÃªÃœ should convert code blocks
      Î“ÃªÃœ should convert links
      Î“ÃªÃœ should handle empty input (1 ms)
      Î“ÃªÃœ should convert line breaks with GFM enabled
    isMarkdown
      Î“ÃªÃœ should detect markdown headers (1 ms)
      Î“ÃªÃœ should detect markdown bold (1 ms)
      Î“ÃªÃœ should detect markdown italic (1 ms)
      Î“ÃªÃœ should detect markdown lists (1 ms)
      Î“ÃªÃœ should detect markdown links
      Î“ÃªÃœ should detect markdown code (1 ms)
      Î“ÃªÃœ should detect markdown blockquotes
      Î“ÃªÃœ should detect markdown tables (1 ms)
      Î“ÃªÃœ should return false for plain text
      Î“ÃªÃœ should return false for HTML
      Î“ÃªÃœ should handle empty input (1 ms)
    smartConvertToHtml
      Î“ÃªÃœ should convert markdown to HTML
      Î“ÃªÃœ should return HTML as-is (1 ms)
      Î“ÃªÃœ should wrap plain text in paragraph tags
      Î“ÃªÃœ should handle empty input (1 ms)
      Î“ÃªÃœ should escape HTML in plain text (1 ms)
    Azure DevOps specific use cases
      Î“ÃªÃœ should handle typical work item descriptions
      Î“ÃªÃœ should handle acceptance criteria (1 ms)
      Î“ÃªÃœ should handle code snippets in descriptions

PASS test/unit/context-package-optimization.test.ts
  Context Package Optimization
    Schema Defaults
      Î“ÃªÃœ should default maxHistoryRevisions to 3 (3 ms)
      Î“ÃªÃœ should default includeSystemFields to false (1 ms)
      Î“ÃªÃœ should allow includeSystemFields to be explicitly set (1 ms)
      Î“ÃªÃœ should default stripHtmlFormatting to true
    Field Filtering
      Î“ÃªÃœ should identify WEF fields as system fields
      Î“ÃªÃœ should have system fields list defined (1 ms)
    History Optimization
      Î“ÃªÃœ should accept reduced history revision count
      Î“ÃªÃœ should allow maxHistoryRevisions up to 100
      Î“ÃªÃœ should reject maxHistoryRevisions below 1 (1 ms)
    Context Window Efficiency
      Î“ÃªÃœ should have context-efficient defaults (1 ms)

PASS test/unit/openapi-generation.test.ts
  OpenAPI Generation
    OpenAPI Specification
      Î“ÃªÃœ should have OpenAPI 3.0.0 format (1 ms)
      Î“ÃªÃœ should have info section with title and version (1 ms)
      Î“ÃªÃœ should have contact information
      Î“ÃªÃœ should have MIT license
      Î“ÃªÃœ should have servers defined (1 ms)
      Î“ÃªÃœ should have tags for categorization (1 ms)
      Î“ÃªÃœ should have paths for tools
      Î“ÃªÃœ should have properly formatted tool paths (7 ms)
      Î“ÃªÃœ should have POST operations for all tools (17 ms)
      Î“ÃªÃœ should have request body schemas (14 ms)
      Î“ÃªÃœ should have response schemas (10 ms)
      Î“ÃªÃœ should mark AI-powered tools correctly (2 ms)
    Individual Schemas
      Î“ÃªÃœ should have schema index (1 ms)
      Î“ÃªÃœ should have generation metadata
      Î“ÃªÃœ should have schema files for all tools (1 ms)
    Schema Consistency
      Î“ÃªÃœ should have matching number of paths and schemas (1 ms)
      Î“ÃªÃœ should have consistent tool names (3 ms)

PASS test/unit/html-field-stripping.test.ts
  HTML Field Stripping Parameters
    Schema validation
      Î“ÃªÃœ should allow includeHtml parameter (3 ms)
      Î“ÃªÃœ should default includeHtml to false (1 ms)
      Î“ÃªÃœ should accept true for includeHtml (1 ms)

PASS test/unit/ai-assignment-analyzer.test.ts
  AI Assignment Analyzer
    Î“ÃªÃœ should analyze work item for AI assignment suitability (2 ms)
    Î“ÃªÃœ should call analyzeAIAssignment with correct parameters (2 ms)
    Î“ÃªÃœ should handle errors gracefully (1 ms)

PASS test/unit/resources-integration.test.ts
  Resources Integration
    Î“ÃªÃœ should have resources capability enabled (1 ms)
    Î“ÃªÃœ should expose resource list handler
    Î“ÃªÃœ should expose resource read handler (1 ms)
    Î“ÃªÃœ should have all resource files in place (5 ms)

PASS test/unit/sprint-planner-optional-fields.test.ts
  Sprint Planner Optional Fields
    buildResultFromJSON
      Î“ÃªÃœ should omit confidenceLevel when set to "Unknown" (2 ms)
      Î“ÃªÃœ should include confidenceLevel when set to valid value (1 ms)
      Î“ÃªÃœ should omit balanceMetrics when all scores are 0
      Î“ÃªÃœ should omit balanceMetrics when all assessments are "Not available" (1 ms)
      Î“ÃªÃœ should include balanceMetrics when at least one score is non-zero (1 ms)
      Î“ÃªÃœ should omit alternativePlans when array is empty
      Î“ÃªÃœ should include alternativePlans when valid plans exist (1 ms)
      Î“ÃªÃœ should omit alternativePlans when plans are invalid
      Î“ÃªÃœ should omit sprintRisks when all arrays are empty
      Î“ÃªÃœ should include sprintRisks when at least one array has content (1 ms)
      Î“ÃªÃœ should omit dependencies when array is empty (1 ms)
      Î“ÃªÃœ should include dependencies when they exist
    buildResultFromText (fallback)
      Î“ÃªÃœ should omit confidenceLevel in fallback response (2 ms)
      Î“ÃªÃœ should omit balanceMetrics in fallback response
      Î“ÃªÃœ should omit alternativePlans in fallback response (1 ms)
      Î“ÃªÃœ should include sprintRisks in fallback response (parse error is critical)
      Î“ÃªÃœ should omit dependencies in fallback response (1 ms)
    Token savings estimation
      Î“ÃªÃœ should demonstrate token savings by omitting empty fields (1 ms)

PASS test/unit/area-path-filtering.test.ts
  Area Path Filtering in WIQL Queries
    WIQL Query Injection
      Î“ÃªÃœ should generate correct UNDER clause for single area path (2 ms)
      Î“ÃªÃœ should generate correct OR conditions for multiple area paths
      Î“ÃªÃœ should not modify query that already has area path filtering (1 ms)
      Î“ÃªÃœ should handle queries with existing WHERE clause
      Î“ÃªÃœ should handle queries with ORDER BY clause (1 ms)
      Î“ÃªÃœ should escape single quotes in area paths
    Area Path Filter Parameter
      Î“ÃªÃœ should accept areaPathFilter as array of strings (1 ms)
      Î“ÃªÃœ should default to configured area paths when not specified
      Î“ÃªÃœ should allow subset of configured area paths (1 ms)
      Î“ÃªÃœ should handle empty array as no filtering
    Query Result Metadata
      Î“ÃªÃœ should include area path in work item results (1 ms)
      Î“ÃªÃœ should include project in work item results
    Error Cases
      Î“ÃªÃœ should handle null area path filter gracefully (1 ms)
      Î“ÃªÃœ should handle undefined area path filter gracefully
      Î“ÃªÃœ should validate area paths contain backslashes

PASS test/unit/wiql-missing-fields-filter.test.ts
  WIQL Missing Fields Filter
    Î“ÃªÃœ should filter by missing description (3 ms)
    Î“ÃªÃœ should filter by missing acceptance criteria
    Î“ÃªÃœ should apply both filters combined (1 ms)
    Î“ÃªÃœ should work without filters (backward compatibility) (1 ms)
    Î“ÃªÃœ should handle errors gracefully

PASS test/unit/validate-hierarchy-fast.test.ts
  Hierarchy Validation Rules
    Parent-Child Type Relationships
      Î“ÃªÃœ should define valid child types for Key Result (1 ms)
      Î“ÃªÃœ should define valid child types for Epic
      Î“ÃªÃœ should define valid child types for Feature (1 ms)
      Î“ÃªÃœ should define valid child types for PBI
      Î“ÃªÃœ should define no children for leaf nodes (1 ms)
    State Progression Levels
      Î“ÃªÃœ should define Initial states as level 1
      Î“ÃªÃœ should define Active states as level 2 (1 ms)
      Î“ÃªÃœ should define Done states as level 4
    Orphaned Item Detection
      Î“ÃªÃœ should require parent for Feature
      Î“ÃªÃœ should require parent for Product Backlog Item
      Î“ÃªÃœ should not require parent for Key Result (1 ms)
      Î“ÃªÃœ should not require parent for Epic

PASS test/unit/configuration-discovery.test.ts
  Configuration and Discovery Tools
    wit-get-config
      Î“ÃªÃœ should get all configuration sections (2 ms)
      Î“ÃªÃœ should get Azure DevOps section only (1 ms)
      Î“ÃªÃœ should include help text for configuration guidance (1 ms)
      Î“ÃªÃœ should handle configuration errors
    updateConfigFromCLI
      Î“ÃªÃœ should update configuration with CLI arguments (1 ms)

PASS test/unit/query-generator-usage.test.ts
  Query Generator Usage Tracking
    Response Structure
      Î“ÃªÃœ should not have usage field in data object (1 ms)
      Î“ÃªÃœ should accumulate usage across multiple iterations (1 ms)
      Î“ÃªÃœ should handle missing usage gracefully
      Î“ÃªÃœ should maintain proper response structure for WIQL generator (1 ms)
      Î“ÃªÃœ should maintain proper response structure for OData generator (1 ms)
    Token Savings
      Î“ÃªÃœ should save approximately 50-100 tokens by not duplicating usage in data (1 ms)

PASS test/unit/wiql-full-packages.test.ts
  WIQL Query with fetchFullPackages
    Î“ÃªÃœ should fetch full packages with query handle (2 ms)
    Î“ÃªÃœ should fetch full packages without query handle (2 ms)
    Î“ÃªÃœ should work with regular query without fetchFullPackages (1 ms)
    Î“ÃªÃœ should handle errors gracefully (1 ms)

FAIL test/unit/work-item-repository.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/work-item-repository.test.ts:5:10 - error TS2300: Duplicate identifier 'describe'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/work-item-repository.test.ts:5:20 - error TS2300: Duplicate identifier 'it'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/work-item-repository.test.ts:5:24 - error TS2300: Duplicate identifier 'expect'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/work-item-repository.test.ts:5:32 - error TS2300: Duplicate identifier 'beforeEach'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/work-item-repository.test.ts:5:44 - error TS2300: Duplicate identifier 'afterAll'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/work-item-repository.test.ts:5:54 - error TS2300: Duplicate identifier 'jest'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/work-item-repository.test.ts:7:10 - error TS2300: Duplicate identifier 'describe'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/work-item-repository.test.ts:7:20 - error TS2300: Duplicate identifier 'it'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/work-item-repository.test.ts:7:24 - error TS2300: Duplicate identifier 'expect'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/work-item-repository.test.ts:7:32 - error TS2300: Duplicate identifier 'beforeEach'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/work-item-repository.test.ts:7:44 - error TS2300: Duplicate identifier 'afterAll'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/work-item-repository.test.ts:7:54 - error TS2300: Duplicate identifier 'jest'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~

FAIL test/unit/missing-description-filter.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/missing-description-filter.test.ts:1:10 - error TS2300: Duplicate identifier 'describe'.

    1 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/missing-description-filter.test.ts:1:20 - error TS2300: Duplicate identifier 'it'.

    1 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/missing-description-filter.test.ts:1:24 - error TS2300: Duplicate identifier 'expect'.

    1 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/missing-description-filter.test.ts:2:10 - error TS2300: Duplicate identifier 'describe'.

    2 import { describe, it, expect } from '@jest/globals';
               ~~~~~~~~
    test/unit/missing-description-filter.test.ts:2:20 - error TS2300: Duplicate identifier 'it'.

    2 import { describe, it, expect } from '@jest/globals';
                         ~~
    test/unit/missing-description-filter.test.ts:2:24 - error TS2300: Duplicate identifier 'expect'.

    2 import { describe, it, expect } from '@jest/globals';
                             ~~~~~~

  console.error
    [INFO] Query Handle Service initialized at 2025-10-30T21:23:42.867Z

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:119:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (src/services/handlers/analysis/validate-hierarchy.handler.ts:14:1)
      at Object.<anonymous> (test/unit/validate-hierarchy-query-handle.test.ts:6:1)

FAIL test/unit/validation-errors.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/validation-errors.test.ts:6:10 - error TS2300: Duplicate identifier 'describe'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/validation-errors.test.ts:6:20 - error TS2300: Duplicate identifier 'it'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/validation-errors.test.ts:6:24 - error TS2300: Duplicate identifier 'expect'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/validation-errors.test.ts:6:32 - error TS2300: Duplicate identifier 'beforeEach'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/validation-errors.test.ts:6:44 - error TS2300: Duplicate identifier 'afterAll'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/validation-errors.test.ts:6:54 - error TS2300: Duplicate identifier 'jest'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/validation-errors.test.ts:8:10 - error TS2300: Duplicate identifier 'describe'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/validation-errors.test.ts:8:20 - error TS2300: Duplicate identifier 'it'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/validation-errors.test.ts:8:24 - error TS2300: Duplicate identifier 'expect'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/validation-errors.test.ts:8:32 - error TS2300: Duplicate identifier 'beforeEach'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/validation-errors.test.ts:8:44 - error TS2300: Duplicate identifier 'afterAll'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/validation-errors.test.ts:8:54 - error TS2300: Duplicate identifier 'jest'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~

  console.error
    [INFO] Query handle expiration: 30 minutes (max: 120 minutes)

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:120:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (src/services/handlers/analysis/validate-hierarchy.handler.ts:14:1)
      at Object.<anonymous> (test/unit/validate-hierarchy-query-handle.test.ts:6:1)

  console.error
    [INFO] Validating hierarchy in organization="test-org", project="test-project", areaPath="none", queryHandle="qh_4d3c19ca08e56e2dace3698391079b39" (types=true, states=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleValidateHierarchy (src/services/handlers/analysis/validate-hierarchy.handler.ts:158:12)
      at Object.<anonymous> (test/unit/validate-hierarchy-query-handle.test.ts:83:51)

  console.error
    [WARN] Query handle 'qh_4d3c19ca08e56e2dace3698391079b39' will expire in 0 minute(s). Consider refreshing if needed for longer workflows.

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.warn (src/utils/logger.ts:29:15)
      at QueryHandleService.getWorkItemIds (src/services/query-handle-service.ts:224:14)
      at handleValidateHierarchy (src/services/handlers/analysis/validate-hierarchy.handler.ts:164:44)
      at Object.<anonymous> (test/unit/validate-hierarchy-query-handle.test.ts:83:51)

  console.error
    [INFO] Resolved 3 work item IDs from query handle

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleValidateHierarchy (src/services/handlers/analysis/validate-hierarchy.handler.ts:171:14)
      at Object.<anonymous> (test/unit/validate-hierarchy-query-handle.test.ts:83:51)

  console.error
    [INFO] Created query handle for invalid_parent_task_under_feature: qh_73370b716f5817afe6f3b93158accae7 (1 items)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleValidateHierarchy (src/services/handlers/analysis/validate-hierarchy.handler.ts:397:18)
      at Object.<anonymous> (test/unit/validate-hierarchy-query-handle.test.ts:83:22)

  console.error
    [INFO] Validating hierarchy in organization="test-org", project="test-project", areaPath="none", queryHandle="qh_invalid_handle" (types=true, states=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleValidateHierarchy (src/services/handlers/analysis/validate-hierarchy.handler.ts:158:12)
      at Object.<anonymous> (test/unit/validate-hierarchy-query-handle.test.ts:97:51)

  console.error
    [WARN] Query handle 'qh_invalid_handle' not found. Server started at 2025-10-30T21:23:42.867Z. Currently tracking 0 active handles. Note: Handles are lost if MCP server restarts.

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.warn (src/utils/logger.ts:29:15)
      at QueryHandleService.getWorkItemIds (src/services/query-handle-service.ts:204:14)
      at handleValidateHierarchy (src/services/handlers/analysis/validate-hierarchy.handler.ts:164:44)
      at Object.<anonymous> (test/unit/validate-hierarchy-query-handle.test.ts:97:51)

  console.error
    [INFO] Validating hierarchy in organization="test-org", project="test-project", areaPath="none", queryHandle="none" (types=true, states=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleValidateHierarchy (src/services/handlers/analysis/validate-hierarchy.handler.ts:158:12)
      at Object.<anonymous> (test/unit/validate-hierarchy-query-handle.test.ts:110:51)

PASS test/unit/validate-hierarchy-query-handle.test.ts
  Validate Hierarchy with Query Handle
    Query Handle Support
      Î“ÃªÃœ should validate hierarchy using query handle (40 ms)
      Î“ÃªÃœ should return error for expired/invalid query handle (11 ms)
      Î“ÃªÃœ should return error when no input method provided (4 ms)
    Schema Validation
      Î“ÃªÃœ should accept queryHandle in schema (1 ms)
      Î“ÃªÃœ should make queryHandle optional

FAIL test/unit/selection-integration.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/selection-integration.test.ts:8:10 - error TS2300: Duplicate identifier 'describe'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/selection-integration.test.ts:8:20 - error TS2300: Duplicate identifier 'it'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/selection-integration.test.ts:8:24 - error TS2300: Duplicate identifier 'expect'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/selection-integration.test.ts:8:32 - error TS2300: Duplicate identifier 'beforeEach'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/selection-integration.test.ts:8:44 - error TS2300: Duplicate identifier 'afterAll'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/selection-integration.test.ts:8:54 - error TS2300: Duplicate identifier 'jest'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/selection-integration.test.ts:10:10 - error TS2300: Duplicate identifier 'describe'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/selection-integration.test.ts:10:20 - error TS2300: Duplicate identifier 'it'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/selection-integration.test.ts:10:24 - error TS2300: Duplicate identifier 'expect'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/selection-integration.test.ts:10:32 - error TS2300: Duplicate identifier 'beforeEach'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/selection-integration.test.ts:10:44 - error TS2300: Duplicate identifier 'afterAll'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/selection-integration.test.ts:10:54 - error TS2300: Duplicate identifier 'jest'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/selection-integration.test.ts:11:50 - error TS2307: Cannot find module '../../src/services/handlers/query-handles/select-items-from-query-handle.handler.js' or its corresponding type declarations.

    11 import { handleSelectItemsFromQueryHandle } from '../../src/services/handlers/query-handles/select-items-from-query-handle.handler.js';
                                                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/selection-integration.test.ts:12:10 - error TS2300: Duplicate identifier 'describe'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/selection-integration.test.ts:12:20 - error TS2300: Duplicate identifier 'it'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/selection-integration.test.ts:12:24 - error TS2300: Duplicate identifier 'expect'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/selection-integration.test.ts:12:32 - error TS2300: Duplicate identifier 'beforeEach'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/selection-integration.test.ts:12:44 - error TS2300: Duplicate identifier 'afterAll'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/selection-integration.test.ts:12:54 - error TS2300: Duplicate identifier 'jest'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/selection-integration.test.ts:13:48 - error TS2307: Cannot find module '../../src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.js' or its corresponding type declarations.

    13 import { handleBulkCommentByQueryHandle } from '../../src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.js';
                                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/selection-integration.test.ts:14:10 - error TS2300: Duplicate identifier 'describe'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/selection-integration.test.ts:14:20 - error TS2300: Duplicate identifier 'it'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/selection-integration.test.ts:14:24 - error TS2300: Duplicate identifier 'expect'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/selection-integration.test.ts:14:32 - error TS2300: Duplicate identifier 'beforeEach'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/selection-integration.test.ts:14:44 - error TS2300: Duplicate identifier 'afterAll'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/selection-integration.test.ts:14:54 - error TS2300: Duplicate identifier 'jest'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/selection-integration.test.ts:15:47 - error TS2307: Cannot find module '../../src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.js' or its corresponding type declarations.

    15 import { handleBulkAssignByQueryHandle } from '../../src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.js';
                                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/selection-integration.test.ts:16:10 - error TS2300: Duplicate identifier 'describe'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/selection-integration.test.ts:16:20 - error TS2300: Duplicate identifier 'it'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/selection-integration.test.ts:16:24 - error TS2300: Duplicate identifier 'expect'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/selection-integration.test.ts:16:32 - error TS2300: Duplicate identifier 'beforeEach'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/selection-integration.test.ts:16:44 - error TS2300: Duplicate identifier 'afterAll'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/selection-integration.test.ts:16:54 - error TS2300: Duplicate identifier 'jest'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/selection-integration.test.ts:17:47 - error TS2307: Cannot find module '../../src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.js' or its corresponding type declarations.

    17 import { handleBulkUpdateByQueryHandle } from '../../src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.js';
                                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/selection-integration.test.ts:18:10 - error TS2300: Duplicate identifier 'describe'.

    18 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/selection-integration.test.ts:18:20 - error TS2300: Duplicate identifier 'it'.

    18 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/selection-integration.test.ts:18:24 - error TS2300: Duplicate identifier 'expect'.

    18 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/selection-integration.test.ts:18:32 - error TS2300: Duplicate identifier 'beforeEach'.

    18 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/selection-integration.test.ts:18:44 - error TS2300: Duplicate identifier 'afterAll'.

    18 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/selection-integration.test.ts:18:54 - error TS2300: Duplicate identifier 'jest'.

    18 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/selection-integration.test.ts:20:3 - error TS2305: Module '"../../src/config/schemas.js"' has no exported member 'selectItemsFromQueryHandleSchema'.

    20   selectItemsFromQueryHandleSchema,
         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/selection-integration.test.ts:55:45 - error TS2345: Argument of type '{ success: boolean; }' is not assignable to parameter of type 'never'.

    55     addComment: jest.fn().mockResolvedValue({ success: true }),
                                                   ~~~~~~~~~~~~~~~~~
    test/unit/selection-integration.test.ts:56:49 - error TS2345: Argument of type '{ success: boolean; }' is not assignable to parameter of type 'never'.

    56     updateWorkItem: jest.fn().mockResolvedValue({ success: true })
                                                       ~~~~~~~~~~~~~~~~~

FAIL test/unit/odata-analytics.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/odata-analytics.test.ts:8:10 - error TS2300: Duplicate identifier 'describe'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/odata-analytics.test.ts:8:20 - error TS2300: Duplicate identifier 'it'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/odata-analytics.test.ts:8:24 - error TS2300: Duplicate identifier 'expect'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/odata-analytics.test.ts:8:32 - error TS2300: Duplicate identifier 'beforeEach'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/odata-analytics.test.ts:8:44 - error TS2300: Duplicate identifier 'afterAll'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/odata-analytics.test.ts:8:54 - error TS2300: Duplicate identifier 'jest'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/odata-analytics.test.ts:10:10 - error TS2300: Duplicate identifier 'describe'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/odata-analytics.test.ts:10:20 - error TS2300: Duplicate identifier 'it'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/odata-analytics.test.ts:10:24 - error TS2300: Duplicate identifier 'expect'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/odata-analytics.test.ts:10:32 - error TS2300: Duplicate identifier 'beforeEach'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/odata-analytics.test.ts:10:44 - error TS2300: Duplicate identifier 'afterAll'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/odata-analytics.test.ts:10:54 - error TS2300: Duplicate identifier 'jest'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/odata-analytics.test.ts:59:1 - error TS2322: Type 'Mock<UnknownFunction>' is not assignable to type '{ (input: URL | RequestInfo, init?: RequestInit | undefined): Promise<Response>; (input: string | URL | Request, init?: RequestInit | undefined): Promise<...>; }'.
      Type 'unknown' is not assignable to type 'Promise<Response>'.

    59 global.fetch = jest.fn();
       ~~~~~~~~~~~~
    test/unit/odata-analytics.test.ts:98:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; value: { "@odata.id": string; WorkItemId: number; State: string; Count: number; }[]; }>; }' is not assignable to parameter of type 'never'.

     98       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
     99         ok: true,
        ~~~~~~~~~~~~~~~~~
    100         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    101       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:141:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; "@odata.nextLink": string; value: { "@odata.id": string; WorkItemId: number; State: string; }[]; }>; }' is not assignable to parameter of type 'never'.

    141       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    142         ok: true,
        ~~~~~~~~~~~~~~~~~
    143         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    144       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:175:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; value: { "@odata.id": string; WorkItemId: number; State: string; AssignedTo: null; Tags: null; Count: number; }[]; }>; }' is not assignable to parameter of type 'never'.

    175       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    176         ok: true,
        ~~~~~~~~~~~~~~~~~
    177         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    178       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:215:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; value: { "@odata.id": string; WorkItemId: number; State: string; Count: number; }[]; }>; }' is not assignable to parameter of type 'never'.

    215       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    216         ok: true,
        ~~~~~~~~~~~~~~~~~
    217         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    218       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:256:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; "@odata.nextLink": string; value: { "@odata.id": string; WorkItemId: number; State: string; }[]; }>; }' is not assignable to parameter of type 'never'.

    256       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    257         ok: true,
        ~~~~~~~~~~~~~~~~~
    258         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    259       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:290:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; value: { "@odata.id": string; WorkItemId: number; State: string; AssignedTo: null; Tags: null; Count: number; }[]; }>; }' is not assignable to parameter of type 'never'.

    290       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    291         ok: true,
        ~~~~~~~~~~~~~~~~~
    292         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    293       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:324:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; value: { WorkItemId: number; State: string; }[]; }>; }' is not assignable to parameter of type 'never'.

    324       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    325         ok: true,
        ~~~~~~~~~~~~~~~~~
    326         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    327       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:359:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; value: { "@odata.id": string; WorkItemId: number; State: string; }[]; }>; }' is not assignable to parameter of type 'never'.

    359       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    360         ok: true,
        ~~~~~~~~~~~~~~~~~
    361         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    362       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:394:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; value: { "@odata.id": string; Count: number; }[]; }>; }' is not assignable to parameter of type 'never'.

    394       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    395         ok: true,
        ~~~~~~~~~~~~~~~~~
    396         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    397       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:424:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; value: { "@odata.id": string; CompletedDate: string; Count: number; }[]; }>; }' is not assignable to parameter of type 'never'.

    424       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    425         ok: true,
        ~~~~~~~~~~~~~~~~~
    426         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    427       });
        ~~~~~~~

  console.error
    [INFO] Query Handle Service initialized at 2025-10-30T21:23:43.053Z

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:119:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (src/services/handlers/query-handles/query-handle-info-handler.ts:14:1)
      at Object.<anonymous> (test/unit/query-handle-info.test.ts:9:1)

  console.error
    [INFO] Query handle expiration: 30 minutes (max: 120 minutes)

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:120:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (src/services/handlers/query-handles/query-handle-info-handler.ts:14:1)
      at Object.<anonymous> (test/unit/query-handle-info.test.ts:9:1)

  console.error
    [INFO] Getting info for query handle: qh_9392cecfe0ba94a27d76fd34d0cb0c57 (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:76:12)
      at Object.<anonymous> (test/unit/query-handle-info.test.ts:150:49)

  console.error
    [INFO] Getting info for query handle: qh_53b6b86e85a512207f333b4393934e24 (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:76:12)
      at Object.<anonymous> (test/unit/query-handle-info.test.ts:171:49)

  console.error
    [INFO] Getting info for query handle: qh_4bb463e6430c5bdfac33bdf4d66a880f (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:76:12)
      at Object.<anonymous> (test/unit/query-handle-info.test.ts:193:49)

  console.error
    [INFO] Getting info for query handle: qh_726b86031a9a6f0b44287ffd9bb27031 (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:76:12)
      at Object.<anonymous> (test/unit/query-handle-info.test.ts:208:49)

  console.error
    [INFO] Getting info for query handle: qh_f5dfe872fe74c87809018c62e882b088 (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:76:12)
      at Object.<anonymous> (test/unit/query-handle-info.test.ts:224:49)

  console.error
    [INFO] Getting info for query handle: qh_05e50eface0c706c0c8460740f13c5fa (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:76:12)
      at Object.<anonymous> (test/unit/query-handle-info.test.ts:240:49)

  console.error
    [INFO] Getting info for query handle: qh_09abd68f6d2e3317abade9414c98e9c3 (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:76:12)
      at Object.<anonymous> (test/unit/query-handle-info.test.ts:257:49)

  console.error
    [INFO] Getting info for query handle: qh_caf9797867e9da900fbb908809d09c5f (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:76:12)
      at Object.<anonymous> (test/unit/query-handle-info.test.ts:275:49)

  console.error
    [INFO] Getting info for query handle: qh_f2c42792517c0452d5676539d86ff2cd (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:76:12)
      at Object.<anonymous> (test/unit/query-handle-info.test.ts:291:49)

  console.error
    [INFO] Getting info for query handle: qh_35ec112f25f45fdaeeb0dd7b1a7b651d (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:76:12)
      at Object.<anonymous> (test/unit/query-handle-info.test.ts:307:49)

  console.error
    [INFO] Getting info for query handle: qh_10bca2b64949c5712c6b8b1a470bdae5 (1 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:76:12)
      at Object.<anonymous> (test/unit/query-handle-info.test.ts:355:49)

  console.error
    [INFO] Getting info for query handle: qh_7784565c492e4e3b3593b0c70ae4083b (3 items, detailed=false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:76:12)
      at Object.<anonymous> (test/unit/query-handle-info.test.ts:369:49)

  console.error
    [INFO] Getting info for query handle: qh_4056c29bc48570cb6486e73a6afce132 (3 items, detailed=true)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleQueryHandleInfo (src/services/handlers/query-handles/query-handle-info-handler.ts:76:12)
      at Object.<anonymous> (test/unit/query-handle-info.test.ts:384:49)

PASS test/unit/query-handle-info.test.ts
  Query Handle Info Handler
    Basic Mode (detailed=false)
      Î“ÃªÃœ should return basic inspection data by default (18 ms)
      Î“ÃªÃœ should include item preview by default (7 ms)
      Î“ÃªÃœ should include selection hints (8 ms)
      Î“ÃªÃœ should include statistics when includeStats=true (9 ms)
      Î“ÃªÃœ should NOT include validation or selection analysis in basic mode (5 ms)
    Detailed Mode (detailed=true)
      Î“ÃªÃœ should include validation data when detailed=true (12 ms)
      Î“ÃªÃœ should include selection analysis when detailed=true and itemSelector provided (9 ms)
      Î“ÃªÃœ should handle "all" itemSelector (5 ms)
      Î“ÃªÃœ should handle criteria-based itemSelector (6 ms)
      Î“ÃªÃœ should fetch sample items when detailed=true and includeSampleItems=true (5 ms)
    Error Handling
      Î“ÃªÃœ should return error for invalid query handle (1 ms)
      Î“ÃªÃœ should return validation error for missing queryHandle (2 ms)
    Expiration Warnings
      Î“ÃªÃœ should warn when query handle is about to expire (4 ms)
    Metadata
      Î“ÃªÃœ should include correct metadata (5 ms)
      Î“ÃªÃœ should reflect detailed mode in metadata (8 ms)

  console.error
    [INFO] Query Handle Service initialized at 2025-10-30T21:23:43.342Z

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:119:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (test/unit/list-query-handles-pagination.test.ts:6:1)

  console.error
    [INFO] Query handle expiration: 30 minutes (max: 120 minutes)

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:120:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (test/unit/list-query-handles-pagination.test.ts:6:1)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (test/unit/list-query-handles-pagination.test.ts:140:50)

  console.error
    [INFO] Listing query handles (top: 25, skip: 25, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (test/unit/list-query-handles-pagination.test.ts:165:50)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (test/unit/list-query-handles-pagination.test.ts:188:50)

FAIL test/unit/history-stripping.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/history-stripping.test.ts:4:10 - error TS2300: Duplicate identifier 'describe'.

    4 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/history-stripping.test.ts:4:20 - error TS2300: Duplicate identifier 'it'.

    4 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/history-stripping.test.ts:4:24 - error TS2300: Duplicate identifier 'expect'.

    4 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/history-stripping.test.ts:4:32 - error TS2300: Duplicate identifier 'beforeEach'.

    4 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/history-stripping.test.ts:4:44 - error TS2300: Duplicate identifier 'afterAll'.

    4 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/history-stripping.test.ts:4:54 - error TS2300: Duplicate identifier 'jest'.

    4 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/history-stripping.test.ts:6:10 - error TS2300: Duplicate identifier 'describe'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/history-stripping.test.ts:6:20 - error TS2300: Duplicate identifier 'it'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/history-stripping.test.ts:6:24 - error TS2300: Duplicate identifier 'expect'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/history-stripping.test.ts:6:32 - error TS2300: Duplicate identifier 'beforeEach'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/history-stripping.test.ts:6:44 - error TS2300: Duplicate identifier 'afterAll'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/history-stripping.test.ts:6:54 - error TS2300: Duplicate identifier 'jest'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~

  console.error
    [INFO] Query Handle Service initialized at 2025-10-30T21:23:43.475Z

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:119:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (src/services/handlers/bulk-operations/unified-bulk-operations.handler.ts:15:1)
      at Object.<anonymous> (test/unit/unified-bulk-operations.test.ts:7:1)

  console.error
    [INFO] Listing query handles (top: 20, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (test/unit/list-query-handles-pagination.test.ts:210:50)

  console.error
    [INFO] Query handle expiration: 30 minutes (max: 120 minutes)

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:120:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (src/services/handlers/bulk-operations/unified-bulk-operations.handler.ts:15:1)
      at Object.<anonymous> (test/unit/unified-bulk-operations.test.ts:7:1)

  console.error
    [INFO] Listing query handles (top: 50, skip: 0, includeExpired: false)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleListQueryHandles (src/services/handlers/query-handles/list-query-handles.handler.ts:28:12)
      at Object.<anonymous> (test/unit/list-query-handles-pagination.test.ts:230:50)

PASS test/unit/list-query-handles-pagination.test.ts
  List Query Handles Pagination
    Service Level Pagination
      Î“ÃªÃœ should return paginated handles with default top=50 and skip=0 (5 ms)
      Î“ÃªÃœ should return second page with skip=50 (3 ms)
      Î“ÃªÃœ should handle partial last page (4 ms)
      Î“ÃªÃœ should handle skip beyond total (10 ms)
      Î“ÃªÃœ should respect custom top parameter (21 ms)
      Î“ÃªÃœ should handle empty result set (1 ms)
    Handler Level Pagination
      Î“ÃªÃœ should return paginated response with default parameters (31 ms)
      Î“ÃªÃœ should accept custom top and skip parameters (15 ms)
      Î“ÃªÃœ should include pagination in metadata (5 ms)
      Î“ÃªÃœ should add warning when more results available (30 ms)
      Î“ÃªÃœ should not add pagination warning when all results returned (12 ms)
    Schema Validation
      Î“ÃªÃœ should validate top parameter within range (1 ms)
      Î“ÃªÃœ should reject top parameter above max (2 ms)
      Î“ÃªÃœ should reject top parameter below min (1 ms)
      Î“ÃªÃœ should reject negative skip parameter
      Î“ÃªÃœ should apply default values when not provided (1 ms)

FAIL test/unit/get-last-substantive-change.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/get-last-substantive-change.test.ts:5:10 - error TS2300: Duplicate identifier 'describe'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:5:20 - error TS2300: Duplicate identifier 'it'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/get-last-substantive-change.test.ts:5:24 - error TS2300: Duplicate identifier 'expect'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/get-last-substantive-change.test.ts:5:32 - error TS2300: Duplicate identifier 'beforeEach'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:5:44 - error TS2300: Duplicate identifier 'afterAll'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:5:54 - error TS2300: Duplicate identifier 'jest'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/get-last-substantive-change.test.ts:7:10 - error TS2300: Duplicate identifier 'describe'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:7:20 - error TS2300: Duplicate identifier 'it'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/get-last-substantive-change.test.ts:7:24 - error TS2300: Duplicate identifier 'expect'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/get-last-substantive-change.test.ts:7:32 - error TS2300: Duplicate identifier 'beforeEach'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:7:44 - error TS2300: Duplicate identifier 'afterAll'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:7:54 - error TS2300: Duplicate identifier 'jest'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/get-last-substantive-change.test.ts:9:10 - error TS2300: Duplicate identifier 'describe'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:9:20 - error TS2300: Duplicate identifier 'it'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/get-last-substantive-change.test.ts:9:24 - error TS2300: Duplicate identifier 'expect'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/get-last-substantive-change.test.ts:9:32 - error TS2300: Duplicate identifier 'beforeEach'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:9:44 - error TS2300: Duplicate identifier 'afterAll'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:9:54 - error TS2300: Duplicate identifier 'jest'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/get-last-substantive-change.test.ts:39:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

     39       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
     40         data: {
        ~~~~~~~~~~~~~~~
    ... 
     45         }
        ~~~~~~~~~
     46       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:48:48 - error TS2345: Argument of type '{ data: { value: never[]; }; }' is not assignable to parameter of type 'never'.

     48       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
     49         data: {
        ~~~~~~~~~~~~~~~
    ... 
     51         }
        ~~~~~~~~~
     52       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:69:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

     69       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
     70         data: {
        ~~~~~~~~~~~~~~~
    ... 
     75         }
        ~~~~~~~~~
     76       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:78:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'System.Title': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

     78       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
     79         data: {
        ~~~~~~~~~~~~~~~
    ... 
     98         }
        ~~~~~~~~~
     99       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:115:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    115       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    116         data: {
        ~~~~~~~~~~~~~~~
    ... 
    121         }
        ~~~~~~~~~
    122       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:124:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'System.Description': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    124       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    125         data: {
        ~~~~~~~~~~~~~~~
    ... 
    144         }
        ~~~~~~~~~
    145       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:163:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    163       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    164         data: {
        ~~~~~~~~~~~~~~~
    ... 
    169         }
        ~~~~~~~~~
    170       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:172:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'System.IterationPath': string; 'System.State': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    172       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    173         data: {
        ~~~~~~~~~~~~~~~
    ... 
    203         }
        ~~~~~~~~~
    204       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:221:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    221       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    222         data: {
        ~~~~~~~~~~~~~~~
    ... 
    227         }
        ~~~~~~~~~
    228       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:230:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'System.AreaPath': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    230       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    231         data: {
        ~~~~~~~~~~~~~~~
    ... 
    250         }
        ~~~~~~~~~
    251       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:271:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    271       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    272         data: {
        ~~~~~~~~~~~~~~~
    ... 
    277         }
        ~~~~~~~~~
    278       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:280:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'Microsoft.VSTS.Common.StackRank': number; 'System.History': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    280       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    281         data: {
        ~~~~~~~~~~~~~~~
    ... 
    311         }
        ~~~~~~~~~
    312       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:331:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    331       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    332         data: {
        ~~~~~~~~~~~~~~~
    ... 
    337         }
        ~~~~~~~~~
    338       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:340:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'System.IterationPath': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    340       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    341         data: {
        ~~~~~~~~~~~~~~~
    ... 
    360         }
        ~~~~~~~~~
    361       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:377:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    377       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    378         data: {
        ~~~~~~~~~~~~~~~
    ... 
    383         }
        ~~~~~~~~~
    384       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:386:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'System.AreaPath': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    386       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    387         data: {
        ~~~~~~~~~~~~~~~
    ... 
    406         }
        ~~~~~~~~~
    407       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:423:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    423       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    424         data: {
        ~~~~~~~~~~~~~~~
    ... 
    429         }
        ~~~~~~~~~
    430       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:432:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'System.Title': string; 'System.Description': string; 'System.State': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    432       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    433         data: {
        ~~~~~~~~~~~~~~~
    ... 
    456         }
        ~~~~~~~~~
    457       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:474:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    474       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    475         data: {
        ~~~~~~~~~~~~~~~
    ... 
    480         }
        ~~~~~~~~~
    481       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:483:48 - error TS2345: Argument of type '{ data: { value: never[]; }; }' is not assignable to parameter of type 'never'.

    483       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    484         data: {
        ~~~~~~~~~~~~~~~
    ... 
    486         }
        ~~~~~~~~~
    487       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:499:48 - error TS2345: Argument of type 'Error' is not assignable to parameter of type 'never'.

    499       mockHttpClient.get.mockRejectedValueOnce(new Error('API Error'));
                                                       ~~~~~~~~~~~~~~~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:509:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    509       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    510         data: {
        ~~~~~~~~~~~~~~~
    ... 
    515         }
        ~~~~~~~~~
    516       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:518:48 - error TS2345: Argument of type '{ data: { value: never[]; }; }' is not assignable to parameter of type 'never'.

    518       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    519         data: {
        ~~~~~~~~~~~~~~~
    ... 
    521         }
        ~~~~~~~~~
    522       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:537:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    537       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    538         data: {
        ~~~~~~~~~~~~~~~
    ... 
    543         }
        ~~~~~~~~~
    544       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:546:48 - error TS2345: Argument of type '{ data: { value: never[]; }; }' is not assignable to parameter of type 'never'.

    546       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    547         data: {
        ~~~~~~~~~~~~~~~
    ... 
    549         }
        ~~~~~~~~~
    550       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:567:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    567       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    568         data: {
        ~~~~~~~~~~~~~~~
    ... 
    573         }
        ~~~~~~~~~
    574       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:576:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': { displayName: string; }; 'System.IterationPath': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    576       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    577         data: {
        ~~~~~~~~~~~~~~~
    ... 
    596         }
        ~~~~~~~~~
    597       });
        ~~~~~~~

FAIL test/unit/unified-bulk-operations.test.ts
  Î“Ã¹Ã… Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     Î“Ã‡Ã³ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     Î“Ã‡Ã³ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     Î“Ã‡Ã³ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     Î“Ã‡Ã³ If you need a custom transformation specify a "transform" option in your config.
     Î“Ã‡Ã³ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\src\utils\paths.ts:19
            thisFileDir = (0, path_1.dirname)((0, url_1.fileURLToPath)(import.meta.url));
                                                                              ^^^^

    SyntaxError: Cannot use 'import.meta' outside a module

      1 | import { readFileSync } from 'fs';
      2 | import { join } from 'path';
    > 3 | import { promptsDir } from './paths.js';
        | ^
      4 | import { logger } from './logger.js';
      5 |
      6 | /**

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (src/utils/prompt-loader.ts:3:1)
      at Object.<anonymous> (src/utils/sampling-client.ts:6:1)
      at Object.<anonymous> (src/services/handlers/bulk-operations/unified-bulk-operations.handler.ts:20:1)
      at Object.<anonymous> (test/unit/unified-bulk-operations.test.ts:7:1)

FAIL test/unit/get-prompts.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/get-prompts.test.ts:5:10 - error TS2300: Duplicate identifier 'describe'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/get-prompts.test.ts:5:20 - error TS2300: Duplicate identifier 'it'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/get-prompts.test.ts:5:24 - error TS2300: Duplicate identifier 'expect'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/get-prompts.test.ts:5:32 - error TS2300: Duplicate identifier 'beforeEach'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/get-prompts.test.ts:5:44 - error TS2300: Duplicate identifier 'afterAll'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/get-prompts.test.ts:5:54 - error TS2300: Duplicate identifier 'jest'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/get-prompts.test.ts:6:10 - error TS2300: Duplicate identifier 'describe'.

    6 import { describe, it, expect } from '@jest/globals';
               ~~~~~~~~
    test/unit/get-prompts.test.ts:6:20 - error TS2300: Duplicate identifier 'it'.

    6 import { describe, it, expect } from '@jest/globals';
                         ~~
    test/unit/get-prompts.test.ts:6:24 - error TS2300: Duplicate identifier 'expect'.

    6 import { describe, it, expect } from '@jest/globals';
                             ~~~~~~
    test/unit/get-prompts.test.ts:7:10 - error TS2300: Duplicate identifier 'describe'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/get-prompts.test.ts:7:20 - error TS2300: Duplicate identifier 'it'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/get-prompts.test.ts:7:24 - error TS2300: Duplicate identifier 'expect'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/get-prompts.test.ts:7:32 - error TS2300: Duplicate identifier 'beforeEach'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/get-prompts.test.ts:7:44 - error TS2300: Duplicate identifier 'afterAll'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/get-prompts.test.ts:7:54 - error TS2300: Duplicate identifier 'jest'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~

FAIL test/unit/handle-based-analysis.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/handle-based-analysis.test.ts:5:10 - error TS2300: Duplicate identifier 'describe'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:5:20 - error TS2300: Duplicate identifier 'it'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/handle-based-analysis.test.ts:5:24 - error TS2300: Duplicate identifier 'expect'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/handle-based-analysis.test.ts:5:32 - error TS2300: Duplicate identifier 'beforeEach'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/handle-based-analysis.test.ts:5:44 - error TS2300: Duplicate identifier 'afterAll'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:5:54 - error TS2300: Duplicate identifier 'jest'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/handle-based-analysis.test.ts:7:10 - error TS2300: Duplicate identifier 'describe'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:7:20 - error TS2300: Duplicate identifier 'it'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/handle-based-analysis.test.ts:7:24 - error TS2300: Duplicate identifier 'expect'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/handle-based-analysis.test.ts:7:32 - error TS2300: Duplicate identifier 'beforeEach'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/handle-based-analysis.test.ts:7:44 - error TS2300: Duplicate identifier 'afterAll'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:7:54 - error TS2300: Duplicate identifier 'jest'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/handle-based-analysis.test.ts:9:10 - error TS2300: Duplicate identifier 'describe'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:9:20 - error TS2300: Duplicate identifier 'it'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/handle-based-analysis.test.ts:9:24 - error TS2300: Duplicate identifier 'expect'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/handle-based-analysis.test.ts:9:32 - error TS2300: Duplicate identifier 'beforeEach'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/handle-based-analysis.test.ts:9:44 - error TS2300: Duplicate identifier 'afterAll'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:9:54 - error TS2300: Duplicate identifier 'jest'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/handle-based-analysis.test.ts:11:10 - error TS2300: Duplicate identifier 'describe'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:11:20 - error TS2300: Duplicate identifier 'it'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/handle-based-analysis.test.ts:11:24 - error TS2300: Duplicate identifier 'expect'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/handle-based-analysis.test.ts:11:32 - error TS2300: Duplicate identifier 'beforeEach'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/handle-based-analysis.test.ts:11:44 - error TS2300: Duplicate identifier 'afterAll'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:11:54 - error TS2300: Duplicate identifier 'jest'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/handle-based-analysis.test.ts:48:38 - error TS2345: Argument of type '{ data: { value: { id: number; fields: { 'System.Title': string; 'System.WorkItemType': string; 'System.State': string; 'System.AssignedTo': { displayName: string; }; 'Microsoft.VSTS.Scheduling.StoryPoints': number; ... 4 more ...; 'System.Description': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

     48     get: jest.fn().mockResolvedValue({
                                             ~
     49       data: {
        ~~~~~~~~~~~~~
    ... 
     82       }
        ~~~~~~~
     83     })
        ~~~~~

FAIL test/unit/constants.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/constants.test.ts:30:25 - error TS2339: Property 'BULK_ASSIGN_BY_QUERY_HANDLE' does not exist on type '{ readonly CREATE_NEW_ITEM: "wit-create-new-item"; readonly CLONE_WORK_ITEM: "wit-clone-work-item"; readonly GET_WORK_ITEM_CONTEXT_PACKAGE: "wit-get-work-item-context-package"; ... 21 more ...; readonly NEW_COPILOT_ITEM: "wit-new-copilot-item"; }'.

    30       expect(TOOL_NAMES.BULK_ASSIGN_BY_QUERY_HANDLE).toBe('wit-bulk-assign-by-query-handle');
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/constants.test.ts:31:25 - error TS2339: Property 'BULK_UPDATE_BY_QUERY_HANDLE' does not exist on type '{ readonly CREATE_NEW_ITEM: "wit-create-new-item"; readonly CLONE_WORK_ITEM: "wit-clone-work-item"; readonly GET_WORK_ITEM_CONTEXT_PACKAGE: "wit-get-work-item-context-package"; ... 21 more ...; readonly NEW_COPILOT_ITEM: "wit-new-copilot-item"; }'.

    31       expect(TOOL_NAMES.BULK_UPDATE_BY_QUERY_HANDLE).toBe('wit-bulk-update-by-query-handle');
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~

FAIL test/unit/error-categorization.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/error-categorization.test.ts:6:10 - error TS2300: Duplicate identifier 'describe'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/error-categorization.test.ts:6:20 - error TS2300: Duplicate identifier 'it'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/error-categorization.test.ts:6:24 - error TS2300: Duplicate identifier 'expect'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/error-categorization.test.ts:6:32 - error TS2300: Duplicate identifier 'beforeEach'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/error-categorization.test.ts:6:44 - error TS2300: Duplicate identifier 'afterAll'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/error-categorization.test.ts:6:54 - error TS2300: Duplicate identifier 'jest'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/error-categorization.test.ts:14:10 - error TS2300: Duplicate identifier 'describe'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/error-categorization.test.ts:14:20 - error TS2300: Duplicate identifier 'it'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/error-categorization.test.ts:14:24 - error TS2300: Duplicate identifier 'expect'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/error-categorization.test.ts:14:32 - error TS2300: Duplicate identifier 'beforeEach'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/error-categorization.test.ts:14:44 - error TS2300: Duplicate identifier 'afterAll'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/error-categorization.test.ts:14:54 - error TS2300: Duplicate identifier 'jest'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~

FAIL test/unit/generate-wiql-query-handle.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/generate-wiql-query-handle.test.ts:7:10 - error TS2300: Duplicate identifier 'describe'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:7:20 - error TS2300: Duplicate identifier 'it'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/generate-wiql-query-handle.test.ts:7:24 - error TS2300: Duplicate identifier 'expect'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:7:32 - error TS2300: Duplicate identifier 'beforeEach'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:7:44 - error TS2300: Duplicate identifier 'afterAll'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:7:54 - error TS2300: Duplicate identifier 'jest'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/generate-wiql-query-handle.test.ts:9:10 - error TS2300: Duplicate identifier 'describe'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:9:20 - error TS2300: Duplicate identifier 'it'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/generate-wiql-query-handle.test.ts:9:24 - error TS2300: Duplicate identifier 'expect'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:9:32 - error TS2300: Duplicate identifier 'beforeEach'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:9:44 - error TS2300: Duplicate identifier 'afterAll'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:9:54 - error TS2300: Duplicate identifier 'jest'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/generate-wiql-query-handle.test.ts:11:10 - error TS2300: Duplicate identifier 'describe'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:11:20 - error TS2300: Duplicate identifier 'it'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/generate-wiql-query-handle.test.ts:11:24 - error TS2300: Duplicate identifier 'expect'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:11:32 - error TS2300: Duplicate identifier 'beforeEach'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:11:44 - error TS2300: Duplicate identifier 'afterAll'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:11:54 - error TS2300: Duplicate identifier 'jest'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/generate-wiql-query-handle.test.ts:65:10 - error TS2300: Duplicate identifier 'describe'.

    65 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:65:20 - error TS2300: Duplicate identifier 'it'.

    65 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/generate-wiql-query-handle.test.ts:65:24 - error TS2300: Duplicate identifier 'expect'.

    65 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:65:32 - error TS2300: Duplicate identifier 'beforeEach'.

    65 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:65:44 - error TS2300: Duplicate identifier 'afterAll'.

    65 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:65:54 - error TS2300: Duplicate identifier 'jest'.

    65 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/generate-wiql-query-handle.test.ts:149:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    149       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    150         content: [{ type: 'text', text: 'SELECT [System.Id], [System.Title] FROM WorkItems WHERE [System.State] = \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    151         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    152       });
        ~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:188:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    188       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    189         content: [{ type: 'text', text: 'SELECT [System.Id] FROM WorkItems WHERE [System.State] = \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    190         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    191       });
        ~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:281:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    281       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    282         content: [{ type: 'text', text: 'SELECT [System.Id] FROM WorkItems WHERE [System.State] = \'NonExistent\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    283         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    284       });
        ~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:329:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    329       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    330         content: [{ type: 'text', text: 'SELECT [System.Id] FROM WorkItems WHERE [System.State] = \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    331         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    332       });
        ~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:401:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    401       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    402         content: [{ type: 'text', text: 'SELECT [System.Id] FROM WorkItems WHERE [System.State] = \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    403         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    404       });
        ~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:443:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    443       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    444         content: [{ type: 'text', text: 'SELECT [System.Id] FROM WorkItems WHERE [System.State] = \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    445         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    446       });
        ~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:513:62 - error TS2345: Argument of type '{ role: string; content: { type: string; text: string; }[]; }' is not assignable to parameter of type 'never'.

    513       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    514         role: 'assistant',
        ~~~~~~~~~~~~~~~~~~~~~~~~~~
    ... 
    518         }]
        ~~~~~~~~~~
    519       });
        ~~~~~~~

FAIL test/unit/bulk-undo.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/bulk-undo.test.ts:5:10 - error TS2300: Duplicate identifier 'describe'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/bulk-undo.test.ts:5:20 - error TS2300: Duplicate identifier 'it'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/bulk-undo.test.ts:5:24 - error TS2300: Duplicate identifier 'expect'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/bulk-undo.test.ts:5:32 - error TS2300: Duplicate identifier 'beforeEach'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/bulk-undo.test.ts:5:44 - error TS2300: Duplicate identifier 'afterAll'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/bulk-undo.test.ts:5:54 - error TS2300: Duplicate identifier 'jest'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/bulk-undo.test.ts:7:10 - error TS2300: Duplicate identifier 'describe'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/bulk-undo.test.ts:7:20 - error TS2300: Duplicate identifier 'it'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/bulk-undo.test.ts:7:24 - error TS2300: Duplicate identifier 'expect'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/bulk-undo.test.ts:7:32 - error TS2300: Duplicate identifier 'beforeEach'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/bulk-undo.test.ts:7:44 - error TS2300: Duplicate identifier 'afterAll'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/bulk-undo.test.ts:7:54 - error TS2300: Duplicate identifier 'jest'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~

FAIL test/unit/generate-odata-query-handle.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/generate-odata-query-handle.test.ts:7:10 - error TS2300: Duplicate identifier 'describe'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:7:20 - error TS2300: Duplicate identifier 'it'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/generate-odata-query-handle.test.ts:7:24 - error TS2300: Duplicate identifier 'expect'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/generate-odata-query-handle.test.ts:7:32 - error TS2300: Duplicate identifier 'beforeEach'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:7:44 - error TS2300: Duplicate identifier 'afterAll'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:7:54 - error TS2300: Duplicate identifier 'jest'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/generate-odata-query-handle.test.ts:9:10 - error TS2300: Duplicate identifier 'describe'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:9:20 - error TS2300: Duplicate identifier 'it'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/generate-odata-query-handle.test.ts:9:24 - error TS2300: Duplicate identifier 'expect'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/generate-odata-query-handle.test.ts:9:32 - error TS2300: Duplicate identifier 'beforeEach'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:9:44 - error TS2300: Duplicate identifier 'afterAll'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:9:54 - error TS2300: Duplicate identifier 'jest'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/generate-odata-query-handle.test.ts:11:10 - error TS2300: Duplicate identifier 'describe'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:11:20 - error TS2300: Duplicate identifier 'it'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/generate-odata-query-handle.test.ts:11:24 - error TS2300: Duplicate identifier 'expect'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/generate-odata-query-handle.test.ts:11:32 - error TS2300: Duplicate identifier 'beforeEach'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:11:44 - error TS2300: Duplicate identifier 'afterAll'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:11:54 - error TS2300: Duplicate identifier 'jest'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/generate-odata-query-handle.test.ts:56:1 - error TS2322: Type 'Mock<UnknownFunction>' is not assignable to type '{ (input: URL | RequestInfo, init?: RequestInit | undefined): Promise<Response>; (input: string | URL | Request, init?: RequestInit | undefined): Promise<...>; }'.
      Type 'unknown' is not assignable to type 'Promise<Response>'.

    56 global.fetch = jest.fn();
       ~~~~~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:89:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    89       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                    ~
    90         content: [{ type: 'text', text: '$filter=State eq \'Active\'' }],
       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    91         usage: { inputTokens: 100, outputTokens: 50 }
       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    92       });
       ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:96:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; Title: string; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

     96       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
     97         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    101         })
        ~~~~~~~~~~
    102       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:125:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    125       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    126         content: [{ type: 'text', text: '$filter=State eq \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    127         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    128       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:132:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; Title: string; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    132       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    133         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    137         })
        ~~~~~~~~~~
    138       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:155:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; Title: string; State: string; WorkItemType: string; CreatedDate: string; ChangedDate: string; AreaPath: string; IterationPath: string; Tags: string; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    155       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    156         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    160         })
        ~~~~~~~~~~
    161       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:185:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    185       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    186         content: [{ type: 'text', text: '$filter=State eq \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    187         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    188       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:192:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; Title: string; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    192       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    193         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    197         })
        ~~~~~~~~~~
    198       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:226:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; Title: string; State: string; WorkItemType: string; CreatedDate: string; ChangedDate: string; AreaPath: string; IterationPath: string; Tags: string; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    226       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    227         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    231         })
        ~~~~~~~~~~
    232       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:266:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    266       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    267         content: [{ type: 'text', text: '$filter=State eq \'NonExistent\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    268         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    269       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:273:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    273       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    274         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    278         })
        ~~~~~~~~~~
    279       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:282:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: never[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    282       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    283         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    287         })
        ~~~~~~~~~~
    288       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:310:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    310       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    311         content: [{ type: 'text', text: '$filter=State eq \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    312         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    313       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:317:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    317       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    318         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    322         })
        ~~~~~~~~~~
    323       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:326:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; Title: string; State: string; WorkItemType: string; Priority: number; Severity: string; }[]; }>; }' is not assignable to parameter of type 'never'.

    326       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    327         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    339         })
        ~~~~~~~~~~
    340       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:361:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    361       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    362         content: [{ type: 'text', text: '$filter=State eq \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    363         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    364       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:368:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    368       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    369         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    373         })
        ~~~~~~~~~~
    374       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:377:57 - error TS2345: Argument of type '{ ok: boolean; status: number; statusText: string; text: () => Promise<string>; }' is not assignable to parameter of type 'never'.

    377       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    378         ok: false,
        ~~~~~~~~~~~~~~~~~~
    ... 
    381         text: async () => 'Server error'
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    382       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:406:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    406       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    407         content: [{ type: 'text', text: '$filter=State eq \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    408         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    409       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:413:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    413       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    414         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    418         })
        ~~~~~~~~~~
    419       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:422:58 - error TS2345: Argument of type '(url: string) => Promise<{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; Title: string; State: string; WorkItemType: string; }[]; }>; }>' is not assignable to parameter of type 'UnknownFunction'.
      Types of parameters 'url' and 'args' are incompatible.
        Type 'unknown' is not assignable to type 'string'.

    422       (global.fetch as jest.Mock).mockImplementationOnce((url: string) => {
                                                                 ~~~~~~~~~~~~~~~~~~

  console.error
    [INFO] Query Handle Service initialized at 2025-10-30T21:23:44.963Z

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:119:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:10:1)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:10:1)

  console.error
    [INFO] Query handle expiration: 30 minutes (max: 120 minutes)

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:120:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:10:1)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:10:1)

  console.error
    [INFO] Query Handle Service initialized at 2025-10-30T21:23:45.132Z

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:119:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (src/services/handlers/bulk-operations/bulk-link-handler.ts:14:1)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:10:1)

  console.error
    [INFO] Query handle expiration: 30 minutes (max: 120 minutes)

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:120:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (src/services/handlers/bulk-operations/bulk-link-handler.ts:14:1)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:10:1)

  console.error
    [INFO] Fetching context packages for 3 work items from query handle qh_377f5e91ba383e762e1aacca8620fde5

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:89:65)

  console.error
    [INFO] Fetching context packages for 3 work items from query handle qh_696705630be22d99c9543cb14e139fc6

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:117:65)

  console.error
    [INFO] Fetching context packages for 2 work items from query handle qh_f0a22905bbfe455dc9a83533735f2c74

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:144:65)

  console.error
    [INFO] Fetching context packages for 5 work items from query handle qh_d55a991485a165e43e3bcae6b53716c8

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:173:65)

  console.error
    [INFO] Bulk link operation: 3 source(s) â”œÃ¹ 3 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:103:56)

  console.error
    [INFO] Fetching context packages for 10 work items from query handle qh_ba30f49799b167cc118aefa1b923152a

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:205:65)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 3 target(s) using one-to-many strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:143:56)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_d227dc0015928c5fd9a05bcd7c521c50

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:234:50)

  console.error
    [INFO] Bulk link operation: 3 source(s) â”œÃ¹ 1 target(s) using many-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:182:56)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_44b83ccf4d1acea0ea88b73905798277

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:262:50)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 2 target(s) using many-to-many strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:221:56)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:252:56)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_5da26bb9f7fa50d2c02c4c308254ecc2

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:288:50)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:278:56)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_d5a9e1e287601dda7ee93aaebba9a51a

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:314:50)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:304:56)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_12e3ad4f1ddbd15ca9c7bb600cf14cd2

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:342:50)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:330:56)

  console.error
    [INFO] Fetching context packages for 3 work items from query handle qh_f1cb57ce21cbb2df2dbf0ea2c68c0a0a

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:441:65)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 2 target(s) using many-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:361:56)

  console.error
    [WARN] Failed to fetch context package for work item 102: [ 'Failed to fetch item 102' ]

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.warn (src/utils/logger.ts:29:15)
      at src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:148:18
          at async Promise.all (index 1)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:165:28)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:441:22)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 2 target(s) using one-to-many strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:391:56)

  console.error
    [INFO] Fetching context packages for 2 work items from query handle qh_8128425345991e6aff06d23f8c38bcdd

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:473:65)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 2 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:418:56)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_4795e769daf642772be894eb1f4368cb

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:498:65)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 2 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:452:56)

  console.error
    [INFO] Bulk link operation: 10 source(s) â”œÃ¹ 10 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:480:56)

  console.error
    [INFO] Fetching context packages for 2 work items from query handle qh_fb80b0776c37a4578b886b979f4c7f07

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:526:65)

  console.error
    [INFO] Fetching context packages for 2 work items from query handle qh_446d1f4d18ad53e4aed185b9cde8bd2a

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:555:65)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 2 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:519:56)

  console.error
    [INFO] Bulk link operation: 2 source(s) â”œÃ¹ 2 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:557:56)

FAIL test/unit/bulk-preview-limits.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/bulk-preview-limits.test.ts:6:10 - error TS2300: Duplicate identifier 'describe'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:6:20 - error TS2300: Duplicate identifier 'it'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/bulk-preview-limits.test.ts:6:24 - error TS2300: Duplicate identifier 'expect'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/bulk-preview-limits.test.ts:6:32 - error TS2300: Duplicate identifier 'beforeEach'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:6:44 - error TS2300: Duplicate identifier 'afterAll'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:6:54 - error TS2300: Duplicate identifier 'jest'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/bulk-preview-limits.test.ts:7:47 - error TS2307: Cannot find module '../../src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.js' or its corresponding type declarations.

    7 import { handleBulkAssignByQueryHandle } from '../../src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.js';
                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:8:10 - error TS2300: Duplicate identifier 'describe'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:8:20 - error TS2300: Duplicate identifier 'it'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/bulk-preview-limits.test.ts:8:24 - error TS2300: Duplicate identifier 'expect'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/bulk-preview-limits.test.ts:8:32 - error TS2300: Duplicate identifier 'beforeEach'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:8:44 - error TS2300: Duplicate identifier 'afterAll'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:8:54 - error TS2300: Duplicate identifier 'jest'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/bulk-preview-limits.test.ts:9:47 - error TS2307: Cannot find module '../../src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.js' or its corresponding type declarations.

    9 import { handleBulkRemoveByQueryHandle } from '../../src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.js';
                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:10:10 - error TS2300: Duplicate identifier 'describe'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:10:20 - error TS2300: Duplicate identifier 'it'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-preview-limits.test.ts:10:24 - error TS2300: Duplicate identifier 'expect'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-preview-limits.test.ts:10:32 - error TS2300: Duplicate identifier 'beforeEach'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:10:44 - error TS2300: Duplicate identifier 'afterAll'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:10:54 - error TS2300: Duplicate identifier 'jest'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-preview-limits.test.ts:11:47 - error TS2307: Cannot find module '../../src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.js' or its corresponding type declarations.

    11 import { handleBulkUpdateByQueryHandle } from '../../src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.js';
                                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:12:10 - error TS2300: Duplicate identifier 'describe'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:12:20 - error TS2300: Duplicate identifier 'it'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-preview-limits.test.ts:12:24 - error TS2300: Duplicate identifier 'expect'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-preview-limits.test.ts:12:32 - error TS2300: Duplicate identifier 'beforeEach'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:12:44 - error TS2300: Duplicate identifier 'afterAll'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:12:54 - error TS2300: Duplicate identifier 'jest'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-preview-limits.test.ts:13:48 - error TS2307: Cannot find module '../../src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.js' or its corresponding type declarations.

    13 import { handleBulkCommentByQueryHandle } from '../../src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.js';
                                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:14:10 - error TS2300: Duplicate identifier 'describe'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:14:20 - error TS2300: Duplicate identifier 'it'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-preview-limits.test.ts:14:24 - error TS2300: Duplicate identifier 'expect'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-preview-limits.test.ts:14:32 - error TS2300: Duplicate identifier 'beforeEach'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:14:44 - error TS2300: Duplicate identifier 'afterAll'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:14:54 - error TS2300: Duplicate identifier 'jest'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-preview-limits.test.ts:16:10 - error TS2300: Duplicate identifier 'describe'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:16:20 - error TS2300: Duplicate identifier 'it'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-preview-limits.test.ts:16:24 - error TS2300: Duplicate identifier 'expect'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-preview-limits.test.ts:16:32 - error TS2300: Duplicate identifier 'beforeEach'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:16:44 - error TS2300: Duplicate identifier 'afterAll'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:16:54 - error TS2300: Duplicate identifier 'jest'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-preview-limits.test.ts:23:10 - error TS2300: Duplicate identifier 'describe'.

    23 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:23:20 - error TS2300: Duplicate identifier 'it'.

    23 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-preview-limits.test.ts:23:24 - error TS2300: Duplicate identifier 'expect'.

    23 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-preview-limits.test.ts:23:32 - error TS2300: Duplicate identifier 'beforeEach'.

    23 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:23:44 - error TS2300: Duplicate identifier 'afterAll'.

    23 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:23:54 - error TS2300: Duplicate identifier 'jest'.

    23 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-preview-limits.test.ts:36:40 - error TS2345: Argument of type '{}' is not assignable to parameter of type 'never'.

    36     patch: jest.fn().mockResolvedValue({}),
                                              ~~
    test/unit/bulk-preview-limits.test.ts:37:39 - error TS2345: Argument of type '{}' is not assignable to parameter of type 'never'.

    37     post: jest.fn().mockResolvedValue({})
                                             ~~

  console.error
    [INFO] Fetching context packages for 2 work items from query handle qh_cdc63f19c88522e9fb963a6fcfb36641

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:635:65)

  console.error
    [INFO] Fetching context packages for 1 work items from query handle qh_842c7314c3358cc4f6037b4aea91fc91

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleGetContextPackagesByQueryHandle (src/services/handlers/context/get-context-packages-by-query-handle.handler.ts:115:12)
      at Object.<anonymous> (test/unit/context-packages-by-handle.test.ts:665:50)

PASS test/unit/context-packages-by-handle.test.ts
  Get Context Packages By Query Handle Handler
    Basic retrieval
      Î“ÃªÃœ should retrieve context packages for all items (14 ms)
      Î“ÃªÃœ should retrieve context packages for selected indices (6 ms)
      Î“ÃªÃœ should retrieve context packages matching criteria (10 ms)
    Preview limiting
      Î“ÃªÃœ should limit to maxPreviewItems (8 ms)
      Î“ÃªÃœ should use default maxPreviewItems of 10 (6 ms)
    Optional parameters
      Î“ÃªÃœ should support includeHistory parameter (11 ms)
      Î“ÃªÃœ should support includeComments parameter (7 ms)
      Î“ÃªÃœ should support includeRelations parameter (7 ms)
      Î“ÃªÃœ should support includeChildren and includeParent parameters (11 ms)
      Î“ÃªÃœ should support includeExtendedFields parameter (5 ms)
    Error handling
      Î“ÃªÃœ should return error for invalid query handle (1 ms)
      Î“ÃªÃœ should return error when no items selected (1 ms)
      Î“ÃªÃœ should handle schema validation errors (2 ms)
      Î“ÃªÃœ should handle partial failures when fetching packages (14 ms)
    Selection summary
      Î“ÃªÃœ should include index-based selection summary (9 ms)
      Î“ÃªÃœ should include criteria-based selection summary (7 ms)
      Î“ÃªÃœ should include all selection summary (11 ms)
    Next steps guidance
      Î“ÃªÃœ should include helpful next steps (7 ms)
    Edge cases
      Î“ÃªÃœ should handle expired query handles (28 ms)
      Î“ÃªÃœ should handle empty query results (2 ms)
      Î“ÃªÃœ should handle maxPreviewItems larger than selection (7 ms)
    Configuration parameters
      Î“ÃªÃœ should use organization and project from parameters (12 ms)

  console.error
    [ERROR] Failed to create link 102 -> 202: Error: Link creation failed
        at Object.<anonymous> (C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\test\unit\bulk-link-work-items.test.ts:537:32)
        at Promise.then.completed (C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.error (src/utils/logger.ts:37:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:542:16)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:557:22)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:600:56)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:630:56)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:658:56)

  console.error
    [INFO] Bulk link operation: 3 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:821:56)

  console.error
    [INFO] Bulk link operation: 1 source(s) â”œÃ¹ 1 target(s) using one-to-one strategy

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkLinkByQueryHandles (src/services/handlers/bulk-operations/bulk-link-handler.ts:345:12)
      at Object.<anonymous> (test/unit/bulk-link-work-items.test.ts:844:56)

PASS test/unit/bulk-link-work-items.test.ts
  Bulk Link Work Items Handler
    Link strategies
      Î“ÃªÃœ should create one-to-one links (11 ms)
      Î“ÃªÃœ should create one-to-many links (11 ms)
      Î“ÃªÃœ should create many-to-one links (6 ms)
      Î“ÃªÃœ should create many-to-many links (7 ms)
    Link types
      Î“ÃªÃœ should support Parent link type (5 ms)
      Î“ÃªÃœ should support Child link type (4 ms)
      Î“ÃªÃœ should support Related link type (9 ms)
      Î“ÃªÃœ should support dependency link types (11 ms)
    Item selection
      Î“ÃªÃœ should support source item selector (6 ms)
      Î“ÃªÃœ should support target item selector (8 ms)
      Î“ÃªÃœ should support index-based selectors (8 ms)
    Dry run mode
      Î“ÃªÃœ should show preview without creating links (5 ms)
      Î“ÃªÃœ should limit preview to maxPreviewItems (6 ms)
    Execution mode
      Î“ÃªÃœ should create links successfully (14 ms)
      Î“ÃªÃœ should handle partial failures (75 ms)
      Î“ÃªÃœ should skip existing links when skipExisting=true (5 ms)
    Link validation
      Î“ÃªÃœ should validate hierarchical link types (7 ms)
      Î“ÃªÃœ should allow valid hierarchical relationships (4 ms)
    Error handling
      Î“ÃªÃœ should return error for invalid source query handle (1 ms)
      Î“ÃªÃœ should return error for invalid target query handle (1 ms)
      Î“ÃªÃœ should return error when Azure CLI not available
      Î“ÃªÃœ should handle invalid link type (1 ms)
      Î“ÃªÃœ should return error when no source items selected (1 ms)
      Î“ÃªÃœ should return error when no target items selected (1 ms)
    Edge cases
      Î“ÃªÃœ should handle mismatched counts in one-to-one strategy (6 ms)
      Î“ÃªÃœ should handle self-referencing links (5 ms)

  console.error
    [INFO] Query Handle Service initialized at 2025-10-30T21:23:45.540Z

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:119:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (src/services/handlers/bulk-operations/bulk-undo-by-query-handle.handler.ts:16:1)
      at Object.<anonymous> (test/integration/bulk-undo-real.test.ts:6:1)

  console.error
    [INFO] Query handle expiration: 30 minutes (max: 120 minutes)

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:120:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (src/services/handlers/bulk-operations/bulk-undo-by-query-handle.handler.ts:16:1)
      at Object.<anonymous> (test/integration/bulk-undo-real.test.ts:6:1)

  console.error
    [INFO] Query Handle Service initialized at 2025-10-30T21:23:45.601Z

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:119:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:9:1)

  console.error
    [INFO] Query handle expiration: 30 minutes (max: 120 minutes)

    [0m [90m 20 |[39m     [90m// Info messages to stderr for MCP protocol, but only before connection[39m
     [90m 21 |[39m     [36mif[39m ([33m![39m[36mthis[39m[33m.[39mmcpConnected) {
    [31m[1m>[22m[39m[90m 22 |[39m       console[33m.[39merror([32m`[INFO] ${message}`[39m[33m,[39m [33m...[39margs)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 23 |[39m     }
     [90m 24 |[39m   }
     [90m 25 |[39m[0m

      at Logger.info (src/utils/logger.ts:22:15)
      at new QueryHandleService (src/services/query-handle-service.ts:120:12)
      at Object.<anonymous> (src/services/query-handle-service.ts:807:35)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:9:1)

FAIL test/unit/bulk-enhance-descriptions-minimization.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/bulk-enhance-descriptions-minimization.test.ts:6:10 - error TS2300: Duplicate identifier 'describe'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:6:20 - error TS2300: Duplicate identifier 'it'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:6:24 - error TS2300: Duplicate identifier 'expect'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:6:32 - error TS2300: Duplicate identifier 'beforeEach'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:6:44 - error TS2300: Duplicate identifier 'afterAll'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:6:54 - error TS2300: Duplicate identifier 'jest'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:8:10 - error TS2300: Duplicate identifier 'describe'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:8:20 - error TS2300: Duplicate identifier 'it'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:8:24 - error TS2300: Duplicate identifier 'expect'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:8:32 - error TS2300: Duplicate identifier 'beforeEach'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:8:44 - error TS2300: Duplicate identifier 'afterAll'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:8:54 - error TS2300: Duplicate identifier 'jest'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:10:10 - error TS2300: Duplicate identifier 'describe'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:10:20 - error TS2300: Duplicate identifier 'it'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:10:24 - error TS2300: Duplicate identifier 'expect'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:10:32 - error TS2300: Duplicate identifier 'beforeEach'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:10:44 - error TS2300: Duplicate identifier 'afterAll'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:10:54 - error TS2300: Duplicate identifier 'jest'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:12:10 - error TS2300: Duplicate identifier 'describe'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:12:20 - error TS2300: Duplicate identifier 'it'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:12:24 - error TS2300: Duplicate identifier 'expect'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:12:32 - error TS2300: Duplicate identifier 'beforeEach'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:12:44 - error TS2300: Duplicate identifier 'afterAll'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:12:54 - error TS2300: Duplicate identifier 'jest'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:14:10 - error TS2300: Duplicate identifier 'describe'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:14:20 - error TS2300: Duplicate identifier 'it'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:14:24 - error TS2300: Duplicate identifier 'expect'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:14:32 - error TS2300: Duplicate identifier 'beforeEach'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:14:44 - error TS2300: Duplicate identifier 'afterAll'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:14:54 - error TS2300: Duplicate identifier 'jest'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:27:39 - error TS2345: Argument of type '(url: string) => Promise<{ data: { id: number; fields: { 'System.Title': string; 'System.Description': string; 'System.WorkItemType': string; 'System.State': string; 'System.Tags': string; }; }; }>' is not assignable to parameter of type 'UnknownFunction'.
      Types of parameters 'url' and 'args' are incompatible.
        Type 'unknown' is not assignable to type 'string'.

    27     get: jest.fn().mockImplementation((url: string) => {
                                             ~~~~~~~~~~~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:46:40 - error TS2345: Argument of type '{}' is not assignable to parameter of type 'never'.

    46     patch: jest.fn().mockResolvedValue({})
                                              ~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:67:48 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; }' is not assignable to parameter of type 'never'.

     67     createMessage: jest.fn().mockResolvedValue({
                                                       ~
     68       content: [
        ~~~~~~~~~~~~~~~~
    ... 
     77       ]
        ~~~~~~~
     78     }),
        ~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:80:14 - error TS18046: 'result' is of type 'unknown'.

    80       return result.content[0].text;
                    ~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:244:52 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; }' is not assignable to parameter of type 'never'.

    244         createMessage: jest.fn().mockResolvedValue({
                                                           ~
    245           content: [
        ~~~~~~~~~~~~~~~~~~~~
    ... 
    254           ]
        ~~~~~~~~~~~
    255         }),
        ~~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:256:50 - error TS18046: 'result' is of type 'unknown'.

    256         extractResponseText: jest.fn((result) => result.content[0].text)
                                                         ~~~~~~

FAIL test/integration/bulk-operations-integration.test.ts
  Î“Ã¹Ã… Test suite failed to run

    Cannot find module '../../src/services/handlers/bulk-operations/bulk-transition-handler' from 'test/integration/bulk-operations-integration.test.ts'

       8 |
       9 | import { queryHandleService } from '../../src/services/query-handle-service';
    > 10 | import { handleBulkTransitionState } from '../../src/services/handlers/bulk-operations/bulk-transition-handler';
         | ^
      11 | import { handleBulkMoveToIteration } from '../../src/services/handlers/bulk-operations/bulk-move-iteration-handler';
      12 | import { handleBulkLinkByQueryHandles } from '../../src/services/handlers/bulk-operations/bulk-link-handler';
      13 | import { handleGetContextPackagesByQueryHandle } from '../../src/services/handlers/context/get-context-packages-by-query-handle.handler';

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:10:1)

  console.error
    [INFO] Undoing 1 operation(s) on query handle qh_537c381f153314f88e80d8278ac86dfc

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUndoByQueryHandle (src/services/handlers/bulk-operations/bulk-undo-by-query-handle.handler.ts:68:12)
      at Object.<anonymous> (test/integration/bulk-undo-real.test.ts:71:55)

  console.error
    [INFO] Undoing 1 operation(s) on query handle qh_86a93bc931384c58c4921ccf788c01b2

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUndoByQueryHandle (src/services/handlers/bulk-operations/bulk-undo-by-query-handle.handler.ts:68:12)
      at Object.<anonymous> (test/integration/bulk-undo-real.test.ts:103:55)

  console.error
    [INFO] Undoing 1 operation(s) on query handle qh_1a721e0078234adfb659ddf01be6dc03

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUndoByQueryHandle (src/services/handlers/bulk-operations/bulk-undo-by-query-handle.handler.ts:68:12)
      at Object.<anonymous> (test/integration/bulk-undo-real.test.ts:132:55)

  console.error
    [INFO] Undoing 1 operation(s) on query handle qh_f38d0c72a48a3757371c1715ae9311cc

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUndoByQueryHandle (src/services/handlers/bulk-operations/bulk-undo-by-query-handle.handler.ts:68:12)
      at Object.<anonymous> (test/integration/bulk-undo-real.test.ts:161:55)

  console.error
    [INFO] Undoing 1 operation(s) on query handle qh_d58a9b97bbea86acc0f1f9d2c007cb49

    [0m [90m 27 |[39m       [36mreturn[39m[33m;[39m
     [90m 28 |[39m     }
    [31m[1m>[22m[39m[90m 29 |[39m     originalConsoleError([33m...[39margs)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 30 |[39m   })[33m;[39m
     [90m 31 |[39m   
     [90m 32 |[39m   console[33m.[39mwarn [33m=[39m jest[33m.[39mfn(([33m...[39margs) [33m=>[39m {[0m

      at console.<anonymous> (test/setup.ts:29:5)
      at Logger.info (src/utils/logger.ts:22:15)
      at handleBulkUndoByQueryHandle (src/services/handlers/bulk-operations/bulk-undo-by-query-handle.handler.ts:68:12)
      at Object.<anonymous> (test/integration/bulk-undo-real.test.ts:202:55)

PASS test/integration/bulk-undo-real.test.ts (42.055 s)
  Bulk Undo Integration Tests
    Query handle validation
      Î“ÃªÃœ should return error if query handle not found (4683 ms)
      Î“ÃªÃœ should return error if no operation history exists (4442 ms)
    Dry run validation
      Î“ÃªÃœ should preview undo without making changes when dryRun is true (4472 ms)
      Î“ÃªÃœ should limit preview items to maxPreviewItems (4729 ms)
      Î“ÃªÃœ should include warning for bulk-comment operations (4501 ms)
    Default behavior
      Î“ÃªÃœ should default to dryRun=true (4491 ms)
    Multiple operations in history
      Î“ÃªÃœ should undo only the last operation (4464 ms)
    Error handling
      Î“ÃªÃœ should handle invalid arguments gracefully (4466 ms)
      Î“ÃªÃœ should handle empty query handle (4457 ms)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
Summary of all failing tests
FAIL test/unit/query-handle-service.test.ts (6.04 s)
  Î“Ã¹Ã… Query Handle Service Î“Ã‡â•‘ TTL behavior Î“Ã‡â•‘ should use default TTL (1 hour)

    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 3599900
    Received:    1800000

      207 |       expect(data).not.toBeNull();
      208 |       const ttl = data!.expiresAt.getTime() - data!.createdAt.getTime();
    > 209 |       expect(ttl).toBeGreaterThanOrEqual(60 * 60 * 1000 - 100); // Allow 100ms tolerance
          |                   ^
      210 |       expect(ttl).toBeLessThanOrEqual(60 * 60 * 1000 + 100);
      211 |     });
      212 |

      at Object.<anonymous> (test/unit/query-handle-service.test.ts:209:19)

FAIL test/unit/work-item-repository.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/work-item-repository.test.ts:5:10 - error TS2300: Duplicate identifier 'describe'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/work-item-repository.test.ts:5:20 - error TS2300: Duplicate identifier 'it'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/work-item-repository.test.ts:5:24 - error TS2300: Duplicate identifier 'expect'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/work-item-repository.test.ts:5:32 - error TS2300: Duplicate identifier 'beforeEach'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/work-item-repository.test.ts:5:44 - error TS2300: Duplicate identifier 'afterAll'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/work-item-repository.test.ts:5:54 - error TS2300: Duplicate identifier 'jest'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/work-item-repository.test.ts:7:10 - error TS2300: Duplicate identifier 'describe'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/work-item-repository.test.ts:7:20 - error TS2300: Duplicate identifier 'it'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/work-item-repository.test.ts:7:24 - error TS2300: Duplicate identifier 'expect'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/work-item-repository.test.ts:7:32 - error TS2300: Duplicate identifier 'beforeEach'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/work-item-repository.test.ts:7:44 - error TS2300: Duplicate identifier 'afterAll'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/work-item-repository.test.ts:7:54 - error TS2300: Duplicate identifier 'jest'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~

FAIL test/unit/missing-description-filter.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/missing-description-filter.test.ts:1:10 - error TS2300: Duplicate identifier 'describe'.

    1 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/missing-description-filter.test.ts:1:20 - error TS2300: Duplicate identifier 'it'.

    1 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/missing-description-filter.test.ts:1:24 - error TS2300: Duplicate identifier 'expect'.

    1 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/missing-description-filter.test.ts:2:10 - error TS2300: Duplicate identifier 'describe'.

    2 import { describe, it, expect } from '@jest/globals';
               ~~~~~~~~
    test/unit/missing-description-filter.test.ts:2:20 - error TS2300: Duplicate identifier 'it'.

    2 import { describe, it, expect } from '@jest/globals';
                         ~~
    test/unit/missing-description-filter.test.ts:2:24 - error TS2300: Duplicate identifier 'expect'.

    2 import { describe, it, expect } from '@jest/globals';
                             ~~~~~~

FAIL test/unit/validation-errors.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/validation-errors.test.ts:6:10 - error TS2300: Duplicate identifier 'describe'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/validation-errors.test.ts:6:20 - error TS2300: Duplicate identifier 'it'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/validation-errors.test.ts:6:24 - error TS2300: Duplicate identifier 'expect'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/validation-errors.test.ts:6:32 - error TS2300: Duplicate identifier 'beforeEach'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/validation-errors.test.ts:6:44 - error TS2300: Duplicate identifier 'afterAll'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/validation-errors.test.ts:6:54 - error TS2300: Duplicate identifier 'jest'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/validation-errors.test.ts:8:10 - error TS2300: Duplicate identifier 'describe'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/validation-errors.test.ts:8:20 - error TS2300: Duplicate identifier 'it'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/validation-errors.test.ts:8:24 - error TS2300: Duplicate identifier 'expect'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/validation-errors.test.ts:8:32 - error TS2300: Duplicate identifier 'beforeEach'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/validation-errors.test.ts:8:44 - error TS2300: Duplicate identifier 'afterAll'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/validation-errors.test.ts:8:54 - error TS2300: Duplicate identifier 'jest'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~

FAIL test/unit/selection-integration.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/selection-integration.test.ts:8:10 - error TS2300: Duplicate identifier 'describe'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/selection-integration.test.ts:8:20 - error TS2300: Duplicate identifier 'it'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/selection-integration.test.ts:8:24 - error TS2300: Duplicate identifier 'expect'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/selection-integration.test.ts:8:32 - error TS2300: Duplicate identifier 'beforeEach'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/selection-integration.test.ts:8:44 - error TS2300: Duplicate identifier 'afterAll'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/selection-integration.test.ts:8:54 - error TS2300: Duplicate identifier 'jest'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/selection-integration.test.ts:10:10 - error TS2300: Duplicate identifier 'describe'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/selection-integration.test.ts:10:20 - error TS2300: Duplicate identifier 'it'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/selection-integration.test.ts:10:24 - error TS2300: Duplicate identifier 'expect'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/selection-integration.test.ts:10:32 - error TS2300: Duplicate identifier 'beforeEach'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/selection-integration.test.ts:10:44 - error TS2300: Duplicate identifier 'afterAll'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/selection-integration.test.ts:10:54 - error TS2300: Duplicate identifier 'jest'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/selection-integration.test.ts:11:50 - error TS2307: Cannot find module '../../src/services/handlers/query-handles/select-items-from-query-handle.handler.js' or its corresponding type declarations.

    11 import { handleSelectItemsFromQueryHandle } from '../../src/services/handlers/query-handles/select-items-from-query-handle.handler.js';
                                                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/selection-integration.test.ts:12:10 - error TS2300: Duplicate identifier 'describe'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/selection-integration.test.ts:12:20 - error TS2300: Duplicate identifier 'it'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/selection-integration.test.ts:12:24 - error TS2300: Duplicate identifier 'expect'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/selection-integration.test.ts:12:32 - error TS2300: Duplicate identifier 'beforeEach'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/selection-integration.test.ts:12:44 - error TS2300: Duplicate identifier 'afterAll'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/selection-integration.test.ts:12:54 - error TS2300: Duplicate identifier 'jest'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/selection-integration.test.ts:13:48 - error TS2307: Cannot find module '../../src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.js' or its corresponding type declarations.

    13 import { handleBulkCommentByQueryHandle } from '../../src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.js';
                                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/selection-integration.test.ts:14:10 - error TS2300: Duplicate identifier 'describe'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/selection-integration.test.ts:14:20 - error TS2300: Duplicate identifier 'it'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/selection-integration.test.ts:14:24 - error TS2300: Duplicate identifier 'expect'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/selection-integration.test.ts:14:32 - error TS2300: Duplicate identifier 'beforeEach'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/selection-integration.test.ts:14:44 - error TS2300: Duplicate identifier 'afterAll'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/selection-integration.test.ts:14:54 - error TS2300: Duplicate identifier 'jest'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/selection-integration.test.ts:15:47 - error TS2307: Cannot find module '../../src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.js' or its corresponding type declarations.

    15 import { handleBulkAssignByQueryHandle } from '../../src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.js';
                                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/selection-integration.test.ts:16:10 - error TS2300: Duplicate identifier 'describe'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/selection-integration.test.ts:16:20 - error TS2300: Duplicate identifier 'it'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/selection-integration.test.ts:16:24 - error TS2300: Duplicate identifier 'expect'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/selection-integration.test.ts:16:32 - error TS2300: Duplicate identifier 'beforeEach'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/selection-integration.test.ts:16:44 - error TS2300: Duplicate identifier 'afterAll'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/selection-integration.test.ts:16:54 - error TS2300: Duplicate identifier 'jest'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/selection-integration.test.ts:17:47 - error TS2307: Cannot find module '../../src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.js' or its corresponding type declarations.

    17 import { handleBulkUpdateByQueryHandle } from '../../src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.js';
                                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/selection-integration.test.ts:18:10 - error TS2300: Duplicate identifier 'describe'.

    18 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/selection-integration.test.ts:18:20 - error TS2300: Duplicate identifier 'it'.

    18 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/selection-integration.test.ts:18:24 - error TS2300: Duplicate identifier 'expect'.

    18 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/selection-integration.test.ts:18:32 - error TS2300: Duplicate identifier 'beforeEach'.

    18 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/selection-integration.test.ts:18:44 - error TS2300: Duplicate identifier 'afterAll'.

    18 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/selection-integration.test.ts:18:54 - error TS2300: Duplicate identifier 'jest'.

    18 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/selection-integration.test.ts:20:3 - error TS2305: Module '"../../src/config/schemas.js"' has no exported member 'selectItemsFromQueryHandleSchema'.

    20   selectItemsFromQueryHandleSchema,
         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/selection-integration.test.ts:55:45 - error TS2345: Argument of type '{ success: boolean; }' is not assignable to parameter of type 'never'.

    55     addComment: jest.fn().mockResolvedValue({ success: true }),
                                                   ~~~~~~~~~~~~~~~~~
    test/unit/selection-integration.test.ts:56:49 - error TS2345: Argument of type '{ success: boolean; }' is not assignable to parameter of type 'never'.

    56     updateWorkItem: jest.fn().mockResolvedValue({ success: true })
                                                       ~~~~~~~~~~~~~~~~~

FAIL test/unit/odata-analytics.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/odata-analytics.test.ts:8:10 - error TS2300: Duplicate identifier 'describe'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/odata-analytics.test.ts:8:20 - error TS2300: Duplicate identifier 'it'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/odata-analytics.test.ts:8:24 - error TS2300: Duplicate identifier 'expect'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/odata-analytics.test.ts:8:32 - error TS2300: Duplicate identifier 'beforeEach'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/odata-analytics.test.ts:8:44 - error TS2300: Duplicate identifier 'afterAll'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/odata-analytics.test.ts:8:54 - error TS2300: Duplicate identifier 'jest'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/odata-analytics.test.ts:10:10 - error TS2300: Duplicate identifier 'describe'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/odata-analytics.test.ts:10:20 - error TS2300: Duplicate identifier 'it'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/odata-analytics.test.ts:10:24 - error TS2300: Duplicate identifier 'expect'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/odata-analytics.test.ts:10:32 - error TS2300: Duplicate identifier 'beforeEach'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/odata-analytics.test.ts:10:44 - error TS2300: Duplicate identifier 'afterAll'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/odata-analytics.test.ts:10:54 - error TS2300: Duplicate identifier 'jest'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/odata-analytics.test.ts:59:1 - error TS2322: Type 'Mock<UnknownFunction>' is not assignable to type '{ (input: URL | RequestInfo, init?: RequestInit | undefined): Promise<Response>; (input: string | URL | Request, init?: RequestInit | undefined): Promise<...>; }'.
      Type 'unknown' is not assignable to type 'Promise<Response>'.

    59 global.fetch = jest.fn();
       ~~~~~~~~~~~~
    test/unit/odata-analytics.test.ts:98:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; value: { "@odata.id": string; WorkItemId: number; State: string; Count: number; }[]; }>; }' is not assignable to parameter of type 'never'.

     98       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
     99         ok: true,
        ~~~~~~~~~~~~~~~~~
    100         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    101       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:141:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; "@odata.nextLink": string; value: { "@odata.id": string; WorkItemId: number; State: string; }[]; }>; }' is not assignable to parameter of type 'never'.

    141       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    142         ok: true,
        ~~~~~~~~~~~~~~~~~
    143         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    144       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:175:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; value: { "@odata.id": string; WorkItemId: number; State: string; AssignedTo: null; Tags: null; Count: number; }[]; }>; }' is not assignable to parameter of type 'never'.

    175       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    176         ok: true,
        ~~~~~~~~~~~~~~~~~
    177         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    178       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:215:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; value: { "@odata.id": string; WorkItemId: number; State: string; Count: number; }[]; }>; }' is not assignable to parameter of type 'never'.

    215       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    216         ok: true,
        ~~~~~~~~~~~~~~~~~
    217         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    218       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:256:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; "@odata.nextLink": string; value: { "@odata.id": string; WorkItemId: number; State: string; }[]; }>; }' is not assignable to parameter of type 'never'.

    256       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    257         ok: true,
        ~~~~~~~~~~~~~~~~~
    258         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    259       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:290:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; value: { "@odata.id": string; WorkItemId: number; State: string; AssignedTo: null; Tags: null; Count: number; }[]; }>; }' is not assignable to parameter of type 'never'.

    290       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    291         ok: true,
        ~~~~~~~~~~~~~~~~~
    292         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    293       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:324:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; value: { WorkItemId: number; State: string; }[]; }>; }' is not assignable to parameter of type 'never'.

    324       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    325         ok: true,
        ~~~~~~~~~~~~~~~~~
    326         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    327       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:359:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; value: { "@odata.id": string; WorkItemId: number; State: string; }[]; }>; }' is not assignable to parameter of type 'never'.

    359       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    360         ok: true,
        ~~~~~~~~~~~~~~~~~
    361         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    362       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:394:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; value: { "@odata.id": string; Count: number; }[]; }>; }' is not assignable to parameter of type 'never'.

    394       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    395         ok: true,
        ~~~~~~~~~~~~~~~~~
    396         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    397       });
        ~~~~~~~
    test/unit/odata-analytics.test.ts:424:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ "@odata.context": string; "@odata.count": number; value: { "@odata.id": string; CompletedDate: string; Count: number; }[]; }>; }' is not assignable to parameter of type 'never'.

    424       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    425         ok: true,
        ~~~~~~~~~~~~~~~~~
    426         json: async () => mockResponse
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    427       });
        ~~~~~~~

FAIL test/unit/history-stripping.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/history-stripping.test.ts:4:10 - error TS2300: Duplicate identifier 'describe'.

    4 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/history-stripping.test.ts:4:20 - error TS2300: Duplicate identifier 'it'.

    4 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/history-stripping.test.ts:4:24 - error TS2300: Duplicate identifier 'expect'.

    4 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/history-stripping.test.ts:4:32 - error TS2300: Duplicate identifier 'beforeEach'.

    4 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/history-stripping.test.ts:4:44 - error TS2300: Duplicate identifier 'afterAll'.

    4 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/history-stripping.test.ts:4:54 - error TS2300: Duplicate identifier 'jest'.

    4 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/history-stripping.test.ts:6:10 - error TS2300: Duplicate identifier 'describe'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/history-stripping.test.ts:6:20 - error TS2300: Duplicate identifier 'it'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/history-stripping.test.ts:6:24 - error TS2300: Duplicate identifier 'expect'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/history-stripping.test.ts:6:32 - error TS2300: Duplicate identifier 'beforeEach'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/history-stripping.test.ts:6:44 - error TS2300: Duplicate identifier 'afterAll'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/history-stripping.test.ts:6:54 - error TS2300: Duplicate identifier 'jest'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~

FAIL test/unit/get-last-substantive-change.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/get-last-substantive-change.test.ts:5:10 - error TS2300: Duplicate identifier 'describe'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:5:20 - error TS2300: Duplicate identifier 'it'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/get-last-substantive-change.test.ts:5:24 - error TS2300: Duplicate identifier 'expect'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/get-last-substantive-change.test.ts:5:32 - error TS2300: Duplicate identifier 'beforeEach'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:5:44 - error TS2300: Duplicate identifier 'afterAll'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:5:54 - error TS2300: Duplicate identifier 'jest'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/get-last-substantive-change.test.ts:7:10 - error TS2300: Duplicate identifier 'describe'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:7:20 - error TS2300: Duplicate identifier 'it'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/get-last-substantive-change.test.ts:7:24 - error TS2300: Duplicate identifier 'expect'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/get-last-substantive-change.test.ts:7:32 - error TS2300: Duplicate identifier 'beforeEach'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:7:44 - error TS2300: Duplicate identifier 'afterAll'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:7:54 - error TS2300: Duplicate identifier 'jest'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/get-last-substantive-change.test.ts:9:10 - error TS2300: Duplicate identifier 'describe'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:9:20 - error TS2300: Duplicate identifier 'it'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/get-last-substantive-change.test.ts:9:24 - error TS2300: Duplicate identifier 'expect'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/get-last-substantive-change.test.ts:9:32 - error TS2300: Duplicate identifier 'beforeEach'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:9:44 - error TS2300: Duplicate identifier 'afterAll'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:9:54 - error TS2300: Duplicate identifier 'jest'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/get-last-substantive-change.test.ts:39:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

     39       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
     40         data: {
        ~~~~~~~~~~~~~~~
    ... 
     45         }
        ~~~~~~~~~
     46       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:48:48 - error TS2345: Argument of type '{ data: { value: never[]; }; }' is not assignable to parameter of type 'never'.

     48       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
     49         data: {
        ~~~~~~~~~~~~~~~
    ... 
     51         }
        ~~~~~~~~~
     52       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:69:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

     69       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
     70         data: {
        ~~~~~~~~~~~~~~~
    ... 
     75         }
        ~~~~~~~~~
     76       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:78:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'System.Title': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

     78       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
     79         data: {
        ~~~~~~~~~~~~~~~
    ... 
     98         }
        ~~~~~~~~~
     99       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:115:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    115       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    116         data: {
        ~~~~~~~~~~~~~~~
    ... 
    121         }
        ~~~~~~~~~
    122       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:124:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'System.Description': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    124       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    125         data: {
        ~~~~~~~~~~~~~~~
    ... 
    144         }
        ~~~~~~~~~
    145       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:163:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    163       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    164         data: {
        ~~~~~~~~~~~~~~~
    ... 
    169         }
        ~~~~~~~~~
    170       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:172:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'System.IterationPath': string; 'System.State': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    172       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    173         data: {
        ~~~~~~~~~~~~~~~
    ... 
    203         }
        ~~~~~~~~~
    204       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:221:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    221       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    222         data: {
        ~~~~~~~~~~~~~~~
    ... 
    227         }
        ~~~~~~~~~
    228       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:230:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'System.AreaPath': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    230       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    231         data: {
        ~~~~~~~~~~~~~~~
    ... 
    250         }
        ~~~~~~~~~
    251       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:271:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    271       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    272         data: {
        ~~~~~~~~~~~~~~~
    ... 
    277         }
        ~~~~~~~~~
    278       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:280:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'Microsoft.VSTS.Common.StackRank': number; 'System.History': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    280       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    281         data: {
        ~~~~~~~~~~~~~~~
    ... 
    311         }
        ~~~~~~~~~
    312       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:331:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    331       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    332         data: {
        ~~~~~~~~~~~~~~~
    ... 
    337         }
        ~~~~~~~~~
    338       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:340:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'System.IterationPath': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    340       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    341         data: {
        ~~~~~~~~~~~~~~~
    ... 
    360         }
        ~~~~~~~~~
    361       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:377:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    377       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    378         data: {
        ~~~~~~~~~~~~~~~
    ... 
    383         }
        ~~~~~~~~~
    384       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:386:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'System.AreaPath': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    386       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    387         data: {
        ~~~~~~~~~~~~~~~
    ... 
    406         }
        ~~~~~~~~~
    407       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:423:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    423       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    424         data: {
        ~~~~~~~~~~~~~~~
    ... 
    429         }
        ~~~~~~~~~
    430       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:432:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': string; 'System.Title': string; 'System.Description': string; 'System.State': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    432       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    433         data: {
        ~~~~~~~~~~~~~~~
    ... 
    456         }
        ~~~~~~~~~
    457       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:474:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    474       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    475         data: {
        ~~~~~~~~~~~~~~~
    ... 
    480         }
        ~~~~~~~~~
    481       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:483:48 - error TS2345: Argument of type '{ data: { value: never[]; }; }' is not assignable to parameter of type 'never'.

    483       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    484         data: {
        ~~~~~~~~~~~~~~~
    ... 
    486         }
        ~~~~~~~~~
    487       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:499:48 - error TS2345: Argument of type 'Error' is not assignable to parameter of type 'never'.

    499       mockHttpClient.get.mockRejectedValueOnce(new Error('API Error'));
                                                       ~~~~~~~~~~~~~~~~~~~~~~
    test/unit/get-last-substantive-change.test.ts:509:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    509       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    510         data: {
        ~~~~~~~~~~~~~~~
    ... 
    515         }
        ~~~~~~~~~
    516       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:518:48 - error TS2345: Argument of type '{ data: { value: never[]; }; }' is not assignable to parameter of type 'never'.

    518       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    519         data: {
        ~~~~~~~~~~~~~~~
    ... 
    521         }
        ~~~~~~~~~
    522       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:537:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    537       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    538         data: {
        ~~~~~~~~~~~~~~~
    ... 
    543         }
        ~~~~~~~~~
    544       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:546:48 - error TS2345: Argument of type '{ data: { value: never[]; }; }' is not assignable to parameter of type 'never'.

    546       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    547         data: {
        ~~~~~~~~~~~~~~~
    ... 
    549         }
        ~~~~~~~~~
    550       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:567:48 - error TS2345: Argument of type '{ data: { id: number; fields: { 'System.CreatedDate': string; }; }; }' is not assignable to parameter of type 'never'.

    567       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    568         data: {
        ~~~~~~~~~~~~~~~
    ... 
    573         }
        ~~~~~~~~~
    574       });
        ~~~~~~~
    test/unit/get-last-substantive-change.test.ts:576:48 - error TS2345: Argument of type '{ data: { value: { rev: number; fields: { 'System.ChangedDate': string; 'System.ChangedBy': { displayName: string; }; 'System.IterationPath': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

    576       mockHttpClient.get.mockResolvedValueOnce({
                                                       ~
    577         data: {
        ~~~~~~~~~~~~~~~
    ... 
    596         }
        ~~~~~~~~~
    597       });
        ~~~~~~~

FAIL test/unit/unified-bulk-operations.test.ts
  Î“Ã¹Ã… Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     Î“Ã‡Ã³ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     Î“Ã‡Ã³ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     Î“Ã‡Ã³ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     Î“Ã‡Ã³ If you need a custom transformation specify a "transform" option in your config.
     Î“Ã‡Ã³ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\ameliapayne\enhanced-ado-mcp\mcp_server\src\utils\paths.ts:19
            thisFileDir = (0, path_1.dirname)((0, url_1.fileURLToPath)(import.meta.url));
                                                                              ^^^^

    SyntaxError: Cannot use 'import.meta' outside a module

      1 | import { readFileSync } from 'fs';
      2 | import { join } from 'path';
    > 3 | import { promptsDir } from './paths.js';
        | ^
      4 | import { logger } from './logger.js';
      5 |
      6 | /**

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (src/utils/prompt-loader.ts:3:1)
      at Object.<anonymous> (src/utils/sampling-client.ts:6:1)
      at Object.<anonymous> (src/services/handlers/bulk-operations/unified-bulk-operations.handler.ts:20:1)
      at Object.<anonymous> (test/unit/unified-bulk-operations.test.ts:7:1)

FAIL test/unit/get-prompts.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/get-prompts.test.ts:5:10 - error TS2300: Duplicate identifier 'describe'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/get-prompts.test.ts:5:20 - error TS2300: Duplicate identifier 'it'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/get-prompts.test.ts:5:24 - error TS2300: Duplicate identifier 'expect'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/get-prompts.test.ts:5:32 - error TS2300: Duplicate identifier 'beforeEach'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/get-prompts.test.ts:5:44 - error TS2300: Duplicate identifier 'afterAll'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/get-prompts.test.ts:5:54 - error TS2300: Duplicate identifier 'jest'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/get-prompts.test.ts:6:10 - error TS2300: Duplicate identifier 'describe'.

    6 import { describe, it, expect } from '@jest/globals';
               ~~~~~~~~
    test/unit/get-prompts.test.ts:6:20 - error TS2300: Duplicate identifier 'it'.

    6 import { describe, it, expect } from '@jest/globals';
                         ~~
    test/unit/get-prompts.test.ts:6:24 - error TS2300: Duplicate identifier 'expect'.

    6 import { describe, it, expect } from '@jest/globals';
                             ~~~~~~
    test/unit/get-prompts.test.ts:7:10 - error TS2300: Duplicate identifier 'describe'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/get-prompts.test.ts:7:20 - error TS2300: Duplicate identifier 'it'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/get-prompts.test.ts:7:24 - error TS2300: Duplicate identifier 'expect'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/get-prompts.test.ts:7:32 - error TS2300: Duplicate identifier 'beforeEach'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/get-prompts.test.ts:7:44 - error TS2300: Duplicate identifier 'afterAll'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/get-prompts.test.ts:7:54 - error TS2300: Duplicate identifier 'jest'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~

FAIL test/unit/handle-based-analysis.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/handle-based-analysis.test.ts:5:10 - error TS2300: Duplicate identifier 'describe'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:5:20 - error TS2300: Duplicate identifier 'it'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/handle-based-analysis.test.ts:5:24 - error TS2300: Duplicate identifier 'expect'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/handle-based-analysis.test.ts:5:32 - error TS2300: Duplicate identifier 'beforeEach'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/handle-based-analysis.test.ts:5:44 - error TS2300: Duplicate identifier 'afterAll'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:5:54 - error TS2300: Duplicate identifier 'jest'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/handle-based-analysis.test.ts:7:10 - error TS2300: Duplicate identifier 'describe'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:7:20 - error TS2300: Duplicate identifier 'it'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/handle-based-analysis.test.ts:7:24 - error TS2300: Duplicate identifier 'expect'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/handle-based-analysis.test.ts:7:32 - error TS2300: Duplicate identifier 'beforeEach'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/handle-based-analysis.test.ts:7:44 - error TS2300: Duplicate identifier 'afterAll'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:7:54 - error TS2300: Duplicate identifier 'jest'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/handle-based-analysis.test.ts:9:10 - error TS2300: Duplicate identifier 'describe'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:9:20 - error TS2300: Duplicate identifier 'it'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/handle-based-analysis.test.ts:9:24 - error TS2300: Duplicate identifier 'expect'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/handle-based-analysis.test.ts:9:32 - error TS2300: Duplicate identifier 'beforeEach'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/handle-based-analysis.test.ts:9:44 - error TS2300: Duplicate identifier 'afterAll'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:9:54 - error TS2300: Duplicate identifier 'jest'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/handle-based-analysis.test.ts:11:10 - error TS2300: Duplicate identifier 'describe'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:11:20 - error TS2300: Duplicate identifier 'it'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/handle-based-analysis.test.ts:11:24 - error TS2300: Duplicate identifier 'expect'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/handle-based-analysis.test.ts:11:32 - error TS2300: Duplicate identifier 'beforeEach'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/handle-based-analysis.test.ts:11:44 - error TS2300: Duplicate identifier 'afterAll'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/handle-based-analysis.test.ts:11:54 - error TS2300: Duplicate identifier 'jest'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/handle-based-analysis.test.ts:48:38 - error TS2345: Argument of type '{ data: { value: { id: number; fields: { 'System.Title': string; 'System.WorkItemType': string; 'System.State': string; 'System.AssignedTo': { displayName: string; }; 'Microsoft.VSTS.Scheduling.StoryPoints': number; ... 4 more ...; 'System.Description': string; }; }[]; }; }' is not assignable to parameter of type 'never'.

     48     get: jest.fn().mockResolvedValue({
                                             ~
     49       data: {
        ~~~~~~~~~~~~~
    ... 
     82       }
        ~~~~~~~
     83     })
        ~~~~~

FAIL test/unit/constants.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/constants.test.ts:30:25 - error TS2339: Property 'BULK_ASSIGN_BY_QUERY_HANDLE' does not exist on type '{ readonly CREATE_NEW_ITEM: "wit-create-new-item"; readonly CLONE_WORK_ITEM: "wit-clone-work-item"; readonly GET_WORK_ITEM_CONTEXT_PACKAGE: "wit-get-work-item-context-package"; ... 21 more ...; readonly NEW_COPILOT_ITEM: "wit-new-copilot-item"; }'.

    30       expect(TOOL_NAMES.BULK_ASSIGN_BY_QUERY_HANDLE).toBe('wit-bulk-assign-by-query-handle');
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/constants.test.ts:31:25 - error TS2339: Property 'BULK_UPDATE_BY_QUERY_HANDLE' does not exist on type '{ readonly CREATE_NEW_ITEM: "wit-create-new-item"; readonly CLONE_WORK_ITEM: "wit-clone-work-item"; readonly GET_WORK_ITEM_CONTEXT_PACKAGE: "wit-get-work-item-context-package"; ... 21 more ...; readonly NEW_COPILOT_ITEM: "wit-new-copilot-item"; }'.

    31       expect(TOOL_NAMES.BULK_UPDATE_BY_QUERY_HANDLE).toBe('wit-bulk-update-by-query-handle');
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~

FAIL test/unit/error-categorization.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/error-categorization.test.ts:6:10 - error TS2300: Duplicate identifier 'describe'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/error-categorization.test.ts:6:20 - error TS2300: Duplicate identifier 'it'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/error-categorization.test.ts:6:24 - error TS2300: Duplicate identifier 'expect'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/error-categorization.test.ts:6:32 - error TS2300: Duplicate identifier 'beforeEach'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/error-categorization.test.ts:6:44 - error TS2300: Duplicate identifier 'afterAll'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/error-categorization.test.ts:6:54 - error TS2300: Duplicate identifier 'jest'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/error-categorization.test.ts:14:10 - error TS2300: Duplicate identifier 'describe'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/error-categorization.test.ts:14:20 - error TS2300: Duplicate identifier 'it'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/error-categorization.test.ts:14:24 - error TS2300: Duplicate identifier 'expect'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/error-categorization.test.ts:14:32 - error TS2300: Duplicate identifier 'beforeEach'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/error-categorization.test.ts:14:44 - error TS2300: Duplicate identifier 'afterAll'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/error-categorization.test.ts:14:54 - error TS2300: Duplicate identifier 'jest'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~

FAIL test/unit/generate-wiql-query-handle.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/generate-wiql-query-handle.test.ts:7:10 - error TS2300: Duplicate identifier 'describe'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:7:20 - error TS2300: Duplicate identifier 'it'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/generate-wiql-query-handle.test.ts:7:24 - error TS2300: Duplicate identifier 'expect'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:7:32 - error TS2300: Duplicate identifier 'beforeEach'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:7:44 - error TS2300: Duplicate identifier 'afterAll'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:7:54 - error TS2300: Duplicate identifier 'jest'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/generate-wiql-query-handle.test.ts:9:10 - error TS2300: Duplicate identifier 'describe'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:9:20 - error TS2300: Duplicate identifier 'it'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/generate-wiql-query-handle.test.ts:9:24 - error TS2300: Duplicate identifier 'expect'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:9:32 - error TS2300: Duplicate identifier 'beforeEach'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:9:44 - error TS2300: Duplicate identifier 'afterAll'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:9:54 - error TS2300: Duplicate identifier 'jest'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/generate-wiql-query-handle.test.ts:11:10 - error TS2300: Duplicate identifier 'describe'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:11:20 - error TS2300: Duplicate identifier 'it'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/generate-wiql-query-handle.test.ts:11:24 - error TS2300: Duplicate identifier 'expect'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:11:32 - error TS2300: Duplicate identifier 'beforeEach'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:11:44 - error TS2300: Duplicate identifier 'afterAll'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:11:54 - error TS2300: Duplicate identifier 'jest'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/generate-wiql-query-handle.test.ts:65:10 - error TS2300: Duplicate identifier 'describe'.

    65 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:65:20 - error TS2300: Duplicate identifier 'it'.

    65 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/generate-wiql-query-handle.test.ts:65:24 - error TS2300: Duplicate identifier 'expect'.

    65 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:65:32 - error TS2300: Duplicate identifier 'beforeEach'.

    65 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:65:44 - error TS2300: Duplicate identifier 'afterAll'.

    65 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:65:54 - error TS2300: Duplicate identifier 'jest'.

    65 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/generate-wiql-query-handle.test.ts:149:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    149       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    150         content: [{ type: 'text', text: 'SELECT [System.Id], [System.Title] FROM WorkItems WHERE [System.State] = \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    151         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    152       });
        ~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:188:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    188       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    189         content: [{ type: 'text', text: 'SELECT [System.Id] FROM WorkItems WHERE [System.State] = \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    190         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    191       });
        ~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:281:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    281       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    282         content: [{ type: 'text', text: 'SELECT [System.Id] FROM WorkItems WHERE [System.State] = \'NonExistent\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    283         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    284       });
        ~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:329:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    329       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    330         content: [{ type: 'text', text: 'SELECT [System.Id] FROM WorkItems WHERE [System.State] = \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    331         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    332       });
        ~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:401:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    401       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    402         content: [{ type: 'text', text: 'SELECT [System.Id] FROM WorkItems WHERE [System.State] = \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    403         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    404       });
        ~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:443:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    443       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    444         content: [{ type: 'text', text: 'SELECT [System.Id] FROM WorkItems WHERE [System.State] = \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    445         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    446       });
        ~~~~~~~
    test/unit/generate-wiql-query-handle.test.ts:513:62 - error TS2345: Argument of type '{ role: string; content: { type: string; text: string; }[]; }' is not assignable to parameter of type 'never'.

    513       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    514         role: 'assistant',
        ~~~~~~~~~~~~~~~~~~~~~~~~~~
    ... 
    518         }]
        ~~~~~~~~~~
    519       });
        ~~~~~~~

FAIL test/unit/bulk-undo.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/bulk-undo.test.ts:5:10 - error TS2300: Duplicate identifier 'describe'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/bulk-undo.test.ts:5:20 - error TS2300: Duplicate identifier 'it'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/bulk-undo.test.ts:5:24 - error TS2300: Duplicate identifier 'expect'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/bulk-undo.test.ts:5:32 - error TS2300: Duplicate identifier 'beforeEach'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/bulk-undo.test.ts:5:44 - error TS2300: Duplicate identifier 'afterAll'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/bulk-undo.test.ts:5:54 - error TS2300: Duplicate identifier 'jest'.

    5 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/bulk-undo.test.ts:7:10 - error TS2300: Duplicate identifier 'describe'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/bulk-undo.test.ts:7:20 - error TS2300: Duplicate identifier 'it'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/bulk-undo.test.ts:7:24 - error TS2300: Duplicate identifier 'expect'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/bulk-undo.test.ts:7:32 - error TS2300: Duplicate identifier 'beforeEach'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/bulk-undo.test.ts:7:44 - error TS2300: Duplicate identifier 'afterAll'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/bulk-undo.test.ts:7:54 - error TS2300: Duplicate identifier 'jest'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~

FAIL test/unit/generate-odata-query-handle.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/generate-odata-query-handle.test.ts:7:10 - error TS2300: Duplicate identifier 'describe'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:7:20 - error TS2300: Duplicate identifier 'it'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/generate-odata-query-handle.test.ts:7:24 - error TS2300: Duplicate identifier 'expect'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/generate-odata-query-handle.test.ts:7:32 - error TS2300: Duplicate identifier 'beforeEach'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:7:44 - error TS2300: Duplicate identifier 'afterAll'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:7:54 - error TS2300: Duplicate identifier 'jest'.

    7 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/generate-odata-query-handle.test.ts:9:10 - error TS2300: Duplicate identifier 'describe'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:9:20 - error TS2300: Duplicate identifier 'it'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/generate-odata-query-handle.test.ts:9:24 - error TS2300: Duplicate identifier 'expect'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/generate-odata-query-handle.test.ts:9:32 - error TS2300: Duplicate identifier 'beforeEach'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:9:44 - error TS2300: Duplicate identifier 'afterAll'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:9:54 - error TS2300: Duplicate identifier 'jest'.

    9 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/generate-odata-query-handle.test.ts:11:10 - error TS2300: Duplicate identifier 'describe'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:11:20 - error TS2300: Duplicate identifier 'it'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/generate-odata-query-handle.test.ts:11:24 - error TS2300: Duplicate identifier 'expect'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/generate-odata-query-handle.test.ts:11:32 - error TS2300: Duplicate identifier 'beforeEach'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:11:44 - error TS2300: Duplicate identifier 'afterAll'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:11:54 - error TS2300: Duplicate identifier 'jest'.

    11 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/generate-odata-query-handle.test.ts:56:1 - error TS2322: Type 'Mock<UnknownFunction>' is not assignable to type '{ (input: URL | RequestInfo, init?: RequestInit | undefined): Promise<Response>; (input: string | URL | Request, init?: RequestInit | undefined): Promise<...>; }'.
      Type 'unknown' is not assignable to type 'Promise<Response>'.

    56 global.fetch = jest.fn();
       ~~~~~~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:89:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    89       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                    ~
    90         content: [{ type: 'text', text: '$filter=State eq \'Active\'' }],
       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    91         usage: { inputTokens: 100, outputTokens: 50 }
       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    92       });
       ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:96:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; Title: string; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

     96       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
     97         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    101         })
        ~~~~~~~~~~
    102       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:125:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    125       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    126         content: [{ type: 'text', text: '$filter=State eq \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    127         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    128       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:132:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; Title: string; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    132       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    133         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    137         })
        ~~~~~~~~~~
    138       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:155:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; Title: string; State: string; WorkItemType: string; CreatedDate: string; ChangedDate: string; AreaPath: string; IterationPath: string; Tags: string; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    155       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    156         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    160         })
        ~~~~~~~~~~
    161       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:185:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    185       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    186         content: [{ type: 'text', text: '$filter=State eq \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    187         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    188       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:192:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; Title: string; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    192       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    193         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    197         })
        ~~~~~~~~~~
    198       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:226:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; Title: string; State: string; WorkItemType: string; CreatedDate: string; ChangedDate: string; AreaPath: string; IterationPath: string; Tags: string; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    226       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    227         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    231         })
        ~~~~~~~~~~
    232       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:266:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    266       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    267         content: [{ type: 'text', text: '$filter=State eq \'NonExistent\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    268         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    269       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:273:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    273       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    274         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    278         })
        ~~~~~~~~~~
    279       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:282:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: never[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    282       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    283         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    287         })
        ~~~~~~~~~~
    288       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:310:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    310       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    311         content: [{ type: 'text', text: '$filter=State eq \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    312         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    313       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:317:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    317       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    318         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    322         })
        ~~~~~~~~~~
    323       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:326:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; Title: string; State: string; WorkItemType: string; Priority: number; Severity: string; }[]; }>; }' is not assignable to parameter of type 'never'.

    326       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    327         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    339         })
        ~~~~~~~~~~
    340       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:361:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    361       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    362         content: [{ type: 'text', text: '$filter=State eq \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    363         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    364       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:368:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    368       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    369         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    373         })
        ~~~~~~~~~~
    374       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:377:57 - error TS2345: Argument of type '{ ok: boolean; status: number; statusText: string; text: () => Promise<string>; }' is not assignable to parameter of type 'never'.

    377       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    378         ok: false,
        ~~~~~~~~~~~~~~~~~~
    ... 
    381         text: async () => 'Server error'
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    382       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:406:62 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; usage: { inputTokens: number; outputTokens: number; }; }' is not assignable to parameter of type 'never'.

    406       mockSamplingClient.createMessage.mockResolvedValueOnce({
                                                                     ~
    407         content: [{ type: 'text', text: '$filter=State eq \'Active\'' }],
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    408         usage: { inputTokens: 100, outputTokens: 50 }
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    409       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:413:57 - error TS2345: Argument of type '{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; }[]; '@odata.count': number; }>; }' is not assignable to parameter of type 'never'.

    413       (global.fetch as jest.Mock).mockResolvedValueOnce({
                                                                ~
    414         ok: true,
        ~~~~~~~~~~~~~~~~~
    ... 
    418         })
        ~~~~~~~~~~
    419       });
        ~~~~~~~
    test/unit/generate-odata-query-handle.test.ts:422:58 - error TS2345: Argument of type '(url: string) => Promise<{ ok: boolean; json: () => Promise<{ value: { WorkItemId: number; Title: string; State: string; WorkItemType: string; }[]; }>; }>' is not assignable to parameter of type 'UnknownFunction'.
      Types of parameters 'url' and 'args' are incompatible.
        Type 'unknown' is not assignable to type 'string'.

    422       (global.fetch as jest.Mock).mockImplementationOnce((url: string) => {
                                                                 ~~~~~~~~~~~~~~~~~~

FAIL test/unit/bulk-preview-limits.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/bulk-preview-limits.test.ts:6:10 - error TS2300: Duplicate identifier 'describe'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:6:20 - error TS2300: Duplicate identifier 'it'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/bulk-preview-limits.test.ts:6:24 - error TS2300: Duplicate identifier 'expect'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/bulk-preview-limits.test.ts:6:32 - error TS2300: Duplicate identifier 'beforeEach'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:6:44 - error TS2300: Duplicate identifier 'afterAll'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:6:54 - error TS2300: Duplicate identifier 'jest'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/bulk-preview-limits.test.ts:7:47 - error TS2307: Cannot find module '../../src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.js' or its corresponding type declarations.

    7 import { handleBulkAssignByQueryHandle } from '../../src/services/handlers/bulk-operations/bulk-assign-by-query-handle.handler.js';
                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:8:10 - error TS2300: Duplicate identifier 'describe'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:8:20 - error TS2300: Duplicate identifier 'it'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/bulk-preview-limits.test.ts:8:24 - error TS2300: Duplicate identifier 'expect'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/bulk-preview-limits.test.ts:8:32 - error TS2300: Duplicate identifier 'beforeEach'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:8:44 - error TS2300: Duplicate identifier 'afterAll'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:8:54 - error TS2300: Duplicate identifier 'jest'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/bulk-preview-limits.test.ts:9:47 - error TS2307: Cannot find module '../../src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.js' or its corresponding type declarations.

    9 import { handleBulkRemoveByQueryHandle } from '../../src/services/handlers/bulk-operations/bulk-remove-by-query-handle.handler.js';
                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:10:10 - error TS2300: Duplicate identifier 'describe'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:10:20 - error TS2300: Duplicate identifier 'it'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-preview-limits.test.ts:10:24 - error TS2300: Duplicate identifier 'expect'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-preview-limits.test.ts:10:32 - error TS2300: Duplicate identifier 'beforeEach'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:10:44 - error TS2300: Duplicate identifier 'afterAll'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:10:54 - error TS2300: Duplicate identifier 'jest'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-preview-limits.test.ts:11:47 - error TS2307: Cannot find module '../../src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.js' or its corresponding type declarations.

    11 import { handleBulkUpdateByQueryHandle } from '../../src/services/handlers/bulk-operations/bulk-update-by-query-handle.handler.js';
                                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:12:10 - error TS2300: Duplicate identifier 'describe'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:12:20 - error TS2300: Duplicate identifier 'it'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-preview-limits.test.ts:12:24 - error TS2300: Duplicate identifier 'expect'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-preview-limits.test.ts:12:32 - error TS2300: Duplicate identifier 'beforeEach'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:12:44 - error TS2300: Duplicate identifier 'afterAll'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:12:54 - error TS2300: Duplicate identifier 'jest'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-preview-limits.test.ts:13:48 - error TS2307: Cannot find module '../../src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.js' or its corresponding type declarations.

    13 import { handleBulkCommentByQueryHandle } from '../../src/services/handlers/bulk-operations/bulk-comment-by-query-handle.handler.js';
                                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:14:10 - error TS2300: Duplicate identifier 'describe'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:14:20 - error TS2300: Duplicate identifier 'it'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-preview-limits.test.ts:14:24 - error TS2300: Duplicate identifier 'expect'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-preview-limits.test.ts:14:32 - error TS2300: Duplicate identifier 'beforeEach'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:14:44 - error TS2300: Duplicate identifier 'afterAll'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:14:54 - error TS2300: Duplicate identifier 'jest'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-preview-limits.test.ts:16:10 - error TS2300: Duplicate identifier 'describe'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:16:20 - error TS2300: Duplicate identifier 'it'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-preview-limits.test.ts:16:24 - error TS2300: Duplicate identifier 'expect'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-preview-limits.test.ts:16:32 - error TS2300: Duplicate identifier 'beforeEach'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:16:44 - error TS2300: Duplicate identifier 'afterAll'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:16:54 - error TS2300: Duplicate identifier 'jest'.

    16 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-preview-limits.test.ts:23:10 - error TS2300: Duplicate identifier 'describe'.

    23 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:23:20 - error TS2300: Duplicate identifier 'it'.

    23 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-preview-limits.test.ts:23:24 - error TS2300: Duplicate identifier 'expect'.

    23 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-preview-limits.test.ts:23:32 - error TS2300: Duplicate identifier 'beforeEach'.

    23 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:23:44 - error TS2300: Duplicate identifier 'afterAll'.

    23 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-preview-limits.test.ts:23:54 - error TS2300: Duplicate identifier 'jest'.

    23 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-preview-limits.test.ts:36:40 - error TS2345: Argument of type '{}' is not assignable to parameter of type 'never'.

    36     patch: jest.fn().mockResolvedValue({}),
                                              ~~
    test/unit/bulk-preview-limits.test.ts:37:39 - error TS2345: Argument of type '{}' is not assignable to parameter of type 'never'.

    37     post: jest.fn().mockResolvedValue({})
                                             ~~

FAIL test/unit/bulk-enhance-descriptions-minimization.test.ts
  Î“Ã¹Ã… Test suite failed to run

    test/unit/bulk-enhance-descriptions-minimization.test.ts:6:10 - error TS2300: Duplicate identifier 'describe'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:6:20 - error TS2300: Duplicate identifier 'it'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:6:24 - error TS2300: Duplicate identifier 'expect'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:6:32 - error TS2300: Duplicate identifier 'beforeEach'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:6:44 - error TS2300: Duplicate identifier 'afterAll'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:6:54 - error TS2300: Duplicate identifier 'jest'.

    6 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:8:10 - error TS2300: Duplicate identifier 'describe'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
               ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:8:20 - error TS2300: Duplicate identifier 'it'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                         ~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:8:24 - error TS2300: Duplicate identifier 'expect'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                             ~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:8:32 - error TS2300: Duplicate identifier 'beforeEach'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                     ~~~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:8:44 - error TS2300: Duplicate identifier 'afterAll'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                 ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:8:54 - error TS2300: Duplicate identifier 'jest'.

    8 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                           ~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:10:10 - error TS2300: Duplicate identifier 'describe'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:10:20 - error TS2300: Duplicate identifier 'it'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:10:24 - error TS2300: Duplicate identifier 'expect'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:10:32 - error TS2300: Duplicate identifier 'beforeEach'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:10:44 - error TS2300: Duplicate identifier 'afterAll'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:10:54 - error TS2300: Duplicate identifier 'jest'.

    10 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:12:10 - error TS2300: Duplicate identifier 'describe'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:12:20 - error TS2300: Duplicate identifier 'it'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:12:24 - error TS2300: Duplicate identifier 'expect'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:12:32 - error TS2300: Duplicate identifier 'beforeEach'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:12:44 - error TS2300: Duplicate identifier 'afterAll'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:12:54 - error TS2300: Duplicate identifier 'jest'.

    12 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:14:10 - error TS2300: Duplicate identifier 'describe'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:14:20 - error TS2300: Duplicate identifier 'it'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                          ~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:14:24 - error TS2300: Duplicate identifier 'expect'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                              ~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:14:32 - error TS2300: Duplicate identifier 'beforeEach'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                      ~~~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:14:44 - error TS2300: Duplicate identifier 'afterAll'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                  ~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:14:54 - error TS2300: Duplicate identifier 'jest'.

    14 import { describe, it, expect, beforeEach, afterAll, jest } from '@jest/globals';
                                                            ~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:27:39 - error TS2345: Argument of type '(url: string) => Promise<{ data: { id: number; fields: { 'System.Title': string; 'System.Description': string; 'System.WorkItemType': string; 'System.State': string; 'System.Tags': string; }; }; }>' is not assignable to parameter of type 'UnknownFunction'.
      Types of parameters 'url' and 'args' are incompatible.
        Type 'unknown' is not assignable to type 'string'.

    27     get: jest.fn().mockImplementation((url: string) => {
                                             ~~~~~~~~~~~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:46:40 - error TS2345: Argument of type '{}' is not assignable to parameter of type 'never'.

    46     patch: jest.fn().mockResolvedValue({})
                                              ~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:67:48 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; }' is not assignable to parameter of type 'never'.

     67     createMessage: jest.fn().mockResolvedValue({
                                                       ~
     68       content: [
        ~~~~~~~~~~~~~~~~
    ... 
     77       ]
        ~~~~~~~
     78     }),
        ~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:80:14 - error TS18046: 'result' is of type 'unknown'.

    80       return result.content[0].text;
                    ~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:244:52 - error TS2345: Argument of type '{ content: { type: string; text: string; }[]; }' is not assignable to parameter of type 'never'.

    244         createMessage: jest.fn().mockResolvedValue({
                                                           ~
    245           content: [
        ~~~~~~~~~~~~~~~~~~~~
    ... 
    254           ]
        ~~~~~~~~~~~
    255         }),
        ~~~~~~~~~
    test/unit/bulk-enhance-descriptions-minimization.test.ts:256:50 - error TS18046: 'result' is of type 'unknown'.

    256         extractResponseText: jest.fn((result) => result.content[0].text)
                                                         ~~~~~~

FAIL test/integration/bulk-operations-integration.test.ts
  Î“Ã¹Ã… Test suite failed to run

    Cannot find module '../../src/services/handlers/bulk-operations/bulk-transition-handler' from 'test/integration/bulk-operations-integration.test.ts'

       8 |
       9 | import { queryHandleService } from '../../src/services/query-handle-service';
    > 10 | import { handleBulkTransitionState } from '../../src/services/handlers/bulk-operations/bulk-transition-handler';
         | ^
      11 | import { handleBulkMoveToIteration } from '../../src/services/handlers/bulk-operations/bulk-move-iteration-handler';
      12 | import { handleBulkLinkByQueryHandles } from '../../src/services/handlers/bulk-operations/bulk-link-handler';
      13 | import { handleGetContextPackagesByQueryHandle } from '../../src/services/handlers/context/get-context-packages-by-query-handle.handler';

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (test/integration/bulk-operations-integration.test.ts:10:1)


Test Suites: 19 failed, 33 passed, 52 total
Tests:       1 failed, 472 passed, 473 total
Snapshots:   0 total
Time:        55.963 s
Ran all test suites.
